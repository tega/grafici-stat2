#LyX 1.6.7 created this file. For more info see http://www.lyx.org/
\lyxformat 345
\begin_document
\begin_header
\textclass report
\begin_preamble
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{amsthm}\usepackage{multicol}
\setcounter{MaxMatrixCols}{10}%TCIDATA{OutputFilter=LATEX.DLL}
%TCIDATA{Version=5.50.0.2953}
%TCIDATA{<META NAME="SaveForMode" CONTENT="1">}
%TCIDATA{BibliographyScheme=Manual}
%TCIDATA{LastRevised=Friday, April 30, 2010 11:18:48}
%TCIDATA{<META NAME="GraphicsSave" CONTENT="32">}
%TCIDATA{Language=American English}
\newcounter{ese}\newcounter{esr}\newcounter{def}\newcounter{prop}\newcounter{doman}\newcounter{ipot}\theoremstyle{remark}\newcounter{theor}\newcounter{theorem}\newtheorem{esempio}[ese]{Esempio}\newtheorem{esercizio}[esr]{Esercizio}\newtheorem{definizione}[def]{Definizione}\newtheorem{remark}{Osservazione}\newtheorem{theorem}[theor]{Teorema}\newtheorem{proprieta}[prop]{Propriet\`a}\newtheorem{domanda}[doman]{Domanda}\newtheorem{ipotesi}[ipot]{Ipotesi}



\makeatother

\usepackage{babel}
\end_preamble
\use_default_options false
\language italian
\inputencoding latin9
\font_roman default
\font_sans default
\font_typewriter default
\font_default_family default
\font_sc false
\font_osf false
\font_sf_scale 100
\font_tt_scale 100

\graphics default
\paperfontsize default
\spacing single
\use_hyperref false
\papersize a4paper
\use_geometry false
\use_amsmath 2
\use_esint 2
\cite_engine basic
\use_bibtopic false
\paperorientation portrait
\secnumdepth 3
\tocdepth 1
\paragraph_separation indent
\defskip medskip
\quotes_language english
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\author "" 
\author "" 
\end_header

\begin_body

\begin_layout Title
Metodi Quantitativi per la Finanza
\begin_inset Newline newline
\end_inset

 Appunti del corso
\end_layout

\begin_layout Author
Claudio Ortelli
\end_layout

\begin_layout Date
Semestre Estivo
\begin_inset Newline newline
\end_inset

 2011
\end_layout

\begin_layout Standard
\begin_inset CommandInset toc
LatexCommand tableofcontents

\end_inset


\end_layout

\begin_layout Chapter
Fonti e raccolta di dati finanziari
\end_layout

\begin_layout Section
Fornitori di dati finanziari
\end_layout

\begin_layout Standard
La raccolta e l'archiviazione di dati è un tema estremamente importante
 in finanza.
 Pensate semplicemente ad una banca che offre un servizio di gestione patrimonia
le.
 Essa deve, tra le altre cose, essere in grado di 
\end_layout

\begin_layout Itemize
calcolare il valore attuale ma anche a qualsiasi data passata dei portafogli
 in deposito, 
\end_layout

\begin_layout Itemize
valutare il rischio associato alle singole posizioni assunte sui vari mercati
 finanziari (azionario, dei cambi, reddito fisso, derivati, ecc.) o in aggregato
 dell'intero portafoglio.
\end_layout

\begin_layout Standard
\noindent
A tale scopo la banca (il discorso è tuttavia generalizzabile a qualsiasi
 operatore finanziario) deve conoscere la composizione attuale del portafoglio,
 le transazioni effettuate in passato con i relativi prezzi d'acquisto e/o
 vendita, i prezzi odierni ed i prezzi storici di chiusura di tutti gli
 strumenti in portafoglio.
 Con il costante aumento della potenza di calcolo disponibile e grazie 
\end_layout

\begin_layout Itemize
all'avvento di internet 
\end_layout

\begin_layout Itemize
al diffondersi di database relazionali (vedi informatica I eII)
\end_layout

\begin_layout Standard
\noindent
la domanda e l'offerta di dati finanziari sono entrambe cresciute enormemente
 nel corso dell'ultimo decennio.
 Oltre ai banali esempi sopracitati esiste tutta una serie di attività proprie
 del settore finanziario che fanno largo uso di dati.
 Fra queste, senza pretesa di esaustività, citiamo 
\end_layout

\begin_layout Itemize
Calcolo della performance 
\end_layout

\begin_layout Itemize
Scomposizione della performance 
\end_layout

\begin_layout Itemize
Calcolo del rischio 
\end_layout

\begin_layout Itemize
Ottimizzazione del portafoglio 
\end_layout

\begin_layout Itemize
Analisi tecnica 
\end_layout

\begin_layout Itemize
Analisi di bilancio 
\end_layout

\begin_layout Itemize
Pricing di derivati 
\end_layout

\begin_layout Itemize
Formazione di aspettative 
\end_layout

\begin_layout Standard
È quindi chiaro quanto sia importante saper reperire in maniera 
\end_layout

\begin_layout Enumerate
affidabile: il flusso di dati non deve essere interrotto (applicazioni di
 borsa real time), la qualità deve essere impeccabile (i dati non devono
 e non possono contenere errori), 
\end_layout

\begin_layout Enumerate
efficace: i dati devono arrivare in tempo utile e poter essere elaborati
 facilmente, 
\end_layout

\begin_layout Enumerate
economica: i costi devono essere tali da non pregiudicare l'attività (la
 redditività del business) 
\end_layout

\begin_layout Standard
\noindent
tutte le informazioni desiderate.
 Esistono a tal scopo dei cosiddetti fornitori di dati (data providers),
 ovvero ditte specializzate nel fornire informazioni legate all'attività
 finanziaria o più in generale economica nazionale e mondiale.
 Fra le principali citiamo 
\end_layout

\begin_layout Itemize
\begin_inset CommandInset href
LatexCommand href
name "Reuters"
target "www.reuters.com"

\end_inset


\end_layout

\begin_layout Itemize
\begin_inset CommandInset href
LatexCommand href
name "Bloomberg"
target "http://www.bloomberg.com"

\end_inset

 
\end_layout

\begin_layout Itemize
\begin_inset CommandInset href
LatexCommand href
name "Datastream"
target "http://www.thomsonreuters.com/business_units/financial/"

\end_inset

 
\end_layout

\begin_layout Itemize
\begin_inset CommandInset href
LatexCommand href
name "Telekurs"
target "http://www.telekurs.com"

\end_inset


\end_layout

\begin_layout Itemize
\begin_inset CommandInset href
LatexCommand href
name "Infotec"
target "http://www.infotecnet.com"

\end_inset

 
\end_layout

\begin_layout Itemize
\begin_inset CommandInset href
LatexCommand href
name "VWD group"
target "http://www.vwdgroup.ch/schweiz"

\end_inset


\end_layout

\begin_layout Itemize
\begin_inset CommandInset href
LatexCommand href
name "Yahoo finance"
target "http://finance.yahoo.com/"

\end_inset


\end_layout

\begin_layout Itemize
\begin_inset CommandInset href
LatexCommand href
name "Swiss Exchange"
target "www.six-swiss-exchange.com/index.html"

\end_inset


\end_layout

\begin_layout Itemize
\begin_inset CommandInset href
LatexCommand href
name "Swissquote"
target "http://www.swissquote.ch"

\end_inset


\end_layout

\begin_layout Itemize
\begin_inset CommandInset href
LatexCommand href
name "Google finance"
target "http://www.google.com/finance?hl=en&tab=we"

\end_inset


\end_layout

\begin_layout Itemize
Altri ...
 
\end_layout

\begin_layout Standard
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
All'Università della Svizzera italiana sono a disposizione due importanti
 fonti di dati finanziari: Datastream, che sarà oggetto di approfondimento
 nel corso di questo capitolo e l'applicazione Reuters 3000 Xtra (un grazie
 all'associazione 
\begin_inset CommandInset href
LatexCommand href
name "Finance Floor USI"
target "www.people.lu.unisi.ch/financefloor/"

\end_inset

 senza la quale l'applicazione non sarebbe disponibile).
\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{remark}
\end_layout

\end_inset

 Per tutta la durata di questo corso il termine 
\emph on
dati
\emph default
 sarà da considerarsi quale sinonimo di 
\emph on
serie storiche
\emph default
 dei prezzi dei vari strumenti finanziari che analizzeremo (ci limiteremo
 a considerare azioni, tassi di cambio e alcuni indici).
 Tuttavia il concetto generale di dati in finanza è da interpretare in maniera
 assai più ampia.
 Citiamo ad esempio 
\end_layout

\begin_layout Itemize
i bilanci pubblicati dalle aziende (essenziali per gli analisti al fine
 della loro valutazione) 
\end_layout

\begin_layout Itemize
le serie macroeconomiche divulgate dai diversi uffici governativi (PIL,
 indice dei prezzi, massa monetaria, tasso di disoccupazione, ..., importazioni,
 esportazioni, dati settoriali, ...) 
\end_layout

\begin_layout Itemize
le news 
\end_layout

\begin_layout Itemize
...
 
\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{remark}
\end_layout

\end_inset


\end_layout

\begin_layout Section
Codici d'identificazione
\end_layout

\begin_layout Standard
Quando cerchiamo i dati di un qualsiasi prodotto o strumento finanziario
 (un'a\SpecialChar \-
zio\SpecialChar \-
ne, un'obbligazione, un fondo, un indice, ecc.) è necessario conoscere
 il suo identificativo.
 Per identificativo intendiamo un sequenza alfanumerica che identifica l'emissio
ne di ogni strumento finanziario in maniera univoca.
 Purtroppo non esiste un unico standard: ogni borsa ed ogni data provider
 ha la propria metodologia di classificazione.
 Noi studieremo in dettaglio Datastream.
 Tuttavia è utile osservare quanto segue: 
\end_layout

\begin_layout Enumerate
Esistono almeno due standard molto utilizzati a livello internazionale:
\end_layout

\begin_deeper
\begin_layout Itemize
ISIN
\end_layout

\begin_deeper
\begin_layout Standard
ISIN = International Securites Identification Number.
 An ISO coding system that uniquely identifies a specific securities issue.
 The organization that allocates ISINs in any particular country is the
 National Numbering Agency (NNA).
\end_layout

\end_deeper
\begin_layout Itemize
SEDOL
\end_layout

\begin_deeper
\begin_layout Standard
SEDOL = Stock Exchange Daily Official List.
 The stock code used to identify all securities issued in the UK or Eire.
 It is the basis of the ISIN code for UK securities, and is composed of
 a 7-digit number allocated by the master file service of the London Stock
 Exchange.
\end_layout

\end_deeper
\begin_layout Standard
Conoscere uno di questi due identificativi è particolarmente utile poiché,
 soprattutto per quanto riguarda il codice ISIN, praticamente tutti i data
 provider lo riconoscono.
 Ad esempio, la banca dati Datastream accetta entrambi questi codici.
\end_layout

\end_deeper
\begin_layout Enumerate
In Svizzera è ancora molto utilizzato il numero di valore (in tedesco: Valorennu
mmer).
 Tuttavia il codice ISIN sembra lentamente ma inesorabilmente avere il sopravven
to.
 
\end_layout

\begin_layout Enumerate
È sempre utile verificare attentamente che i dati raccolti corrispondano
 a quanto desiderato.
 Capita infatti che lo stesso prodotto finanziario venga trattato su più
 borse o in più valute.
 È quindi molto facile commettere errori nella scelta della serie da scaricare
 se non si presta la massima attenzione all'origine dei dati.
 In caso di dubbio e quando ciò è possibile andate a verificare e/o cercare
 direttamente nelle varie borse gli identificativi appropriati.
 Su 
\begin_inset CommandInset href
LatexCommand href
name "Wikipedia"
target "http://en.wikipedia.org/wiki/List_of_stock_exchanges"

\end_inset

 trovate i collegamenti alle principali piazze finanziarie, raggruppate
 per area geografica.
 Fra queste scegliamo quattro esempi:
\end_layout

\begin_deeper
\begin_layout Itemize

\emph on
\begin_inset CommandInset href
LatexCommand href
name "Mercato svizzero"
target "http://www.swx.com/index_en.html"

\end_inset


\end_layout

\begin_layout Standard
Seguite poi 
\begin_inset CommandInset href
LatexCommand href
name "Shares"
target "http://www.six-swiss-exchange.com/shares/overview_en.html"

\end_inset

 ...
 Company -> List of Companies
\end_layout

\begin_layout Standard
-> ABB LTD -> Share details [VN: ...
 ISIN: CH0012221716 ...
 Trading currency: ...]
\end_layout

\begin_layout Itemize

\emph on
\begin_inset CommandInset href
LatexCommand href
name "Mercato svedese"
target "http://omxgroup.com/nordicexchange/"

\end_inset


\end_layout

\begin_layout Standard
Cercate ABB e controllate il codice ISIN e la moneta in cui è quotata l'azione.
 Come potrete notare la medesima azione (il codice ISIN è identico, cioè
 CH0012221716) è quotata in valuta diversa!
\end_layout

\begin_layout Itemize

\emph on
\begin_inset CommandInset href
LatexCommand href
name "Mercato inglese"
target "http://www.londonstockexchange.com"

\end_inset


\end_layout

\begin_layout Itemize

\emph on
\begin_inset CommandInset href
LatexCommand href
name "Mercato italiano"
target "http://www.borsaitalia.it/homepage/homepage.htm"

\end_inset


\end_layout

\begin_deeper
\begin_layout Standard
-> Quotazioni -> Cerca Strumento -> Azioni -> Roma -> ISIN: IT0001008876
\end_layout

\end_deeper
\begin_layout Itemize

\emph on
\begin_inset CommandInset href
LatexCommand href
name "Titoli azionari americani"
target "http://www.nyse.com/"

\end_inset


\end_layout

\begin_deeper
\begin_layout Standard
-> SYMBOL LOOKUP (The Coca-Cola Company)
\end_layout

\begin_layout Standard
Symbol: KO
\end_layout

\begin_layout Standard
\begin_inset CommandInset href
LatexCommand href
name "Website Coca Cola"
target "http://www.coca-cola.com"

\end_inset

: http://www.coca-cola.com
\end_layout

\end_deeper
\end_deeper
\begin_layout Enumerate
Datastream
\end_layout

\begin_deeper
\begin_layout Standard
Il codice alfanumerico ISIN può essere d'aiuto nella ricerca dell'azione
 desiderata.
 Datastream infatti contiene questo codice nel suo ”mnemonic” (è questo
 il nome del codice interno a Datastream che identifica univocamente ogni
 singola serie).
\end_layout

\begin_layout Standard
Ad esempio la Roma ha quale codice alfanumerico ASR e Datastream ha quale
 mnemonic 
\begin_inset Quotes eld
\end_inset

I:ASR”.
 La Coca-Cola ha quale codice alfanumerico 
\begin_inset Quotes eld
\end_inset

KO” e Datastream ha quale mnemonic 
\begin_inset Quotes eld
\end_inset

U:KO”.
 La prima lettera denota quindi il paese (I=Italy, U=United States, C=Canada,
 ...), il carattere 
\begin_inset Quotes eld
\end_inset

:” serve quale delimitatore e poi segue il codice alfanumerico.
 È importante ricordarsi questa costruzione laddove non è stato possibile
 rintracciare il codice ISIN poiché Datastream permette una ricerca per
 ”mnemonic” (è inoltre possibile utilizzare nella ricerca caratteri jolly
 quali 
\begin_inset Quotes eld
\end_inset

*”).
\end_layout

\end_deeper
\begin_layout Section
Datastream, classi di strumenti finanziari e tipologie di dati
\end_layout

\begin_layout Standard
Al quarto piano dell'Istituto di Finanza è disponibile un pc con Datastream
 Advance.
 Il login deve essere effettuato col nome utente: 
\begin_inset Quotes eld
\end_inset

ospite_datastream”, mentre la password è: 
\begin_inset Quotes eld
\end_inset

datastream”.
 Per lanciare il programma andate come d'abitudine nel menu Start -> All
 Programs -> Datastream -> Datastream 5.1.
 Per scaricare dati da Datastream è necessario procedere come segue:
\end_layout

\begin_layout Enumerate
Aprire Datastream Advance e selezionare dal riquadro superiore sinistro
 ”Data category” il tipo di strumento per cui si desidera ottenere la serie
 storica.
 
\end_layout

\begin_layout Enumerate
Nel riquadro inferiore sinistro 
\begin_inset Quotes eld
\end_inset

Analysis
\begin_inset Quotes erd
\end_inset

 selezionare 
\begin_inset Quotes eld
\end_inset

Single Series - Data
\begin_inset Quotes erd
\end_inset

.
 Selezionare 
\emph on
Time Series Data
\emph default
.
 
\end_layout

\begin_layout Enumerate
Nella parte superiore centrale della finestra di Datastream se conoscete
 il codice SEDOL o quello ISIN inseritelo direttamente nel campo 
\emph on
Enter Series
\emph default
 dopo aver attivato il Chekbox denominato 
\emph on
Expert
\emph default
.
\end_layout

\begin_layout Enumerate
Nel caso in cui non si conoscano né il codice ISIN, nè il codice SEDOL e
 neppure il 
\emph on
mnemonic
\emph default
 Datastream, quale aiuto alla ricerca è possibile definire dei filtri.
 I criteri dipendono dalla categoria in cui si effettua la ricerca.
 Per esempio, i criteri disponibili per la categoria Equity sono diversi
 da quelli della categoria Economics.
 Per eseguire una ricerca cliccare il bottone arancione 
\begin_inset Quotes eld
\end_inset

Find series
\begin_inset Quotes erd
\end_inset

.
 
\end_layout

\begin_layout Enumerate
Selezionate il periodo per il quale desiderate scaricare i dati (bottone
 blu 
\begin_inset Quotes eld
\end_inset

Time period
\begin_inset Quotes erd
\end_inset

 oppure cliccando sul checkbox corrispondente il numero di periodi a partire
 da oggi per i quali volete scaricare le osservazioni).
 Sempre nel medesimo riquadro ma più a destra premere il bottone blu 
\emph on
Settings...
 
\emph default
.
 Scegliere la frequenza desiderata: daily, weekly, ecc.
 .
 
\end_layout

\begin_layout Enumerate
Selezionare la valuta.
 
\emph on
Local currency
\emph default
 significa che verrà utilizzata la valuta propria del paese (stock exchange)
 in cui è scambiato il titolo.
\end_layout

\begin_layout Enumerate
Una volta che la serie desiderata è stata individuata, premere il bottone
 
\emph on
Run Now
\emph default
.
 I risultati della ricerca sono visualizzati nel riquadro inferiore centrale.
 Se la ricerca è stata fruttuosa, potete esportare i dati in un foglio excel
 premendo il bottone con il simbolo di excel nella ”Toolbar” proprio sotto
 i menu a cascata.
 
\end_layout

\begin_layout Standard
\begin_inset VSpace smallskip
\end_inset

 
\end_layout

\begin_layout Standard
\noindent
Datastream associa a ciascuna classe di strumenti finanziari (azioni, indici
 a\SpecialChar \-
zio\SpecialChar \-
na\SpecialChar \-
ri, bonds, ...) un determinato insieme di 
\emph on

\begin_inset Quotes eld
\end_inset

Datatype
\emph default
s
\begin_inset Quotes erd
\end_inset

 per ciascuno dei quali è possibile scaricare una serie storica.
 I tipi di dati disponibili variano a seconda della classe di strumenti.
 Ad esempio, il tipo di default per la classe equity è il ”Price (Adjusted)”.
 Cliccando il bottone arancione con la scritta 
\emph on

\begin_inset Quotes eld
\end_inset

Datatype
\emph default

\begin_inset Quotes erd
\end_inset

 si ottiene la lista completa dei tipi disponibili.
 Ad ogni tipo è associato un codice.
 Il ”Price (Adjusted - Default)” ha codice uguale a P.
 Discutiamo ora i seguenti tipi: 
\end_layout

\begin_layout Enumerate
Adjustment Factor (accumulated, Mnemonic = AF) 
\end_layout

\begin_layout Enumerate
Adjustment Factor (not accumulated, Mnemonic = AX) 
\end_layout

\begin_layout Enumerate
Dividends per share (Mnemonic = DPS) 
\end_layout

\begin_layout Enumerate
Marketvalue (Mnemonic = MV) 
\end_layout

\begin_layout Enumerate
Price (unadjusted) (Mnemonic = UP) 
\end_layout

\begin_layout Enumerate
Ex-Dividend Date (Mnemonic = XDDE) 
\end_layout

\begin_layout Enumerate
Date - Dividend Payment (Mnemonic = PYD) 
\end_layout

\begin_layout Standard
\noindent
\begin_inset VSpace 0.3cm
\end_inset


\end_layout

\begin_layout Standard
\noindent
Come potrete constatare voi stessi, cambiando la classe di strumenti finanziari
 e selezionando nuovamente il bottone 
\emph on
Datatype
\emph default
 la lista di tipi di dato fra cui scegliere cambierà.
\begin_inset VSpace 0.3cm
\end_inset


\end_layout

\begin_layout Standard
\noindent
Datastream prevede
\begin_inset Foot
status open

\begin_layout Plain Layout
Si veda la Figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Request-table"

\end_inset

.
\end_layout

\end_inset

 la possibilità di scaricare le serie storiche direttamente in un file Excel,
 senza dover passare dall'applicazione Datastream Advance.
 Due sono i principali vantaggi di un simile approccio.
 Da un lato è possibile scaricare simultaneamente più di una serie storica
 e di un tipo di dato.
 Secondariamente l'aggiornamento di serie già scaricate richiede pochi passi
 ed un eventuale ulteriore elaborazione può essere automatizzata utilizzando
 la grande flessibilità di VBA (Visual Basic for Applications).
 Un esempio verrà presentato in classe.
 L'Help di Datastream Advance alla voce 
\emph on
Creating time series requests in Excel
\emph default
 è un buon punto di partenza.
\begin_inset VSpace 0.3cm
\end_inset


\end_layout

\begin_layout Standard
\noindent
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{esercizio}
\end_layout

\end_inset

 
\begin_inset CommandInset label
LatexCommand label
name "Esercizio 1"

\end_inset

Desideriamo analizzare lo Swiss Market Index (SMI).
 
\end_layout

\begin_layout Enumerate
Trovate su internet le azioni che attualmente sono incluse nello Swiss Market
 Index.
 Suggerimento: visitate il seguente sito 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
newline
\end_layout

\end_inset

 
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
\lang english

\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
url{http://www.six-swiss-exchange.com/indices/overview
\backslash
_en.html}
\end_layout

\end_inset


\end_layout

\begin_layout Enumerate
Di quanti titoli è composto lo SMI? Quali sono? 
\end_layout

\begin_layout Enumerate
Qual è il criterio utilizzato per includere un titolo nell'indice? 
\end_layout

\begin_layout Enumerate
Qual è il peso di ciascun titolo all'interno dell'indice? 
\end_layout

\begin_layout Enumerate
Ogni quanto tempo vengono ricalcolati i pesi? 
\end_layout

\begin_layout Enumerate
Ogni quanto tempo viene aggiornata la lista dei titoli da includere nello
 SMI? 
\end_layout

\begin_layout Enumerate
Scaricate le serie storiche 
\emph on
a frequenza giornaliera
\emph default
 dello SMI degli ultimi 3 anni di osservazioni.
 
\end_layout

\begin_layout Enumerate
Scegliete 3 azioni attualmente rappresentate nell'indice e scaricate la
 serie storica 
\emph on
a frequenza giornaliera
\emph default
 degli ultimi 3 anni di osservazioni.
 
\end_layout

\begin_layout Enumerate
Eseguite il grafico di ogni serie separatamente.
 Eseguite poi un XY
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash

\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset

Scatter plot dell'indice SMI con ciascuna delle 3 serie scaricate.
 Cosa osservate? 
\end_layout

\begin_layout Enumerate
Che differenza c'è con lo SMIC index?
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset space \hfill{}
\end_inset


\begin_inset Formula $\square$
\end_inset


\begin_inset VSpace 0.35in
\end_inset


\end_layout

\end_deeper
\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{esercizio}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename datastream.bmp
	scale 33
	scaleBeforeRotation
	rotateAngle 90

\end_inset


\begin_inset Caption

\begin_layout Plain Layout
L'applicativo Datastream.
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage pagebreak
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename datastricerca.bmp
	scale 45
	scaleBeforeRotation
	rotateAngle 90

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout
Criteri di ricerca di un titolo azionario.
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage pagebreak
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename datatypes.bmp
	scale 45
	scaleBeforeRotation
	rotateAngle 90

\end_inset

 
\begin_inset Caption

\begin_layout Plain Layout
Selezione dei 
\begin_inset Quotes eld
\end_inset

datatypes
\begin_inset Quotes erd
\end_inset

 azionari.
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage pagebreak
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename requestTable.bmp
	scale 45
	scaleBeforeRotation
	rotateAngle 90

\end_inset

 
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Request-table"

\end_inset

Request table in Excel.
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Chapter
Portfolio Models - Introduction
\end_layout

\begin_layout Section
Notazione
\end_layout

\begin_layout Standard
In questo e nei prossimi capitoli faremo ampio uso del calcolo matriciale
 e delle nozioni di statistica multivariata apprese durante i corsi di Algebra
 Lineare e Introduzione all'Econometria.
 Prima di adoperare questi potenti strumenti presentiamo la notazione che
 verrà utilizzata.
 Purtroppo Benninga utilizza una notazione diversa da quella utilizzata
 nei corsi sopracitati.
 È questa una situazione alla quale dovrete abituarvi: in finanza ed in
 econometria non esiste nessuna convenzione per quanto riguarda la notazione.
 Ogni autore utilizzerà perciò i simboli a lui più congeniali.
 Per quanto riguarda questo corso indicheremo con 
\end_layout

\begin_layout Itemize
\begin_inset Formula $P_{t}:=$
\end_inset

 Vettore aleatorio 
\begin_inset Formula $N\times1$
\end_inset

 dei prezzi al tempo 
\begin_inset Formula $t$
\end_inset

.
 
\end_layout

\begin_layout Itemize
\begin_inset Formula $r_{t}:=$
\end_inset

 Vettore aleatorio 
\begin_inset Formula $N\times1$
\end_inset

 dei rendimenti al tempo 
\begin_inset Formula $t$
\end_inset

 (quando necessario verrà specificato il tipo - % o logaritmico - di rendimento).
 
\end_layout

\begin_layout Itemize
\begin_inset Formula $V_{t}:=$
\end_inset

 La matrice 
\begin_inset Formula $N\times N$
\end_inset

 delle varianze e covarianze di 
\begin_inset Formula $r_{t}$
\end_inset

.
 
\end_layout

\begin_layout Itemize
\begin_inset Formula $e_{t}:=$
\end_inset

 Il vettore 
\begin_inset Formula $N\times1$
\end_inset

 dei rendimenti attesi, in altre parole 
\begin_inset Formula \[
e_{t}:=E[r_{t}].\]

\end_inset

 
\end_layout

\begin_layout Standard
Per indicare che il vettore aleatorio 
\begin_inset Formula $r_{t}$
\end_inset

 ha valore atteso 
\begin_inset Formula $e_{t}$
\end_inset

 e matrice delle varianze e covarianze 
\begin_inset Formula $V_{t}$
\end_inset

 scriveremo semplicemente 
\begin_inset Formula $r_{t}\sim(e_{t},V_{t})$
\end_inset

.
 Quest'ultima espressione può essere semplificata ipotizzando che il valore
 atteso e la matrice delle varianze e covarianze dei rendimenti siano costanti
 nel tempo
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Abbiamo già utilizzato un'ipotesi simile nel modello di regressione classica
 
\begin_inset Formula \[
y_{t}=x_{t}^{\prime}\beta+\epsilon_{t}\]

\end_inset

 dove il valore atteso e la varianza dell'errore 
\begin_inset Formula $\epsilon_{t}$
\end_inset

 (di dimensione 
\begin_inset Formula $1\times1$
\end_inset

) sono costanti ed uguali rispettivamente a 
\begin_inset Formula $0$
\end_inset

 e 
\begin_inset Formula $\sigma^{2}$
\end_inset

.
 Le ipotesi già applicate su 
\begin_inset Formula $\epsilon_{t}$
\end_inset

 vengono ora applicate ed in un certo senso estese a 
\begin_inset Formula $r_{t}$
\end_inset

 (di dimensione 
\begin_inset Formula $N\times1$
\end_inset

).
 Infatti, l'ipotesi di stazionarietà dei primi due momenti è la stessa (si
 tratta di una semplice generalizzazione al caso multivariato).
\end_layout

\end_inset

.
 Scriviamo allora semplicemente 
\begin_inset Formula \begin{equation}
r_{t}\sim(e,V)\ .\end{equation}

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{esempio}
\end_layout

\end_inset

 
\begin_inset CommandInset label
LatexCommand label
name "esempio1 benninga"

\end_inset

Nell'esempio a pagina 240 di Benninga troviamo 
\begin_inset Formula $N=2$
\end_inset

 titoli (azioni in questo caso) con i relativi prezzi.
 Le 
\begin_inset Formula $n=61$
\end_inset

 osservazioni riportate sono a frequenza mensile: da 
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\noun off
\color none
\lang english

\begin_inset Formula $t=$
\end_inset

 
\begin_inset Quotes erd
\end_inset

2001-07-05
\begin_inset Quotes erd
\end_inset

 a 
\begin_inset Quotes erd
\end_inset

2006-07-03
\family default
\series default
\shape default
\size default
\emph default
\bar default
\noun default
\color inherit
\lang italian

\begin_inset Quotes erd
\end_inset

.
 Generalmente si è soliti disporre le serie storiche in ordine cronologico
 partendo dall'osservazione più distante nel tempo.
 Come con la matrice 
\begin_inset Formula $X$
\end_inset

 della regressione classica la 
\begin_inset Formula $t-$
\end_inset

esima riga conterrà i prezzi osservati di tutti gli 
\begin_inset Formula $N$
\end_inset

 titoli alla data 
\begin_inset Formula $t$
\end_inset

 mentre la prima (seconda ...) colonna conterrà tutte le osservazioni del primo
 (secondo ...) titolo.
 Nell'esempio di Benninga la prima colonna (colonna 
\series bold
Date
\series default
) contiene l'indice temporale
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Notiamo che la frequenza con cui vengono osservati i prezzi è il mese.
 Per tale motivo in questo esempio l'unità di misura dell'indice temporale
 
\begin_inset Formula $t$
\end_inset

 è il mese.
\end_layout

\end_inset

 
\begin_inset Formula $t$
\end_inset

 ma questa colonna non fa parte della matrice 
\begin_inset Formula $X$
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename tabellaDatiBenninga.jpeg
	scale 60

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Esempio calcolo rendimenti"

\end_inset

Esempio con 
\begin_inset Formula $N=2$
\end_inset

 titoli, Benninga Capitolo 8.2 .
\end_layout

\end_inset


\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{esempio}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\noindent
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Riserveremo gli indici 
\begin_inset Formula $i$
\end_inset

 e 
\begin_inset Formula $j$
\end_inset

 per indicare l'
\begin_inset Formula $i-$
\end_inset

 esimo ed il 
\begin_inset Formula $j-$
\end_inset

 esimo titolo: 
\begin_inset Formula $V_{ij}=Cov(r_{it},r_{jt})$
\end_inset

.
 Avremo allora che 
\begin_inset Formula $V_{ii}=Cov(r_{it},r_{it})=Var(r_{it})$
\end_inset

 è la varianza del rendimento dell'
\begin_inset Formula $i-$
\end_inset

 esimo titolo.
 Denotiamo inoltre con 
\end_layout

\begin_layout Itemize
\begin_inset Formula $q_{t}:=$
\end_inset

 Il vettore deterministico 
\begin_inset Formula $N\times1$
\end_inset

 delle quantità (il numero) di titoli in portafoglio al tempo 
\begin_inset Formula $t$
\end_inset

.
 Quantità negative indicano vendite allo sco\SpecialChar \-
per\SpecialChar \-
to.
 Ad esempio 
\begin_inset Formula $q_{it}=5$
\end_inset

 indica che, al tempo 
\begin_inset Formula $t$
\end_inset

, il portafoglio contiene 
\begin_inset Formula $5$
\end_inset

 unità dell'
\begin_inset Formula $i-$
\end_inset

 esimo titolo.
 Qualora le quantità dovessero essere costanti (la struttura del portafoglio
 non viene modificata)
\begin_inset space \space{}
\end_inset

eviteremo di utilizzare l'indice temporale e scriveremo semplicemente 
\begin_inset Formula $q$
\end_inset

.
 
\end_layout

\begin_layout Itemize
\begin_inset Formula $P_{pt}:=$
\end_inset

 Il valore (
\begin_inset Quotes eld
\end_inset

prezzo”) del portafoglio al tempo 
\begin_inset Formula $t$
\end_inset

.
 Per definizione di 
\begin_inset Formula $q_{t}$
\end_inset

 avremo 
\begin_inset Formula $P_{pt}=q_{t}^{\prime}P_{t}.$
\end_inset

 Come potete vedere si tratta del prodotto scalare tra il vettore dei prezzi
 e quello delle quantità.
 
\end_layout

\begin_layout Itemize
\begin_inset Formula $w_{t}:=$
\end_inset

 Il vettore 
\begin_inset Formula $N\times1$
\end_inset

 dei pesi del portafoglio.
 Ogni componente 
\begin_inset Formula $w_{it}$
\end_inset

 rappresenta la percentuale del valore totale del portafoglio investita
 nel titolo 
\begin_inset Formula $i$
\end_inset

 al tempo 
\begin_inset Formula $t$
\end_inset

.
 Formalmente abbiamo
\begin_inset Formula \[
w_{it}=\frac{q_{it}P_{it}}{P_{pt}}\;.\]

\end_inset

Poiché sono permesse vendite allo scoperto (short selling), 
\begin_inset Formula $w_{it}$
\end_inset

 può avere segno negativo.
 Tuttavia, ad ogni istante temporale 
\begin_inset Formula $t$
\end_inset

, la somma delle componenti di 
\begin_inset Formula $w_{t}$
\end_inset

 deve forzatamente essere uguale ad 
\begin_inset Formula $1$
\end_inset

.
 In altre parole deve valere 
\begin_inset Formula $S^{\prime}w_{t}=1$
\end_inset

, dove come al solito 
\begin_inset Formula $S$
\end_inset

 rappresenta il vettore somma a 
\begin_inset Formula $N$
\end_inset

 componenti.
 
\end_layout

\begin_layout Itemize
\begin_inset Formula $r_{pt}:=$
\end_inset

 Il rendimento del portafoglio al tempo 
\begin_inset Formula $t$
\end_inset

.
 
\end_layout

\begin_layout Section
Rendimenti percentuali e logaritmici: defini\SpecialChar \-
zio\SpecialChar \-
ni e proprietà
\end_layout

\begin_layout Standard
Supponiamo, senza perdita di generalità, che l'unità di misura del tempo
 
\begin_inset Formula $t$
\end_inset

 sia il giorno.
\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{definizione}
\end_layout

\end_inset

 
\begin_inset CommandInset label
LatexCommand label
name "rendimento percentuale singolo periodo"

\end_inset

Il rendimento percentuale giornaliero alla data 
\begin_inset Formula $t$
\end_inset

 dell'azione 
\begin_inset Formula $i$
\end_inset

 è
\begin_inset Formula \begin{equation}
r_{it}:=\frac{P_{it}-P_{i\left(t-1\right)}}{P_{i\left(t-1\right)}}=\frac{P_{it}}{P_{i\left(t-1\right)}}-1~.\label{def rendimento percentuale}\end{equation}

\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{definizione}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{remark}
\end_layout

\end_inset

 Dalla Definizione 
\begin_inset CommandInset ref
LatexCommand ref
reference "rendimento percentuale singolo periodo"

\end_inset

 di rendimento percentuale otteniamo l'identità
\begin_inset Formula \begin{equation}
1+r_{it}=\frac{P_{it}}{P_{i\left(t-1\right)}}~.\label{def identita rendimento percentuale}\end{equation}

\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{remark}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{definizione}
\end_layout

\end_inset

 
\begin_inset CommandInset label
LatexCommand label
name "rendimento logaritmico singolo periodo"

\end_inset

Il rendimento logaritmico giornaliero alla data 
\begin_inset Formula $t$
\end_inset

 dell'azione 
\begin_inset Formula $i$
\end_inset

 è
\begin_inset Formula \begin{equation}
r_{it}:=\ln\left(\frac{P_{it}}{P_{i\left(t-1\right)}}\right)~.\label{def rendimento logaritmico}\end{equation}

\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{definizione}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{remark}
\end_layout

\end_inset

 Se la data 
\begin_inset Formula $t$
\end_inset

 corrisponde alla 
\begin_inset Quotes eld
\end_inset

Ex-Dividend date”, allora il calcolo del rendimento percentuale e logaritmico
 vanno modificati come segue: 
\begin_inset Formula \[
r_{it}=\frac{P_{it}+d_{i\left(t-1\right)}-P_{i\left(t-1\right)}}{P_{i\left(t-1\right)}}=\frac{P_{it}+d_{i\left(t-1\right)}}{P_{i\left(t-1\right)}}-1~,\]

\end_inset

 rispettivamente
\begin_inset Formula \[
r_{it}=\ln\left(\frac{P_{it}+d_{i\left(t-1\right)}}{P_{i\left(t-1\right)}}\right)~.\]

\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{remark}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset VSpace bigskip
\end_inset

 Il motivo per cui viene aggiunto il dividendo è il seguente.
 Al momento dell'acquisto dell'azione in data 
\begin_inset Formula $t-1$
\end_inset

 l'acquirente mantiene il diritto a percepire il dividendo pur rivendendo
 l'azione il giorno 
\begin_inset Formula $t$
\end_inset

.
 Quindi a fronte di un costo iniziale di 
\begin_inset Formula $P_{i\left(t-1\right)}$
\end_inset

 il ricavo totale è dato dal prezzo di vendita 
\begin_inset Formula $P_{it}$
\end_inset

 più il dividendo 
\begin_inset Formula $d_{i\left(t-1\right)}$
\end_inset

.
 Quando il rendimento è calcolato su un periodo superiore al giorno, ad
 esempio l'anno, 
\begin_inset Formula $d_{i\left(t-1\right)}$
\end_inset

 deve comprendere tutti i dividendi versati nel periodo (alcune azioni pagano
 dividendi a frequenza semestrale o addirittura trimestrale).
 Se il periodo è particolarmente lungo occorre tener conto del fatto che
 il dividendo è reinvestito.
 Questo comporta un aumento del numero di azioni che, a sua volta, va ad
 incidere sul calcolo del rendimento per il periodo successivo (si veda
 l'esempio numerico a pagina 256 di Benninga).
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{esempio}
\end_layout

\end_inset

 Continuando con l'esempio precedente (vedi pag.
 240 di Benninga) possiamo calcolare i rendimenti logaritimici 
\emph on
mensili
\emph default
 delle due azioni 
\begin_inset Formula $WMT$
\end_inset

 e 
\begin_inset Formula $TGT$
\end_inset

 utilizzando la funzione 
\begin_inset Formula $LN$
\end_inset

 (logaritmo naturale) di Excel.
 In questo esempio gli eventuali dividendi versati nel periodo non sono
 stati considerati.
 Poiché l'osservazione per il calcolo del rendimento alla data 
\begin_inset Formula $0$
\end_inset

 non è disponibile (sarebbero necessari i prezzi alla data 
\begin_inset Formula $t=-1$
\end_inset

) la matrice dei rendimenti osservati avrà una riga in meno rispetto alla
 matrice dei prezzi osservati (vedi Figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Esempio calcolo rendimenti"

\end_inset

).
\end_layout

\begin_layout Standard
\begin_inset space \hfill{}
\end_inset


\begin_inset Formula $\square$
\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{esempio}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Aggregazione cross-section dei rendimenti
\end_layout

\begin_layout Standard
Consideriamo in questo paragrafo la proprietà 
\begin_inset Quotes eld
\end_inset


\emph on
cross-section
\emph default
” dei rendimenti di un portafoglio.
 La domanda a cui si desidera rispondere è la seguente: qual è la relazione
 tra il rendimento del portafoglio e i rendimenti dei singoli titoli in
 esso contenuto? La proprietà 1 dà una risposta a questa domanda.
\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{proprieta}
\end_layout

\end_inset

 
\begin_inset CommandInset label
LatexCommand label
name "prop cross section rend perc"

\end_inset

Il rendimento percentuale del portafoglio soddisfa la seguente relazione
\begin_inset Formula \begin{equation}
r_{pt}=w_{t-1}^{\prime}r_{t}\ .\label{combinazione lineare rendimenti}\end{equation}

\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{proprieta}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\noindent
\begin_inset VSpace medskip
\end_inset

 Quando i rendimenti sono logaritmici la proprietà 1 non è più mantenuta.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{proprieta}
\end_layout

\end_inset

 
\begin_inset CommandInset label
LatexCommand label
name "prop cross section rend log"

\end_inset

La Proprietà 
\begin_inset CommandInset ref
LatexCommand ref
reference "prop cross section rend perc"

\end_inset

 non è soddisfatta dal rendimento logaritmico.
\begin_inset VSpace medskip
\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{proprieta}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset VSpace medskip
\end_inset

 Le due proprietà appena discusse riguardano l'aggregazione 
\emph on
ad un medesimo istante temporale
\emph default
 di più titoli.
 Per tale motivo si parla della proprietà 
\begin_inset Quotes eld
\end_inset


\emph on
cross-section
\emph default
”
\begin_inset space \space{}
\end_inset

dei rendimenti.
 È questo un aspetto statico rispetto al tempo ma dinamico (aggrego)
\begin_inset space \space{}
\end_inset

rispetto alle componenti del portafoglio.
 Vogliamo ora analizzare la situazione opposta, ovvero cosa capita quando
 l'aggregazione è temporale e non rispetto ai titoli in portafoglio.
 Questo implica analizzare il rendimento di 
\emph on
un singolo titolo
\emph default
 su un periodo di 
\begin_inset Formula $n$
\end_inset

 giorni in funzione degli 
\begin_inset Formula $n$
\end_inset

 rendimenti giornalieri.
\end_layout

\begin_layout Subsection
Aggregazione temporale dei rendimenti
\end_layout

\begin_layout Standard
Consideriamo dapprima 
\emph on
un unico titolo
\emph default
.
 In particolare, calcoliamo il suo rendimento su un orizzonte di 
\begin_inset Formula $n$
\end_inset

 periodi utilizzando i rendimenti calcolati sui singoli periodi precedenti.
 Ad esempio, avendo a disposizione 
\begin_inset Formula $n=12$
\end_inset

 rendimenti mensili come è possibile calcolare il rendimento annuo?
\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{definizione}
\end_layout

\end_inset

 
\begin_inset CommandInset label
LatexCommand label
name "def rendimento perc n periodi"

\end_inset

Il rendimento percentuale dell'
\begin_inset Formula $i-$
\end_inset

esimo titolo calcolato fra 
\begin_inset Formula $t-n$
\end_inset

 e 
\begin_inset Formula $t$
\end_inset

 (su 
\begin_inset Formula $n$
\end_inset

 giorni) è definito come
\begin_inset Formula \begin{equation}
r_{i\left(t-n\right),t}:=\frac{P_{it}-P_{i\left(t-n\right)}}{P_{i\left(t-n\right)}}=\frac{P_{it}}{P_{i\left(t-n\right)}}-1\end{equation}

\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{definizione}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{proprieta}
\end_layout

\end_inset

 
\begin_inset CommandInset label
LatexCommand label
name "prop aggreg temporale rend perc"

\end_inset

Il rendimento percentuale su 
\begin_inset Formula $n$
\end_inset

 periodi soddisfa la seguente relazione 
\begin_inset Formula \begin{equation}
r_{i\left(t-n\right),t}=\prod_{k=1}^{n}\left(1+r_{i\left(t-k+1\right)}\right)-1.\label{prodotto rendimenti perc su singola azione}\end{equation}

\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{proprieta}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{remark}
\end_layout

\end_inset

 Al fine di snellire la notazione, il rendimento giornaliero o in generale
 il rendimento calcolato sul singolo periodo (
\begin_inset Formula $n=1$
\end_inset

) anziché 
\begin_inset Formula $r_{i(t-1),t}$
\end_inset

 verrà semplicemente scritto come 
\begin_inset Formula $r_{it}$
\end_inset

.
 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{remark}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{definizione}
\end_layout

\end_inset

 
\begin_inset CommandInset label
LatexCommand label
name "def rendimento log n periodi"

\end_inset

Il rendimento logaritmico dell'
\begin_inset Formula $i-$
\end_inset

esima azione calcolato fra 
\begin_inset Formula $t-n$
\end_inset

 e 
\begin_inset Formula $t$
\end_inset

 è definito come
\begin_inset Formula \begin{equation}
r_{i\left(t-n\right),t}=\ln\left(\frac{P_{it}}{P_{i\left(t-n\right)}}\right)\end{equation}

\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{definizione}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{proprieta}
\end_layout

\end_inset

 
\begin_inset CommandInset label
LatexCommand label
name "prop aggreg temporale rend log"

\end_inset

Il rendimento logaritmico su 
\begin_inset Formula $n$
\end_inset

 periodi soddisfa la seguente relazione 
\begin_inset Formula \begin{equation}
r_{i\left(t-n\right),t}=\sum_{k=1}^{n}r_{i\left(t-k+1\right)}\ .\end{equation}

\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{proprieta}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset VSpace medskip
\end_inset

Le Proprietà 
\begin_inset CommandInset ref
LatexCommand ref
reference "prop cross section rend perc"

\end_inset

-
\begin_inset CommandInset ref
LatexCommand ref
reference "prop aggreg temporale rend log"

\end_inset

 sono molto importanti per comprendere come viene calcolato il rischio associato
 al movimento dei prezzi di mercato, il cosiddetto 
\emph on
market-risk 
\emph default
(si veda il Capitolo 7: 
\shape smallcaps
Value at Risk
\shape default
).
 Notiamo innanzi tutto che ci sono due dimensioni da considerare.
 La prima riguarda il fatto che il portafoglio è composto da più titoli
 (dimensione 
\emph on
cross-section
\emph default
).
 Questo ci obbliga a con\SpecialChar \-
si\SpecialChar \-
de\SpecialChar \-
ra\SpecialChar \-
re un vettore 
\begin_inset Formula $r_{t}$
\end_inset

 di 
\begin_inset Formula $N$
\end_inset

 rendimenti.
 Le Proprietà 
\begin_inset CommandInset ref
LatexCommand ref
reference "prop cross section rend perc"

\end_inset

 e 
\begin_inset CommandInset ref
LatexCommand ref
reference "prop cross section rend log"

\end_inset

 riguardano proprio questa dimensione:
\begin_inset space \space{}
\end_inset

la Proprietà 
\begin_inset CommandInset ref
LatexCommand ref
reference "prop cross section rend perc"

\end_inset

 afferma che il rendimento percentuale di un portafoglio è dato dalla 
\emph on
combinazione lineare
\emph default
 dei rendimenti percentuali di ogni singolo titolo.
 I pesi di tale combinazione lineare corrispondono alle percentuali con
 cui i titoli erano rappresentati in portafoglio al momento dell'investimento,
 cioè 
\begin_inset Formula $t-1$
\end_inset

.
 Il rendimento logaritmico non possiede questa interessante proprietà (Proprietà
 
\begin_inset CommandInset ref
LatexCommand ref
reference "prop cross section rend log"

\end_inset

).
 Questo significa che il rendimento logaritmico di un portafoglio non è
 uguale alla somma pesata dei rendimenti logaritmici sui singoli titoli.
\end_layout

\begin_layout Standard
\begin_inset VSpace medskip
\end_inset

La seconda dimensione, che riguada invece le Proprietà 
\begin_inset CommandInset ref
LatexCommand ref
reference "prop aggreg temporale rend perc"

\end_inset

 e 
\begin_inset CommandInset ref
LatexCommand ref
reference "prop aggreg temporale rend log"

\end_inset

, concerne l'aspetto 
\emph on
temporale
\emph default
 dell'investimento: il rendimento percentuale di un singolo titolo aggrega
 in maniera geometrica rispetto al tempo (Proprietà 
\begin_inset CommandInset ref
LatexCommand ref
reference "prop aggreg temporale rend perc"

\end_inset

) mentre il rendimento logaritmico aggrega in maniera lineare (Proprietà
 
\begin_inset CommandInset ref
LatexCommand ref
reference "prop aggreg temporale rend log"

\end_inset

).
 È molto importante aver ben capito e sapere distinguere questi due aspetti
 al fine di non cadere in confusione e commettere errori.
 In particolare, come vedremo tra breve e nei prossimi capitoli, a dipendenza
 dalle ipotesi iniziali, dal tipo di rendimento e dalle sue proprietà d'aggregaz
ione giungeremo a conclusioni diverse rispetto alle proprietà statistiche
 (distribuzione, momenti, ...)
\begin_inset space \space{}
\end_inset

dei rendimenti.
\end_layout

\begin_layout Standard
\begin_inset VSpace medskip
\end_inset

Un'ultima osservazione: quando si discute dell'aspetto temporale di aggregazione
 dei rendimenti è necessario specificare la frequenza con cui si osservano
 i prezzi e l'orizzonte sul quale si desidera effettuare l'aggregazione.
 Ad esempio, se disponiamo di rendimenti giornalieri e desideriamo calcolare
 i rendimenti settimanali avremo un orizzonte temporale di 
\begin_inset Formula $5$
\end_inset

 periodi.
\end_layout

\begin_layout Standard
\noindent
\begin_inset VSpace smallskip
\end_inset


\end_layout

\begin_layout Standard
Consideriamo ora 
\emph on
un intero portafoglio
\emph default
 e chiediamoci se l'uguaglianza (
\begin_inset CommandInset ref
LatexCommand ref
reference "prodotto rendimenti perc su singola azione"

\end_inset

) è valida anche per un portafoglio composto da più titoli.
 La risposta è sì, ma con un'importante precisazione.
\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{definizione}
\end_layout

\end_inset

 
\begin_inset CommandInset label
LatexCommand label
name "def rendimento perc n periodi portaf"

\end_inset

Il rendimento percentuale calcolato fra 
\begin_inset Formula $t-n$
\end_inset

 e 
\begin_inset Formula $t$
\end_inset

 
\emph on
di un portafoglio
\emph default
 è definito come
\begin_inset Formula \begin{equation}
r_{p\left(t-n\right),t}:=\frac{P_{pt}-P_{p\left(t-n\right)}}{P_{p\left(t-n\right)}}=\frac{P_{pt}}{P_{p\left(t-n\right)}}-1~.\end{equation}

\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{definizione}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{proprieta}
\end_layout

\end_inset

 
\begin_inset CommandInset label
LatexCommand label
name "prop rendimento perc n periodi portaf"

\end_inset

Il rendimento percentuale su 
\begin_inset Formula $n$
\end_inset

 periodi soddisfa la seguente relazione
\begin_inset Formula \begin{equation}
r_{p\left(t-n\right),t}=\prod_{k=1}^{n}\left(1+r_{p\left(t-k+1\right)}\right)-1,\end{equation}

\end_inset

 dove i singoli rendimenti 
\begin_inset Formula $r_{p\left(t-k+1\right)}$
\end_inset

 sono calcolati utilizzando la relazione (
\begin_inset CommandInset ref
LatexCommand ref
reference "combinazione lineare rendimenti"

\end_inset

) ma ovviamente con un vettore di pesi 
\begin_inset Formula $w_{t-k}$
\end_inset

 diverso per ogni periodo.
\begin_inset VSpace medskip
\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{proprieta}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{remark}
\end_layout

\end_inset

 La proprietà 
\begin_inset CommandInset ref
LatexCommand ref
reference "prop rendimento perc n periodi portaf"

\end_inset

 evidenzia una caratteristica legata alla proprietà cross-section dei rendimenti
 percentuali di un portafoglio: i pesi 
\begin_inset Formula $w_{it}$
\end_inset

 generalmente 
\emph on
non
\emph default
 sono costanti nel tempo (a meno di intervenire sulla composizione del portafogl
io e ribilanciarlo continuamente).
 Questo perché i prezzi dei titoli che costituiscono un portafoglio non
 variano in ugual misura e di conseguenza il peso relativo di ciascun titolo
 rispetto al valore totale del portafoglio tenderà a variare nel tempo.
\begin_inset VSpace medskip
\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{remark}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{esercizio}
\end_layout

\end_inset

 
\begin_inset CommandInset label
LatexCommand label
name "Esercizio pippo"

\end_inset

 
\end_layout

\begin_layout Enumerate
Dimensione 
\begin_inset Formula $\emph{cross-section}$
\end_inset

 dei rendimenti
\end_layout

\begin_deeper
\begin_layout Standard
Il valore 
\begin_inset Formula $P_{pt}$
\end_inset

 al tempo 
\begin_inset Formula $t$
\end_inset

 di un portafoglio composto da solo due titoli è semplicemente 
\begin_inset Formula \[
P_{pt}=q_{1}P_{1,t}+q_{2}P_{2,t}\]

\end_inset

 dove 
\begin_inset Formula $q_{1}$
\end_inset

 e 
\begin_inset Formula $q_{2}$
\end_inset

 (per ipotesi costanti nel tempo) rappresentano la quantità della prima
 e rispettivamente della seconda azione in portafoglio.
 
\end_layout

\begin_layout Enumerate
Dimostrate 
\emph on
algebricamente
\emph default
 che il rendimento percentuale del portafoglio 
\begin_inset Formula \[
r_{p\left(t+1\right)}=\left(P_{p\left(t+1\right)}-P_{pt}\right)/P_{pt}\]

\end_inset

 è uguale alla somma ponderata dei rendimenti percentuali 
\begin_inset Formula \[
r_{i\left(t+1\right)}=\left(P_{i\left(t+1\right)}-P_{it}\right)/P_{it}\]

\end_inset

 su ogni singola azione, ovvero
\begin_inset Formula \[
r_{p\left(t+1\right)}=w_{1t}r_{1\left(t+1\right)}+w_{2t}r_{2\left(t+1\right)\ ,}\]

\end_inset

 verificando che ciascun peso 
\begin_inset Formula $w_{it}$
\end_inset

 corrisponde alla percentuale iniziale dell'
\begin_inset Formula $i-$
\end_inset

esima azione in portafoglio.
 
\end_layout

\begin_layout Enumerate
Verificate quanto avete dimostrato nel punto precedente prendendo due serie
 storiche qualsiasi i dati dell'Esempio 
\begin_inset CommandInset ref
LatexCommand ref
reference "esempio1 benninga"

\end_inset

 (file Chapter 07.xls).
 Assumete 
\begin_inset Formula $q_{1}=1$
\end_inset

 e 
\begin_inset Formula $q_{2}=2$
\end_inset

.
 
\end_layout

\begin_layout Enumerate
Mostrate numericamente con un semplice controesempio che ciò non è valido
 per i rendimenti logaritmici.
 
\end_layout

\end_deeper
\begin_layout Enumerate
Variazione nel tempo della composizione percentuale del portafoglio
\end_layout

\begin_deeper
\begin_layout Standard
Per risolvere quest'esercizio utilizzate le serie storiche contenute nel
 
\emph on
Sheet1
\emph default
 del file 
\emph on
Esercizio2.xls
\emph default
.
 Consideriamo un portafoglio costituito da un'azione di 
\begin_inset Formula $Ubs$
\end_inset

 ed un'azione di 
\begin_inset Formula $Roche$
\end_inset

.
 
\end_layout

\begin_layout Enumerate
In base ai dati a vostra disposizione a quanto ammonta l'unità di misura
 del tempo 
\begin_inset Formula $t$
\end_inset

? 
\end_layout

\begin_layout Enumerate
Eseguite il grafico delle due serie storiche.
 
\end_layout

\begin_layout Enumerate
Calcolate il prezzo (o valore) del portafoglio a tutte le date disponibili.
 
\end_layout

\begin_layout Enumerate
Utilizzando le serie dei prezzi calcolate i rendimenti percentuali di 
\begin_inset Formula $Ubs$
\end_inset

, 
\begin_inset Formula $Roche$
\end_inset

.
 
\end_layout

\begin_layout Enumerate
Utilizzando la serie storica del valore (prezzo) del portafoglio calcolatene
 i rentimenti percentuali.
 
\end_layout

\begin_layout Enumerate
Calcolate i pesi 
\begin_inset Formula $w_{it}$
\end_inset

 di 
\begin_inset Formula $Ubs$
\end_inset

 e 
\begin_inset Formula $Roche$
\end_inset

.
 Sono costanti? Sommano sempre a 1? Fate un grafico delle serie storiche
 dei due pesi.
 
\end_layout

\begin_layout Enumerate
Calcolate i rendimenti percentuali del portafoglio utilizzando i rendimenti
 percentuali di 
\begin_inset Formula $Ubs$
\end_inset

, 
\begin_inset Formula $Roche$
\end_inset

 ed i pesi 
\begin_inset Formula $w_{t}$
\end_inset

.
 Verificate che essi corrispondano ai rendimenti calcolati al punto (
\begin_inset Formula $e)$
\end_inset

.
 
\end_layout

\end_deeper
\begin_layout Enumerate
Rendimenti su più periodi: aggregazione temporale
\end_layout

\begin_deeper
\begin_layout Standard
\noindent
Consideriamo dapprima i rendimenti 
\emph on
logaritmici
\emph default
 settimanali di un'azione 
\begin_inset Formula $i$
\end_inset

, notati 
\begin_inset Formula $r_{it}^{w}$
\end_inset

 (
\begin_inset Formula $w$
\end_inset

 = weekly) in funzione dei rendimenti giornalieri.
 Per definizione essi sono uguali a 
\begin_inset Formula \[
r_{it}^{w}:=r_{i\left(t-5\right),t}=\ln(P_{it}/P_{i\left(t-5\right)})=\sum_{k=1}^{5}r_{i\left(t-k+1\right)}.\]

\end_inset


\end_layout

\begin_layout Enumerate
Esplicitate la sommatoria che definisce 
\begin_inset Formula $r_{it}^{w}$
\end_inset

 per 
\begin_inset Formula $t=5$
\end_inset

.
 Disegnate l'asse temporale ed evidenziate con un colore l'intervallo temporale
 che comprende i rendimenti logaritmici giornalieri utilizzati per il calcolo
 di 
\begin_inset Formula $r_{i5}^{w}$
\end_inset

.
 Sul medesimo asse eseguite la stessa procedura ma per un valore di 
\begin_inset Formula $t=11$
\end_inset

.
 Notate sovrapposizioni fra i colori? Interpretate il risultato? 
\end_layout

\begin_layout Enumerate
Assumiamo che i rendimenti logaritmici giornalieri a date diverse non siano
 fra loro correlati e che 
\begin_inset Formula $r_{i,t}\sim(\mu,\sigma^{2})$
\end_inset

.
 Cosa possiamo dedurre riguardo
\end_layout

\begin_deeper
\begin_layout Enumerate
al valore atteso del rendimento logaritmico settimanale? 
\end_layout

\begin_layout Enumerate
alla varianza del rendimento logaritmico settimanale? 
\end_layout

\begin_layout Enumerate
alla covarianza fra due rendimenti settimanali 
\begin_inset Formula $Cov(r_{i\left(t-l\right)}^{w},r_{it}^{w})$
\end_inset

? Calcolate la covarianza per valori di 
\begin_inset Formula $l$
\end_inset

 pari a 
\begin_inset Formula $1,2,5$
\end_inset

 e 
\begin_inset Formula $6$
\end_inset

.
\end_layout

\begin_deeper
\begin_layout Standard
Suggerimento: per ciascuna coppia 
\begin_inset Formula $(r_{i\left(t-l\right)}^{w},r_{it}^{w})$
\end_inset

 eseguite il disegno dell'asse temporale 
\begin_inset Formula $t$
\end_inset

 ed indicate, con colori diversi, i due intervalli di tempo utilizzati per
 colcolare i rendimenti logaritmici settimanali corrispondenti.
 Calcolate i periodi in comune e confrontate con il valore della covarianza.
\end_layout

\end_deeper
\end_deeper
\begin_layout Enumerate
Se i rendimenti logaritmici giornalieri 
\begin_inset Formula $r_{i,t}$
\end_inset

 fossero 
\begin_inset Formula $i.i.d.\sim(\mu,\sigma^{2})$
\end_inset

, cambierebbe qualcosa nei risultati del punto precedente? Argomentate la
 vostra risposta.
 
\end_layout

\begin_layout Enumerate
Se i rendimenti logaritmici giornalieri 
\begin_inset Formula $r_{i,t}$
\end_inset

 fossero 
\begin_inset Formula $i.i.d.\sim N(\mu,\sigma^{2})$
\end_inset

, quale sarebbe la distribuzione di 
\begin_inset Formula $r_{it}^{w}$
\end_inset

 e perché?
\end_layout

\begin_deeper
\begin_layout Standard
Consideriamo ora i rendimenti 
\emph on
percentuali
\emph default
 sempre di un'unica azione 
\begin_inset Formula $i$
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
Qual è la formula che esprime i rendimenti percentuali settimanali di un'azione
 
\begin_inset Formula $i$
\end_inset

 in funzione dei suoi rendimenti percentuali giornalieri? 
\end_layout

\begin_layout Enumerate
Se i rendimenti percentuali giornalieri 
\begin_inset Formula $r_{i,t}$
\end_inset

 fossero non correlati 
\begin_inset Formula $\sim(\mu,\sigma^{2})$
\end_inset

, cosa potremmo concludere riguardo
\end_layout

\begin_deeper
\begin_layout Enumerate
al valore atteso del rendimento percentuale settimanale? 
\end_layout

\begin_layout Enumerate
alla varianza del rendimento percentuale settimanale? 
\end_layout

\begin_layout Enumerate
alla covarianza fra due rendimenti settimanali 
\begin_inset Formula $Cov(r_{i\left(t-l\right)}^{w},r_{it}^{w})$
\end_inset

? Suggerimento: non perdete troppo tempo su questo punto ...
 
\end_layout

\end_deeper
\begin_layout Enumerate
Se i rendimenti percentuali giornalieri fossero 
\begin_inset Formula $i.i.d.\sim(\mu,\sigma^{2})$
\end_inset

, cambierebbe qualcosa nei risultati del punto precedente? Argomentate la
 vostra risposta.
 
\end_layout

\begin_layout Enumerate
Se i rendimenti percentuali giornalieri fossero 
\begin_inset Formula $i.i.d.\sim N(\mu,\sigma^{2})$
\end_inset

, la distribuzione di 
\begin_inset Formula $r_{it}^{w}$
\end_inset

 sarebbe ancora normale? Argomentate la vostra risposta.
 
\end_layout

\begin_layout Standard
\begin_inset space \hfill{}
\end_inset


\begin_inset Formula $\square$
\end_inset


\end_layout

\end_deeper
\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{esercizio}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset VSpace 0.75cm
\end_inset

 In genere un portafoglio titoli pur essendo valutato in un'unica moneta
 (la cosiddetta moneta di riferimento) è costituito da titoli denominati
 in valute diverse (chf, eur, usd, jpy, ...).
 Sorge quindi il problema di come scomporre il rendimento o il rischio di
 un titolo (o in aggregato di un portafoglio)
\begin_inset space \space{}
\end_inset

nella parte dovuta al movimento del tasso di cambio e in quella dovuta al
 movimento del prezzo in valuta estera.
\end_layout

\begin_layout Standard
\begin_inset VSpace medskip
\end_inset

 Per chiarirci le idee, consideriamo un'azione trattata in 
\begin_inset Formula $EUR$
\end_inset

 alla borsa di Francoforte, il cui prezzo sarà notato 
\begin_inset Formula $P_{it}^{eur}$
\end_inset

.
 Ovviamente quali investitori svizzeri siamo interessati al suo prezzo in
 franchi, cioè 
\begin_inset Formula $P_{it}=P_{eur,t}P_{it}^{eur}$
\end_inset

.
 Il termine 
\begin_inset Formula $P_{eur,t}$
\end_inset

 denota quindi il tasso di cambio fra 
\begin_inset Formula $EUR$
\end_inset

 e 
\begin_inset Formula $CHF$
\end_inset

 alla data 
\begin_inset Formula $t$
\end_inset

: ad esempio 
\begin_inset Formula $P_{eur,t}=1.43\ Fr/Eur$
\end_inset

.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{esempio}
\end_layout

\end_inset

 Un investitore svizzero ha acquistato 10 azioni della BASF.
 L'azione della BASF è quotata in euro.
 La tabella seguente riporta i prezzi a tre date successive.
\begin_inset VSpace 0.5cm
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula $\begin{tabular}{|c|c|c|c|}
 Data  &  Prezzo in eur  &  Cambio 1 eur = \ensuremath{x}chf  &  Prezzo in chf \\
\hline 7-Apr-09  &  \ensuremath{23.40} &  \ensuremath{1.516} &  \\
8-Apr-09  &  \ensuremath{23.43} &  \ensuremath{1.523} &  \\
9-Apr-09  &  \ensuremath{24.96} &  \ensuremath{1.522} &  \end{tabular}$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset VSpace 0.5cm
\end_inset

 Evidentemente il prezzo (e quindi il rendimento) in chf della BASF è soggetto
 a due fonti di incertezza: i movimenti del prezzo della BASF in eur e i
 movimenti del tasso di cambio.
\end_layout

\begin_layout Standard
\begin_inset space \hfill{}
\end_inset


\begin_inset Formula $\square$
\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{esempio}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\noindent
\begin_inset VSpace medskip
\end_inset

 Quattro sono le domande che concernono i rendimenti di titoli quotati in
 moneta estera:
\begin_inset VSpace 0.5cm
\end_inset


\end_layout

\begin_layout Standard
\noindent
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{domanda}
\end_layout

\end_inset

 Dato l'
\begin_inset Formula $i-$
\end_inset

esimo titolo, che relazione sussiste fra il suo rendimento percentuale in
 
\begin_inset Formula $CHF$
\end_inset

 ed il suo rendimento percentuale in 
\begin_inset Formula $EUR$
\end_inset

 
\emph on
su un singolo periodo
\emph default
? 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{domanda}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{domanda}
\end_layout

\end_inset

 Dato l'
\begin_inset Formula $i-$
\end_inset

esimo titolo, che relazione c'è fra il suo rendimento logaritmico in 
\begin_inset Formula $CHF$
\end_inset

 ed il suo rendimento logaritmico in 
\begin_inset Formula $EUR$
\end_inset

 
\emph on
su un singolo periodo
\emph default
? 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{domanda}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{domanda}
\end_layout

\end_inset

 Come si calcola il rendimento percentuale in 
\begin_inset Formula $CHF$
\end_inset

 fra 
\begin_inset Formula $t-n$
\end_inset

 e 
\begin_inset Formula $t$
\end_inset

 (su 
\begin_inset Formula $n$
\end_inset

 periodi)
\begin_inset space \space{}
\end_inset

utilizzando i rendimenti percentuali calcolati su un singolo periodo (confronta
 la formula (
\begin_inset CommandInset ref
LatexCommand ref
reference "prodotto rendimenti perc su singola azione"

\end_inset

))? 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{domanda}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{domanda}
\end_layout

\end_inset

 Come si calcola il rendimento logaritmico in 
\begin_inset Formula $CHF$
\end_inset

 fra 
\begin_inset Formula $t-n$
\end_inset

 e 
\begin_inset Formula $t$
\end_inset

 utilizzando i rendimenti logaritmici calcolati su un singolo periodo?
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
vspace{%
\end_layout

\begin_layout Plain Layout

0.5cm}
\end_layout

\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{domanda}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\noindent
Risponderete a queste domande risolvendo l'esercizio seguente.
\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{esercizio}
\end_layout

\end_inset

 Utilizziamo quale unità di misura del tempo 
\begin_inset Formula $t$
\end_inset

 il giorno.
 Consideriamo un'unica azione
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Eviteremo quindi di utilizzare l'indice 
\begin_inset Formula $i$
\end_inset

 a pedice del suo prezzo o del suo rendimento.
\end_layout

\end_inset

, quotata in dollari al New York Stock Exchange e il cui prezzo in moneta
 locale (
\begin_inset Formula $usd$
\end_inset

) è indicato
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Utilizziamo la convenzione che quando un prezzo (o un rendimento) è espresso
 in una valuta diversa dalla valuta di riferimento, tale valuta sarà posta
 ad apice del prezzo (rendimento).
\end_layout

\end_inset

 con 
\begin_inset Formula $P_{t}^{usd}$
\end_inset

.
 Quali investitori svizzeri siamo interessati ai rendimenti in moneta di
 riferimento, ovvero in 
\begin_inset Formula $chf$
\end_inset

.
 Indicando con 
\begin_inset Formula $P_{usd,t}$
\end_inset

 il tasso di cambio al tempo 
\begin_inset Formula $t$
\end_inset

 e con 
\begin_inset Formula $r_{usd,t}$
\end_inset

 il suo rendimento percentuale, abbiamo la semplice relazione 
\begin_inset Formula $P_{t}=P_{usd,t}P_{t}^{usd}$
\end_inset

.
 
\end_layout

\begin_layout Enumerate
\begin_inset ERT
status collapsed

\begin_layout Plain Layout

[
\end_layout

\end_inset

D1.
\begin_inset ERT
status collapsed

\begin_layout Plain Layout

]
\end_layout

\end_inset

 Trovate la formula che lega il rendimento giornaliero percentuale 
\begin_inset Formula $r_{t}:=\left(P_{t}-P_{t-1}\right)/P_{t-1}$
\end_inset

 ai rendimenti percentuali giornalieri 
\begin_inset Formula $r_{usd,t}$
\end_inset

 e 
\begin_inset Formula $r_{t}^{usd}$
\end_inset

.
 Cosa notate?
\end_layout

\begin_deeper
\begin_layout Standard
Suggerimento: 
\begin_inset Formula \[
r_{t}=\frac{P_{usd,t}P_{t}^{usd}-P_{usd,t}P_{t-1}^{usd}+P_{usd,t}P_{t-1}^{usd}-P_{usd,t-1}P_{t-1}^{usd}}{P_{usd,t-1}P_{t-1}^{usd}}\]

\end_inset

 
\begin_inset Formula \[
\frac{P_{usd,t}P_{t}^{usd}-P_{usd,t}P_{t-1}^{usd}}{P_{usd,t-1}P_{t-1}^{usd}}=(1+r_{usd,t})r_{t}^{usd}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
\begin_inset ERT
status collapsed

\begin_layout Plain Layout

[
\end_layout

\end_inset

D2.
\begin_inset ERT
status collapsed

\begin_layout Plain Layout

]
\end_layout

\end_inset

 Mostrate che il rendimento giornaliero logaritmico in 
\begin_inset Formula $chf$
\end_inset

 è uguale alla somma dei due rendimenti logaritmici giornalieri e cioè quello
 sul prezzo in valuta locale più quello sul tasso di cambio.
 
\end_layout

\begin_layout Enumerate
\begin_inset ERT
status collapsed

\begin_layout Plain Layout

[
\end_layout

\end_inset

D3.
\begin_inset ERT
status collapsed

\begin_layout Plain Layout

]
\end_layout

\end_inset

 Parte 1.
 Derivate la relazione che lega il rendimento percentuale in 
\begin_inset Formula $CHF$
\end_inset

 fra 
\begin_inset Formula $t-n$
\end_inset

 e 
\begin_inset Formula $t$
\end_inset

, notato 
\begin_inset Formula $r_{\left(t-n\right),t}$
\end_inset

, ai rendimenti percentuali 
\begin_inset Formula $r_{usd,\left(t-n\right),t}$
\end_inset

 e 
\begin_inset Formula $r_{\left(t-n\right),t}^{usd}$
\end_inset

.
\end_layout

\begin_deeper
\begin_layout Standard
Suggerimento: riutilizzate, adattando l'indice temporale, il suggerimento
 del punto 1.
\end_layout

\end_deeper
\begin_layout Enumerate
\begin_inset ERT
status collapsed

\begin_layout Plain Layout

[
\end_layout

\end_inset

D3.
\begin_inset ERT
status collapsed

\begin_layout Plain Layout

]
\end_layout

\end_inset

 Parte 2.
 Ricavate la formula per il calcolo del rendimento 
\begin_inset Formula $r_{\left(t-n\right),t}$
\end_inset

 a partire dai rendimenti percentuali sui singoli periodi 
\begin_inset Formula $r_{usd,t}$
\end_inset

 e 
\begin_inset Formula $r_{t}^{usd}$
\end_inset

.
 
\end_layout

\begin_layout Enumerate
\begin_inset ERT
status collapsed

\begin_layout Plain Layout

[
\end_layout

\end_inset

D4.
\begin_inset ERT
status collapsed

\begin_layout Plain Layout

]
\end_layout

\end_inset

 Derivate la relazione che lega il rendimento logaritmico in 
\begin_inset Formula $CHF$
\end_inset

 fra 
\begin_inset Formula $t-n$
\end_inset

 e 
\begin_inset Formula $t$
\end_inset

, notato 
\begin_inset Formula $r_{\left(t-n\right),t}$
\end_inset

, ai rendimenti logaritmici 
\begin_inset Formula $r_{usd,\left(t-n\right),t}$
\end_inset

 e 
\begin_inset Formula $r_{\left(t-n\right),t}^{usd}$
\end_inset

.
 Utilizzando questo risultato derivate la formula per il calcolo 
\begin_inset Formula $r_{\left(t-n\right),t}$
\end_inset

 a partire dai rendimenti logaritmici sui singoli periodi 
\begin_inset Formula $r_{usd,t}$
\end_inset

 e 
\begin_inset Formula $r_{t}^{usd}$
\end_inset

 (proprietà di aggregazione temporale).
 
\end_layout

\begin_layout Enumerate
\begin_inset ERT
status collapsed

\begin_layout Plain Layout

[
\end_layout

\end_inset

D5.
\begin_inset ERT
status collapsed

\begin_layout Plain Layout

]
\end_layout

\end_inset

 Assumiamo che i vettori 
\begin_inset Formula $\left(r_{usd,t},r_{t}^{usd}\right)_{t=1,2,\cdots}^{\prime}$
\end_inset

 dei rendimenti logaritmici formino una successione 
\begin_inset Formula $i.i.d.\sim N(\mu,\Sigma)$
\end_inset

.
 Cosa possiamo concludere riguardo alla successione di rendimenti logaritmici
 in 
\begin_inset Formula $chf$
\end_inset

 
\begin_inset Formula $r_{t}$
\end_inset

?
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset space \hfill{}
\end_inset


\begin_inset Formula $\square$
\end_inset


\end_layout

\end_deeper
\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{esercizio}
\end_layout

\end_inset


\end_layout

\begin_layout Section
Flashback: varianze, covarianze e coefficiente di correlazione
\end_layout

\begin_layout Standard
La varianza di una variabile aleatoria 
\begin_inset Formula $U$
\end_inset

 (scalare) sappiamo essere definita da 
\begin_inset Formula \begin{equation}
Var(U):=E\left(U-E\left(U\right)\right)^{2}\label{varianza}\end{equation}

\end_inset

 mentre la covarianza con la variabile aleatoria 
\begin_inset Formula $W$
\end_inset

 (anch'essa scalare) è uguale
\begin_inset Formula \begin{equation}
Cov(U,W):=E\left(U-E\left(U\right)\right)\left(W-E\left(W\right)\right)\ .\label{covarianza}\end{equation}

\end_inset

 Infine il coefficiente di correlazione fra 
\begin_inset Formula $U$
\end_inset

 e 
\begin_inset Formula $W$
\end_inset

 è definito come
\begin_inset Formula \begin{equation}
Cor(U,W):=\frac{Cov(U,W)}{\sqrt{Var(U)}\sqrt{Var(W)}}\ .\end{equation}

\end_inset

 Per quanto riguarda varianza e covarianza, esistono formule alternative
 che possono essere ricavate a partire dalla loro definizione utilizzando
 la proprietà di linearità del valore atteso.
 Tali formule sono
\begin_inset Formula \[
Var(U)=E\left(U^{2}\right)-\left(E\left(U\right)\right)^{2}\]

\end_inset

 e
\begin_inset Formula \[
Cov(U,W)=E\left(UW\right)-E\left(U\right)E\left(W\right)\ .\]

\end_inset

 Poiché nel caso scalare la moltiplicazione è commutativa, vale che 
\begin_inset Formula \[
Cov(U,W)=Cov(W,U).\]

\end_inset

 Lo stesso non vale nel caso in cui 
\begin_inset Formula $U$
\end_inset

 e/o 
\begin_inset Formula $W$
\end_inset

 siano dei vettori aleatori.
 In tal caso occorre prestare attenzione all'ordine in cui 
\begin_inset Formula $U$
\end_inset

 e 
\begin_inset Formula $W$
\end_inset

 appaiono nella funzione di 
\begin_inset Formula $Cov$
\end_inset

.
 Ricordiamo che la 
\begin_inset Formula $Cov$
\end_inset

 fra due vettori aleatori 
\begin_inset Formula $\underset{\left(r\times1\right)}{U}$
\end_inset

 e 
\begin_inset Formula $\underset{\left(c\times1\right)}{W}$
\end_inset

 è definita nel seguente modo (si noti il trasposto nella formula)
\begin_inset Formula \[
\underset{\left(r\times c\right)}{Cov(U,W)}=E\left[\left(U-E\left(U\right)\right)\left(W-E\left(W\right)\right)^{\prime}\right]\ .\]

\end_inset

 Come nel caso scalare potete dimostrare che 
\begin_inset Formula \[
Cov(U,W)=E\left(UW^{\prime}\right)-E\left(U\right)E\left(W\right)^{\prime}\]

\end_inset

 e quando 
\begin_inset Formula $U=W$
\end_inset

 la formula della covarianza si riduce alla varianza del vettore aleatorio
 
\begin_inset Formula $Y$
\end_inset

: 
\begin_inset Formula \[
Cov(U,U)=Var(U)=E\left[\left(U-E\left(U\right)\right)\left(U-E\left(U\right)\right)^{\prime}\right]\ .\]

\end_inset

 Ricordiamo che, per definizione, la varianza di un vettore aleatorio è
 una matrice quadrata, simmetrica, avente quale elemento nella posizione
 
\begin_inset Formula $(i,j)$
\end_inset

 la covarianza fra l'
\begin_inset Formula $i-$
\end_inset

esima e la 
\begin_inset Formula $j-$
\end_inset

esima componente di 
\begin_inset Formula $U$
\end_inset

, 
\begin_inset Formula $Cov(U_{i},U_{j})$
\end_inset

.
 È possibile definire in maniera del tutto analoga la 
\emph on
matrice di correlazione
\emph default
 del vettore aleatorio 
\begin_inset Formula $U$
\end_inset

 come la matrice quadrata avente nella posizione 
\begin_inset Formula $(i,j)$
\end_inset

 la correlazione fra l'
\begin_inset Formula $i-$
\end_inset

esima e la 
\begin_inset Formula $j-$
\end_inset

esima componente di 
\begin_inset Formula $U$
\end_inset

, 
\begin_inset Formula $Cor(U_{i},U_{j})$
\end_inset

.
 Poiché 
\begin_inset Formula $Cor(U_{i},U_{j})=Cor(U_{j},U_{i})$
\end_inset

, anche la matrice di correlazione di 
\begin_inset Formula $U$
\end_inset

 è simmetrica! In particolare, la diagonale di qualsiasi matrice di correlazione
 è formata da 
\begin_inset Formula $1$
\end_inset

, mentre fuori dalla diagonale devono esserci dei numeri compresi nell'intervall
o 
\begin_inset Formula $[-1,1]$
\end_inset

.
 La matrice di correlazione è positiva semidefinita.
 La matrice di correlazione del vettore aleatorio 
\begin_inset Formula $U$
\end_inset

 sarà notata 
\begin_inset Formula \[
Cor(U)\ .\]

\end_inset

 Abbiamo studiato nella prima parte del corso la convergenza in probabilità
 dei momenti empirici verso i momenti teorici (si riveda la parte riguardante
 la 
\emph on
Convergenza dei momenti del campione
\emph default
).
 La versione empirica della (
\begin_inset CommandInset ref
LatexCommand ref
reference "varianza"

\end_inset

) è, dato un campione di numerosità 
\begin_inset Formula $n$
\end_inset

, semplicemente uguale
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
In MS Excel questa è esattamente la formula sottostante alla funzione 
\begin_inset Formula $varp()$
\end_inset

.
\end_layout

\end_inset


\begin_inset Formula \begin{equation}
\widehat{Var}(U)=\frac{1}{n}\sum_{t=1}^{n}\left(U_{t}-\overline{U}\right)^{2}\ ,\end{equation}

\end_inset

 mentre la versione empirica della (
\begin_inset CommandInset ref
LatexCommand ref
reference "covarianza"

\end_inset

) altro non è che
\begin_inset Formula \begin{equation}
\widehat{Cov}(U,W)=\frac{1}{n}\sum_{t=1}^{n}\left(U_{t}-\overline{U}\right)\left(W_{t}-\overline{W}\right)\ .\label{covarianza empirica}\end{equation}

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{esercizio}
\end_layout

\end_inset

 Consideriamo il vettore aleatorio
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Il vettore 
\begin_inset Formula $\mu$
\end_inset

 è semplicemente il vettore dei valori attesi di 
\begin_inset Formula $Z$
\end_inset

:
\begin_inset Formula \[
\mu=E(Z)=E\left[\left(\begin{array}{c}
U\\
W\end{array}\right)\right]=\left(\begin{array}{c}
E\left[U\right]\\
E\left[W\right]\end{array}\right)=\left(\begin{array}{c}
\mu_{1}\\
\mu_{2}\end{array}\right)~.\]

\end_inset

 
\end_layout

\end_inset

 
\begin_inset Formula $Z:=(U,W)^{\prime}\sim\left(\mu,V\right)$
\end_inset

 di dimensione 
\begin_inset Formula $N=2$
\end_inset

, dalla cui popolazione bivariata estraiamo un campione aleatorio di numerosità
 
\begin_inset Formula $n=3$
\end_inset

.
 Questo significa che avremo a che fare con le realizzazioni di 
\begin_inset Formula $3$
\end_inset

 vettori aleatori 
\begin_inset Formula $Z_{1}=\left(U_{1}~W_{1}\right)^{\prime}$
\end_inset

, 
\begin_inset Formula $Z_{2}=\left(U_{2}~W_{2}\right)^{\prime}$
\end_inset

 e 
\begin_inset Formula $Z_{3}=\left(U_{3}~W_{3}\right)^{\prime}.$
\end_inset

 I tre vettori 
\begin_inset Formula $Z_{1}$
\end_inset

, 
\begin_inset Formula $Z_{2}$
\end_inset

 e 
\begin_inset Formula $Z_{3}$
\end_inset

 sono fra loro indipendenti (ad esempio 
\begin_inset Formula $U_{3}$
\end_inset

 è indipendente da 
\begin_inset Formula $W_{1}$
\end_inset

 o 
\begin_inset Formula $U_{1}$
\end_inset

) mentre le due componenti 
\begin_inset Formula $U_{t}$
\end_inset

 e 
\begin_inset Formula $W_{t}$
\end_inset

 avranno covarianza pari a 
\begin_inset Formula $V_{12}.$
\end_inset

 Possiamo impilare i 
\begin_inset Formula $3$
\end_inset

 vettori 
\begin_inset Formula $Z_{t}$
\end_inset

 disponendoli nelle righe di una matrice
\begin_inset Formula \[
\left[\begin{array}{l}
Z_{1}^{\prime}\\
Z_{3}^{\prime}\\
Z_{3}^{\prime}\end{array}\right]=\left[\begin{array}{l}
U_{1}~W_{1}\\
U_{2}~W_{2}\\
U_{3}~W_{3}\end{array}\right]=\left[x,y\right].\]

\end_inset

 Come nella regressione possiamo leggere ed interpretare il contenuto di
 questa matrice per riga o per colonna.
 Le colonne conterranno tutte le 
\begin_inset Formula $3$
\end_inset

 (
\begin_inset Formula $n$
\end_inset

 in generale) osservazioni della medesima variabile, la 
\begin_inset Formula $U$
\end_inset

 ad esempio (prima colonna).
 Le righe invece conterranno le osservazioni su tutte le variabili ad un
 determinato istante (di una determinata estrazione).
 
\begin_inset Formula $x$
\end_inset

 ed 
\begin_inset Formula $y$
\end_inset

 sono i due vettori aleatori contenenti tutte le 
\begin_inset Formula $n$
\end_inset

 osservazioni della variabile 
\begin_inset Formula $U$
\end_inset

 e rispettivamente della 
\begin_inset Formula $W$
\end_inset

.
 
\end_layout

\begin_layout Enumerate
Quale sarà la dimensione della matrice 
\begin_inset Formula $Cov(x,y)$
\end_inset

? Calcolatela esplicitamente in fuzione della matrice 
\begin_inset Formula $V$
\end_inset

.
 
\end_layout

\begin_layout Enumerate
Riscrivete la (
\begin_inset CommandInset ref
LatexCommand ref
reference "covarianza empirica"

\end_inset

) come 
\begin_inset Formula \[
\widehat{Cov}(U,W)=\frac{1}{3}x^{\prime}My\ ,\]

\end_inset

 e date esplicitamente il contenuto della matrice 
\begin_inset Formula $M$
\end_inset

.
 Di che matrice si tratta? Quali sono le sue caratteristiche? 
\end_layout

\begin_layout Enumerate
Consideriamo il prodotto (
\begin_inset Formula $S$
\end_inset

 è il vettore somma a 
\begin_inset Formula $3$
\end_inset

 componenti) 
\begin_inset Formula \[
\left(y-\mu_{2}S\right)\left(x-\mu_{1}S\right)^{\prime}\ .\]

\end_inset

 Date dimensione e contenuto di ogni simbolo ed esplicitate il prodotto.
 Calcolatene poi il valore atteso.
 
\end_layout

\begin_layout Enumerate
Applicando le proprietà di linearità e commutatività della traccia e del
 valore atteso (già viste ed utilizzate per il calcolo del valore atteso
 di una forma quadratica) calcolate il valore atteso di
\begin_inset Formula \begin{equation}
\frac{1}{3}\left(x-\mu_{1}S\right)^{\prime}M\left(y-\mu_{2}S\right)\ .\label{forma quadratica centrata}\end{equation}

\end_inset

 e mostrate che è uguale a 
\begin_inset Formula $\frac{2}{3}Cov(U,W)$
\end_inset

.
 
\end_layout

\begin_layout Enumerate
Dopo aver sciolto le parentesi della (
\begin_inset CommandInset ref
LatexCommand ref
reference "forma quadratica centrata"

\end_inset

) calcolate il valore atteso di ciascun termine.
 Utilizzando il risultato del punto precedente date 
\begin_inset Formula $E\left(\widehat{Cov}(U,W)\right)$
\end_inset

.
 
\end_layout

\begin_layout Enumerate
Generalizzate il risultato al caso con 
\begin_inset Formula $n$
\end_inset

 osservazioni.
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset space \hfill{}
\end_inset


\begin_inset Formula $\square$
\end_inset


\end_layout

\end_deeper
\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{esercizio}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{remark}
\end_layout

\end_inset

 L'esercizio precedente ci mostra che, come nel caso della stima della varianza,
 anche per la stima della covarianza lo stimatore (
\begin_inset CommandInset ref
LatexCommand ref
reference "covarianza empirica"

\end_inset

) non è corretto poiché sarebbe necessario dividere per 
\begin_inset Formula $n-1$
\end_inset

.
 Tuttavia la distorsione (Bias) è dell'ordine 
\begin_inset Formula $\frac{1}{n}$
\end_inset

 e diventa trascurabile (tende a 0) al tendere di 
\begin_inset Formula $n$
\end_inset

 all'infinito.
 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{remark}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{remark}
\end_layout

\end_inset

 La dimensionalità cross-section del problema
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Ci riferiamo al numero di titoli in portafoglio.
\end_layout

\end_inset

 è espressa dalle dimensioni del vettore aleatorio 
\begin_inset Formula $Z$
\end_inset

 dalla cui distribuzione sono campionate le osservazioni.
 La dimensione temporale è data dal numero
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Tale numero corrisponde al numero di date per le quali abbiamo le osservazioni
 degli 
\begin_inset Formula $N$
\end_inset

 rendimenti azionari
\begin_inset Formula $.$
\end_inset


\end_layout

\end_inset

 
\begin_inset Formula $n=3$
\end_inset

 di campionamenti.
 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{remark}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset VSpace medskip
\end_inset

 Tornando al coefficiente di correlazione: poiché entrambi gli stimatori
 convergono in probabilità alla varianza di 
\begin_inset Formula $X$
\end_inset

 (
\begin_inset Formula $Y$
\end_inset

) e alla covarianza fra 
\begin_inset Formula $X$
\end_inset

 ed 
\begin_inset Formula $Y$
\end_inset

, utilizzando una delle proprietà del 
\begin_inset Formula $p\lim$
\end_inset

 (quale?) avremo che lo stimatore 
\begin_inset Formula \[
\widehat{Cor}(X,Y):=\frac{\widehat{Cov}(X,Y)}{\sqrt{\widehat{Var}(X)}\sqrt{\widehat{Var}(Y)}}\ \]

\end_inset

 è uno stimatore consistente della correlazione fra 
\begin_inset Formula $X$
\end_inset

 ed 
\begin_inset Formula $Y$
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset VSpace medskip
\end_inset

 Concludiamo questa sezione con una semplice applicazione di statistica
 multivariata.
 Sia 
\begin_inset Formula $V$
\end_inset

 la matrice delle varianze e covarianze del vettore aleatorio 
\begin_inset Formula $N$
\end_inset

-dimensionale 
\begin_inset Formula $Z$
\end_inset

 e 
\begin_inset Formula $\Lambda$
\end_inset

 la matrice diagonale con elementi 
\begin_inset Formula $\Lambda_{ii}=Var(Z_{i})$
\end_inset

, 
\begin_inset Formula $\ i=1,\ldots,N$
\end_inset

.
 Vale allora la relazione
\begin_inset Formula \begin{equation}
Cor(Z)=\Lambda^{-1/2}V\Lambda^{-1/2}\ .\label{matrice cor Z}\end{equation}

\end_inset


\end_layout

\begin_layout Standard
\noindent
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{esercizio}
\end_layout

\end_inset

 Sia 
\begin_inset Formula $Z=(X\ Y)^{\prime}$
\end_inset

 un vettore aleatorio a 
\begin_inset Formula $N=2$
\end_inset

 componenti di valore atteso nullo e matrice delle varianze e covarianze
 
\begin_inset Formula \[
V=\left[\begin{array}{cc}
4 & -1\\
-1 & 25\end{array}\right]\ .\]

\end_inset


\end_layout

\begin_layout Enumerate
Calcolate la matrice 
\begin_inset Formula $\Lambda$
\end_inset

 e 
\begin_inset Formula $\Lambda^{-1/2}$
\end_inset

.
 
\end_layout

\begin_layout Enumerate
Verificate che 
\emph on
post-moltiplicare
\emph default
 
\begin_inset Formula $V$
\end_inset

 per la matrice 
\emph on
diagonale
\emph default
 
\begin_inset Formula $\Lambda^{-1/2}$
\end_inset

 significa moltiplicare la 
\begin_inset Formula $i-$
\end_inset

esima 
\emph on
colonna
\emph default
 di 
\begin_inset Formula $V$
\end_inset

 per il corrispettivo 
\begin_inset Formula $i-$
\end_inset

esimo elemento della diagonale di 
\begin_inset Formula $\Lambda^{-1/2}$
\end_inset

.
 
\end_layout

\begin_layout Enumerate
Verificate che 
\emph on
pre-moltiplicare
\emph default
 
\begin_inset Formula $V$
\end_inset

 per la matrice 
\emph on
diagonale
\emph default
 
\begin_inset Formula $\Lambda^{-1/2}$
\end_inset

 significa moltiplicare la 
\begin_inset Formula $i-$
\end_inset

esima 
\emph on
riga
\emph default
 di 
\begin_inset Formula $V$
\end_inset

 per il corrispettivo 
\begin_inset Formula $i-$
\end_inset

esimo elemento della diagonale di 
\begin_inset Formula $\Lambda^{-1/2}$
\end_inset

.
 
\end_layout

\begin_layout Enumerate
Calcolate 
\begin_inset Formula $Cor(Z)$
\end_inset

.
 
\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{esercizio}
\end_layout

\end_inset


\end_layout

\begin_layout Section
Valore atteso e varianza del rendimento di un portafoglio
\end_layout

\begin_layout Standard
Abbiamo dimostrato che il rendimento percentuale 
\begin_inset Formula $r_{p(t-n),t}$
\end_inset

 di un portafoglio è la somma ponderata dei rendimenti 
\begin_inset Formula $r_{i(t-n),t}$
\end_inset

 delle azioni che lo compongono.
 Il vettore di questa combinazione lineare è 
\begin_inset Formula $w_{(t-n)}$
\end_inset

.
 Esso contiene le posizioni percentuali ad inizio periodo.
 Per semplicità di notazione assumiamo 
\begin_inset Formula $n=1$
\end_inset

, tralasciando l'indice temporale sia dei pesi che dei rendimenti.
 Poiché il vettore dei rendimenti 
\begin_inset Formula $r\sim(e,V)$
\end_inset

 e 
\begin_inset Formula $r_{p}=w^{\prime}r$
\end_inset

, avremo per la famosissima formula 
\begin_inset Formula $AVA^{\prime}$
\end_inset

, che 
\begin_inset Formula $Var(r_{p})=w^{\prime}Vw$
\end_inset

.
 Il valore atteso di 
\begin_inset Formula $r_{p}$
\end_inset

 sarà invece uguale a 
\begin_inset Formula $\mu_{p}=w^{\prime}e$
\end_inset

.
\end_layout

\begin_layout Subsection
Caso con due soli titoli
\end_layout

\begin_layout Standard
Il caso con due soli titoli è triviale: 
\begin_inset Formula $r_{p}=w_{1}r_{1}+w_{2}r_{2}$
\end_inset

 da cui segue semplicemente che
\begin_inset Formula \begin{equation}
\sigma_{p}^{2}:=Var(r_{p})=w_{1}^{2}V(r_{1})+w_{2}^{2}V(r_{2})+2w_{1}w_{2}Cov(r_{1},r_{2})\label{varianza portafoglio due titoli}\end{equation}

\end_inset

 Utilizzando il vincolo 
\begin_inset Formula $w_{1}+w_{2}=1$
\end_inset

 è possibile riscrivere la (
\begin_inset CommandInset ref
LatexCommand ref
reference "varianza portafoglio due titoli"

\end_inset

) solo in funzione di 
\begin_inset Formula $w_{1}$
\end_inset

 (o 
\begin_inset Formula $w_{2}$
\end_inset

 ovviamente) ed eseguire un grafico della funzione 
\begin_inset Formula $\sigma_{p}^{2}(w_{1})$
\end_inset

 ovvero della varianza di 
\begin_inset Formula $r_{p}$
\end_inset

 in funzione del peso 
\begin_inset Formula $w_{1}$
\end_inset

.
 Il tutto è lasciato come semplice esercizio.
\end_layout

\begin_layout Subsection
Caso generale
\end_layout

\begin_layout Standard
Il caso con 
\begin_inset Formula $N$
\end_inset

 titoli è praticamente già stato discusso nell'introduzione.
\end_layout

\begin_layout Section
Portafoglio efficiente: concetti generali e de\SpecialChar \-
fi\SpecialChar \-
ni\SpecialChar \-
zio\SpecialChar \-
ne
\end_layout

\begin_layout Standard
Supponiamo che i rendimenti percentuali 
\begin_inset Formula $r_{t}$
\end_inset

 dei titoli in portafoglio siano indipendenti ed identicamente distribuiti
 secondo la legge normale:
\begin_inset Formula \[
r_{t}\sim i.i.d.\ N(e,V)\text{.}\]

\end_inset

 Il rendimento 
\begin_inset Formula $r_{pt}$
\end_inset

 del portafoglio, quale combinazione lineare dei rendimenti dei singoli
 titoli, sarà pertanto una variabile aleatoria distribuita secondo la legge
 normale, di valore atteso 
\begin_inset Formula $\mu_{p}$
\end_inset

 e varianza 
\begin_inset Formula $\sigma_{p}^{2}$
\end_inset

.
\begin_inset VSpace smallskip
\end_inset


\end_layout

\begin_layout Standard
Sappiamo inoltre che per caratterizzare una variabile aleatoria normale
 è necessario e sufficiente specificare il suo valore atteso e la sua varianza.
 Un investitore avrà dunque quali unici parametri di scelta il valore atteso
 e la varianza del portafoglio.
 È quindi ovvio che se i rendimenti sono variabili aleatorie normali, un
 individuo 
\emph on
razionale
\emph default
 ed 
\emph on
avverso al rischio
\emph default
 preferirà investire in un portafoglio 
\begin_inset Formula $A$
\end_inset

 a bassa volatilità anziché in un portafoglio 
\begin_inset Formula $B$
\end_inset

 di medesimo rendimento atteso ma volatilità superiore.
 È dunque legittimo chiedersi se, per un fisso rendimento atteso 
\begin_inset Formula $\mu_{p}=c$
\end_inset

, esiste un portafoglio a varianza minima fra tutti i portafogli di rendimento
 atteso uguale a 
\begin_inset Formula $c$
\end_inset

.
 Un simile portafoglio, se esiste, sarà chiamato portafoglio frontiera (
\begin_inset Quotes eld
\end_inset

envelope portfolio”).
\begin_inset VSpace smallskip
\end_inset


\end_layout

\begin_layout Standard
Tuttavia nulla ci impedisce di ragionare partendo dal rischio associato
 al por\SpecialChar \-
ta\SpecialChar \-
fo\SpecialChar \-
glio, identificato da 
\begin_inset Formula $\sigma_{p}^{2}=d$
\end_inset

.
 In tal caso dovremo chiederci se esiste un portafoglio che massimizza il
 rendimento atteso fra tutti i portafogli con varianza minore o al massimo
 uguale a 
\begin_inset Formula $\sigma_{p}^{2}$
\end_inset

.
 Un portafoglio del genere, se esiste, è chiamato portafoglio efficiente.
 
\end_layout

\begin_layout Standard
\begin_inset VSpace smallskip
\end_inset


\end_layout

\begin_layout Standard
Nel definire il portafoglio frontiera ed il portafoglio efficiente abbiamo
 utilizzato nel nostro ragionamento la varianza del portafoglio.
 Avremmo potuto fare lo stesso ragionamento in termini della volatilità
 
\begin_inset Formula $\sigma_{p}$
\end_inset

 del portafoglio e giungere esattamente alla stessa conclusione in quanto
 le due misure di dispersione sono legate fra loro da una trasformazione
 monotona crescente: dati due portafogli 
\begin_inset Formula $p_{1}$
\end_inset

e 
\begin_inset Formula $p_{2}$
\end_inset

: 
\begin_inset Formula \[
\sigma_{p_{1}}^{2}>\sigma_{p_{2}}^{2}\Longleftrightarrow\sigma_{p_{1}}>\sigma_{p_{2}}\ .\]

\end_inset


\end_layout

\begin_layout Standard
\noindent
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset VSpace 5cm
\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout
Portafogli frontiera
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Chapter
Introduzione al linguaggio di programmazione R
\end_layout

\begin_layout Section
Premessa
\end_layout

\begin_layout Standard
R è un ambiente di sviluppo per l'analisi dei dati nato come estensione
 del linguaggio di programmazione S sviluppato negli anni 80 nei Laboratori
 Bell americani dell'AT&T.
 R è un ambiente statistico aperto e di pubblico dominio (
\begin_inset Quotes eld
\end_inset

open source”) che, nel rispetto dei diritti d'autore, può essere copiato,
 distribuito e modificato da chiunque.
 Inizialmente scritto da Ross Ihaka e Robert Gentleman del Dipartimento
 di Statistica dell'Università di Auckland, Nuova Zelanda, dal 1997 lo sviluppo
 di R è affidato ad un gruppo internazionale denominato 
\begin_inset Quotes eld
\end_inset

R Core Team”.
 Il codice sorgente e gli eseguibili del programma di base e delle varie
 librerie aggiuntive possono essere scaricati accedendo all'indirizzo web
 
\begin_inset CommandInset href
LatexCommand href
name "http://www.r-project.org"
target "http://www.r-project.org"

\end_inset

 dove sono scaricabili le versioni del linguaggio per diversi sistemi operativi
 (Linux, Mac, Windows, ...).
 
\end_layout

\begin_layout Standard
Questo documento non è un manuale ma vuole essere semplicemente una traccia
 o un riassunto di quanto presentato in classe.
 Per ulteriori approfondimenti e precisazioni dei temi trattati, oltre ai
 manuali ed alla ricca documentazione disponibile all'indirizzo sopraccitato,
 si vedano i riferimenti bibliografici indicati all'indirizzo 
\begin_inset CommandInset href
LatexCommand href
name "http://www.r-project.org/doc/bib/R-publications.html"
target "http://www.r-project.org/doc/bib/R-publications.html"

\end_inset

.
 Buona documentazione in varie lingue fra cui l'italiano è pure ottenibile
 all'in\SpecialChar \-
di\SpecialChar \-
riz\SpecialChar \-
zo 
\begin_inset CommandInset href
LatexCommand href
name "http://stat.ethz.ch/CRAN/other-docs.html"
target "http://stat.ethz.ch/CRAN/other-docs.html"

\end_inset

.
\end_layout

\begin_layout Section
Installazione
\end_layout

\begin_layout Standard
\noindent
Il programma R è stato installato sul disco 
\begin_inset Quotes eld
\end_inset

Condivisione” nella cartella 
\emph on
programs/R/
\emph default
 (la versione attuale è la 2.10.1).
 Tuttavia i normali utenti non hanno diritto di scrittura su tale disco
 e pertanto prima di lanciare il programma dovete creare una shortcut in
 una cartella sulla quale avete diritto di lettura e scrittura.
 In 
\begin_inset space \space{}
\end_inset

pratica dovete seguire i seguenti passi: 
\end_layout

\begin_layout Enumerate
Creare una cartella che verrà utilizzata come home di R.
 Suggerisco di creare la cartella 
\begin_inset Quotes eld
\end_inset

R” nella directory 
\begin_inset Quotes eld
\end_inset

My Documents”.
 In tal modo sarà possibile accedere ai dati da qualsiasi pc interno ed
 esterno all'USI.
 
\end_layout

\begin_layout Enumerate
Andate poi in 
\begin_inset Quotes eld
\end_inset


\backslash

\backslash
usi
\backslash
dfs
\backslash
Condivisione
\backslash
programs
\backslash
R
\backslash
2.10.1
\backslash
bin”.
 
\end_layout

\begin_layout Enumerate
Create una shortcut di 
\begin_inset Quotes eld
\end_inset

Rgui.exe” sul vostro desktop.
 L'icona 
\begin_inset Quotes eld
\end_inset

Rgui.exe” verrà utilizzata per lanciare R.
 
\end_layout

\begin_layout Enumerate
Selezionare l'icona della shortcut appena creata col tasto destro del mouse
 e scegliere dal menu a cascata la voce properties.
 
\end_layout

\begin_layout Enumerate
Nel campo 
\begin_inset Quotes eld
\end_inset

Start in” immettere il percorso della directory creata al punto 1.
 Nel mio caso il percorso è 
\begin_inset Formula \[
\text{“}\backslash\backslash usi\backslash dfs\backslash istituti\backslash Documents\backslash ortellic\backslash My\: Documents\backslash R\text{”}.\]

\end_inset

 Voi dovreste avere un percorso simile ma con 
\begin_inset Quotes eld
\end_inset

ortellic” rimpiazzato dal vostro identificativo d'accesso (login name).
 
\end_layout

\begin_layout Enumerate
Chiudere la finestra delle proprietà della shortcut.
 
\end_layout

\begin_layout Standard
\begin_inset VSpace medskip
\end_inset

 Ora siete pronti ad avviare la vostra prima sessione di R!
\end_layout

\begin_layout Standard
\noindent
\begin_inset VSpace medskip
\end_inset

 È possibile configurare R andando ad aggiungere, eliminare o modificare
 il contenuto del file Rprofile.site che si trova nella sottocartella 
\begin_inset Quotes eld
\end_inset

etc” della cartella in cui è stato installato il programma.
 All'USI l'applicazione R è installata in 
\begin_inset Formula \[
\text{“}\backslash\backslash usi\backslash dfs\backslash Condivisione\backslash programs\backslash R\backslash2.10.1\text{”}\]

\end_inset

 e il file Rprofile.site si troverà quindi in 
\begin_inset Formula \[
\text{“}\backslash\backslash usi\backslash dfs\backslash Condivisione\backslash programs\backslash R\backslash2.10.1\backslash etc\text{” .}\]

\end_inset

 Tuttavia, poiché non avete diritto di scrittura è necessario operare diversamen
te.
 Anziché modificare il file Rprofile.site ne facciamo una copia e la mettiamo
 nella cartella di home di R (da noi creata in precedenza al punto 1).
 All'avvio di R il programma cerca automaticamente nella cartella di home
 la presenza del file 
\begin_inset Quotes eld
\end_inset


\begin_inset Formula $.Rprofile$
\end_inset

” e ne legge il contenuto.
 Modifichiamo il contenuto di Rprofile.site e in seguito cambiamo il suo
 nome
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
In Windows XP non è possibile rinominare un file da explorer con un nome
 che inizia con un punto.
 È necessario farlo da linea di comando (command prompt).
 Evito per ragioni di tempo di spiegare come aggirare il problema.
 La semplice alternativa è quella di copiare un file già esistente per poi
 modificarlo secondo le proprie necessità.
 Voi potete utilizzare il file .Rprofile disponibile su 
\begin_inset CommandInset href
LatexCommand href
name "www.iCorsi.ch"
target "www.iCorsi.ch"

\end_inset

.
 Con Windows 7 questo problema non sussiste.
\end_layout

\end_inset

 in 
\begin_inset Quotes eld
\end_inset


\begin_inset Formula $.Rprofile$
\end_inset

”.
 In tal modo ci assicuriamo che dopo l'avvio di R il programma abbia caricato
 la configurazione da noi desiderata.
 Un esempio di .Rprofie è dato qui di seguito
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Attenzione: i file che iniziano con un punto sono normalmente nascosti.
 Per vederli è
\begin_inset space \space{}
\end_inset

necessario aprire la cartella contenente il file che si desidera visualizzare,
 selezionare il Menu 
\begin_inset Formula \[
\emph{Tools\ ->\ Folder\ Options\ ...}\]

\end_inset

 selezionare l'etichetta 
\begin_inset Quotes eld
\end_inset

View” e selezionare l'opzione 
\begin_inset Quotes eld
\end_inset

Show hidden files and folders”.
\end_layout

\end_inset

:
\end_layout

\begin_layout Standard
\noindent
# Things you might want to change
\end_layout

\begin_layout Standard
options(papersize=
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

a4
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

)
\end_layout

\begin_layout Standard
# options(editor=
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

notepad
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

)
\end_layout

\begin_layout Standard
# options(pager=
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

internal
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

)
\end_layout

\begin_layout Standard
# to prefer Compiled HTML help
\end_layout

\begin_layout Standard
options(chmhelp=FALSE)
\end_layout

\begin_layout Standard
# to prefer HTML help
\end_layout

\begin_layout Standard
options(htmlhelp=TRUE)
\end_layout

\begin_layout Standard
\begin_inset VSpace medskip
\end_inset

 Il carattere 
\begin_inset Quotes eld
\end_inset


\begin_inset Formula $\#$
\end_inset

” serve per commentare il codice.
 Una linea che inizia con tale carattere non verà eseguita!
\end_layout

\begin_layout Standard
\noindent
\begin_inset VSpace medskip
\end_inset

 Se desiderate installare R a casa dovete scaricare il programma: 
\end_layout

\begin_layout Enumerate
Andate al sito 
\emph on

\begin_inset CommandInset href
LatexCommand href
name "www.r-project.org"
target "www.r-project.org"

\end_inset


\emph default
 .
\end_layout

\begin_layout Enumerate
Cliccate su CRAN sul lato sinistro della finestra.
 Dopodiché selezionate un 
\begin_inset Quotes eld
\end_inset

CRAN Mirrors”, io generalmente seleziono quello dell'ETH-Zurigo: 
\begin_inset CommandInset href
LatexCommand href
name "http://cran.ch.r-project.org/"
target "http://cran.ch.r-project.org/"

\end_inset

.
 In base alla piattaforma scaricate l'ultima versione di R, al momento la
 2.12.2 ed installatela (a giorni dovrebbe essere rilasciata la versione 2.13.0).
 
\end_layout

\begin_layout Standard
\noindent
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{remark}
\end_layout

\end_inset

 Gli utilizzatori del sistema operativo Linux trovano R nei pacchetti della
 loro distribuzione preferita.
 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{remark}
\end_layout

\end_inset


\end_layout

\begin_layout Section
La linea di comando
\end_layout

\begin_layout Standard
Alla sua apertura il programma R mostra una sola finestra.
 Questa finestra è chiamata 
\emph on
\lang english
finestra di comando
\emph default
\lang italian
 in quanto essa contiene la 
\emph on
linea di comando
\emph default
, cioè il luogo dove scrivere i comandi che verranno poi eseguiti dal programma.
 A prima vista il tutto può sembrare molto scomodo, soprattutto per coloro
 che sono abituati a lavorare tramite mouse, menu a cascata, bottoni ecc.
 .
 Questo in parte è vero ...
 ma solo nella fase iniziale.
 Infatti, man mano che apprenderete i comandi di R vi accorgerete della
 velocità e dei vantaggi di questo sistema.
\end_layout

\begin_layout Standard
\begin_inset VSpace medskip
\end_inset

 Particolarmente importante, soprattutto durante la fase di apprendimento,
 è il comando 
\begin_inset Formula $\emph{help(}^{\prime}nome^{\prime}\emph{)}$
\end_inset

.
 Con questo comando richiamate la pagina del manuale di R che descrive la
 sintassi ed il funzionamento del comando 
\begin_inset Formula $\prime nome\prime$
\end_inset

.
 Per esempio, digitando 
\emph on
help(help)
\emph default
 appare la pagina con la descrizione del comando help.
 Potete leggere in tale pagina che una scorciatoia al comando help() è data
 dal punto interrogativo 
\emph on
'?'
\emph default
.
 Al posto di help(help) avremmo anche potuto scrivere ?help.
 Ancora un'osservazione prima di iniziare.
 Se voi digitate 
\emph on
help 
\emph default
senza aggiungere le parentesi tonde verrà visualizzato il codice della funzione
 help.
 Questo comportamento vale per tutti i comandi di R.
 Infine, per ricerche avanzate digitare 
\emph on
help.start()
\emph default
.
\end_layout

\begin_layout Standard
\begin_inset VSpace medskip
\end_inset

 Un primo grande vantaggio della linea di comando è dato dal fatto di poter
 richiamare e quindi ripetere velocemente un comando o una serie di comandi
 impartiti in precedenza.
 Utilizzando le frecce 
\begin_inset Quotes eld
\end_inset

in alto” e 
\begin_inset Quotes eld
\end_inset

in basso” è possibile scorrere la storia dei comandi impartiti.
 Per ottenere una lista degli ultimi comandi eseguiti digitare il comando
 
\emph on
history()
\emph default
.
 Il numero massimo di comandi tenuti a mente è 512 (questo parametro è tuttavia
 modificabile).
 Di default 
\emph on
history()
\emph default
 propone la lista degli ultimi 25 comandi.
 È possibile tramite l'argomento 
\emph on
max.show
\emph default
 aumentare o diminuire il numero di comandi mostrati: history(max.show=3).
\end_layout

\begin_layout Section
Strutture semplici e strutture di dati
\end_layout

\begin_layout Standard
Cominciamo utilizzando R come un'elementare macchina calcolatrice.
\end_layout

\begin_layout Subsubsection
Operatori matematici
\begin_inset CommandInset label
LatexCommand label
name "operatori matematici semplici"

\end_inset


\end_layout

\begin_layout Standard
Per quanto riguarda gli operatori matematici semplici quali la somma, la
 sottrazione, la moltiplicazione, la divisione e l'elevamento a potenza,
 R non si differenzia dagli altri linguaggi.
 
\begin_inset Formula \[
\begin{tabular}{ll}
 Somma  &  \ensuremath{+}\\
Sottrazione  &  \ensuremath{-}\\
Moltiplicazione  &  \ensuremath{\ast}\\
Divisione  &  \ensuremath{/}\\
Divisione intera  &  \ensuremath{\%/\%}\\
Elevamento a potenza  &  \ensuremath{\ast\ast}oppure\:\symbol{94}\end{tabular}\]

\end_inset


\end_layout

\begin_layout Standard
\noindent
Ad esempio
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> 5+7*3
\end_layout

\begin_layout Standard

\series bold
[1] 26
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Per modificare le priorità in una sequenza di operazioni si utilizzano le
 parentesi tonde:
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> (5+7)*3
\end_layout

\begin_layout Standard

\series bold
[1]
\begin_inset space \space{}
\end_inset

36
\end_layout

\begin_layout Standard
\noindent

\series bold
> 2*3
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
symbol{94}
\end_layout

\end_inset

2
\end_layout

\begin_layout Standard

\series bold
[1] 18
\end_layout

\begin_layout Standard
\noindent

\series bold
> (2*3)
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
symbol{94}
\end_layout

\end_inset

2
\end_layout

\begin_layout Standard

\series bold
[1] 36
\series default

\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Subsubsection
Assegnamenti
\end_layout

\begin_layout Standard
\noindent
In R si assegna alla variabile 
\begin_inset Formula $x$
\end_inset

 il valore 2 tramite l'operatore '
\begin_inset Formula $=$
\end_inset

' oppure '
\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{
\end_layout

\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout

}
\end_layout

\end_inset

<-':
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> x <- 2
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Per visualizzare il contenuto di 
\begin_inset Formula $x$
\end_inset

 basta eseguire
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> x
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
oppure
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> print(x)
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Per rimuovere la variabile 
\begin_inset Formula $x$
\end_inset

 si utilizza il comando remove: 'rm()' 
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> rm(x)
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Per visualizzare la lista degli oggetti in memoria (variabili, funzioni,
 ecc.) si usa il comando 'objects()':
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> objects()
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{remark}
\end_layout

\end_inset

 Un'assegnazione può essere effettuata anche da sinistra verso destra.
 In altre parole
\begin_inset VSpace medskip
\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{remark}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> 3 -> z
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
è un comando valido di R.
 Infatti
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> z
\end_layout

\begin_layout Standard

\series bold
[1] 3
\series default

\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Subsubsection
Successioni
\end_layout

\begin_layout Standard
\noindent
Spesso è necessario creare delle successioni di numeri.
 In R esiste il comando 
\emph on
seq (limite inferiore, limite superiore, incremento):
\emph default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> seq (1,5,1)
\end_layout

\begin_layout Standard

\series bold
[1] 1 2 3 4 5
\end_layout

\begin_layout Standard
\noindent

\series bold
> seq (1996, 2003,1)
\end_layout

\begin_layout Standard

\series bold
[1] 1996 1997 1998 1999 2000 2001 2002 2003
\end_layout

\begin_layout Standard
\noindent
> 
\series bold
seq (1, 0, -0.2)
\end_layout

\begin_layout Standard

\series bold
[1] 1.0 0.8 0.6 0.4 0.2 0.0
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Il limite inferiore così come l'incremento sono definiti per default uguali
 ad 1.
 Così avremo che
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> a <- seq(5)
\end_layout

\begin_layout Standard
\noindent

\series bold
> a
\end_layout

\begin_layout Standard

\series bold
[1] 1 2 3 4 5
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Quest'ultima operazione può essere svolta anche con l'operatore 
\begin_inset Quotes eld
\end_inset

due punti”:
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> b <- 1:5
\end_layout

\begin_layout Standard
\noindent

\series bold
> b
\end_layout

\begin_layout Standard

\series bold
[1] 1 2 3 4 5
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Sono pure ammesse oltre che molto utili espressioni del tipo
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
> 0:5/10
\end_layout

\begin_layout Standard
[1] 0.0 0.1 0.2 0.3 0.4 0.5
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Subsubsection
Concatenamento e copie multiple di elementi
\end_layout

\begin_layout Standard
\noindent
L'operatore 
\emph on
c() 
\emph default
serve a concatenare più elementi fra loro.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> nome.cognome <- c(”Claudio”,”Ortelli”)
\end_layout

\begin_layout Standard
\noindent

\series bold
> nome.cognome
\end_layout

\begin_layout Standard

\series bold
[1] 
\begin_inset Quotes erd
\end_inset

Claudio
\begin_inset Quotes erd
\end_inset

 
\begin_inset Quotes erd
\end_inset

Ortelli
\begin_inset Quotes erd
\end_inset


\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
L'oggetto creato è un vettore le cui componenti sono tutto del medesimo
 tipo (
\emph on
character
\emph default
 in questo caso).
 Se si tenta di concatenare oggetti di formato diverso la funzione 
\emph on
c()
\emph default
 trasformerà tutti i dati nel tipo più generale, nel prossimo esempio in
 formato stringa:
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> c(1,2.5,
\begin_inset Quotes erd
\end_inset

nome
\begin_inset Quotes erd
\end_inset

)
\end_layout

\begin_layout Standard

\series bold
[1] 
\begin_inset Quotes erd
\end_inset

1
\begin_inset Quotes erd
\end_inset

 
\begin_inset Quotes erd
\end_inset

2.5
\begin_inset Quotes erd
\end_inset

 
\begin_inset Quotes erd
\end_inset

nome
\begin_inset Quotes erd
\end_inset


\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Lavorare con vettori è utile in quanto è possibile sfruttare la capacità
 di R di effettuare determinate operazioni su ogni componente del vettore
 tramite un unico comando.
 Oltre ad un tempo d'esecuzione inferiore rispetto ad un ciclo 
\emph on
for
\emph default
 si ottiene anche una migliore leggibilità del codice.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> x <- c(2,3,-1)
\end_layout

\begin_layout Standard
\noindent

\series bold
> x
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
symbol{94}
\end_layout

\end_inset

2
\end_layout

\begin_layout Standard

\series bold
[1] 4 9 1
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Tramite la funzione 
\emph on
rep (oggetto, numero ripetizioni) 
\emph default
è possibile copiare un oggetto un certo numero di volte.
 Per esempio
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
> 
\series bold
rep(1,5)
\end_layout

\begin_layout Standard

\series bold
[1] 1 1 1 1 1
\end_layout

\begin_layout Standard
\noindent

\series bold
> rep(x,2)
\end_layout

\begin_layout Standard

\series bold
[1] 2 3 -1 2 3 -1
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
'numero ripetizioni' può essere un vettore contenente numeri interi non
 negativi.
 In tal caso anche 'oggetto' deve essere un vettore della medesima lunghezza.
 Il risultato sarà un vettore dove ogni componente del vettore 'oggetto'
 è ripetuta tante volte quanto è indicato alla posizione corrispondente
 del vettore 'numero ripetizioni'.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> x
\end_layout

\begin_layout Standard

\series bold
[1] 2 3 -1
\end_layout

\begin_layout Standard
\noindent

\series bold
> rep(x,c(3,2,1))
\end_layout

\begin_layout Standard

\series bold
[1] 2 2 2 3 3 -1
\series default

\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Subsubsection
Operazioni matematiche
\end_layout

\begin_layout Standard
Abbiamo visto le operazioni matematiche su scalari al punto (
\begin_inset CommandInset ref
LatexCommand ref
reference "operatori matematici semplici"

\end_inset

).
 Cosa accade se applichiamo tali aperazioni fra due vettori numerici? La
 risposta è semplice: gli operatori aritmetici agiscono su vettori componente
 per componente.
 La prossima tabella mostra tale proprietà.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
> b <- 1:4
\end_layout

\begin_layout Standard
\noindent
> a <- 2*(0:3)
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="7">
<features>
<column alignment="left" valignment="top" width="0">
<column alignment="left" valignment="top" width="0">
<column alignment="left" valignment="top" width="0">
<column alignment="left" valignment="top" width="0">
<column alignment="left" valignment="top" width="0">
<column alignment="left" valignment="top" width="0">
<column alignment="left" valignment="top" width="0">
<row>
<cell alignment="left" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
a 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
b 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
a+b 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
a-b 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
a*b 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
a/b 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
a
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
symbol{94}
\end_layout

\end_inset

b 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
-1 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
2 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
2 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
4 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
4 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
4 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
4 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
3 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
7 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
12 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1.33 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
64 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
6 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
4 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
10 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
2 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
24 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1.5 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1296 
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\begin_inset VSpace medskip
\end_inset

 
\end_layout

\begin_layout Standard
\noindent
È quindi possibile scrivere formule anche relativamente complesse.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> z <- (a
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
symbol{94}
\end_layout

\end_inset

2 - b
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
symbol{%
\end_layout

\begin_layout Plain Layout

94}
\end_layout

\end_inset

2)
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
symbol{94}
\end_layout

\end_inset

2 / (a
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
symbol{94}
\end_layout

\end_inset

2 + b
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
symbol{94}
\end_layout

\end_inset

2)
\end_layout

\begin_layout Standard
\noindent

\series bold
> z
\end_layout

\begin_layout Standard
[1] 1.000000 0.000000 1.960000 7.692308
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Subsubsection
Tipi di parentesi e loro significato
\end_layout

\begin_layout Standard
\noindent
R possiede tre tipi di parentesi: parentesi tonde, quadre e graffe.
 Le parentesi tonde servono a definire l'ordine nel quale le operazioni
 matematiche vanno eseguite.
 Le parentesi quadre invece servono a definire le componenti di un vettore
 o di una matrice sulle quali vogliamo operare (vedremo più tardi come definire
 una matrice in R).
 Infine, le parentesi graffe servono a delimitare blocchi di codice come
 ad esempio in caso di istruzioni if { ...} else { ...}.
\end_layout

\begin_layout Standard
\noindent
Definiamo ora un vettore qualsiasi di 3 componenti, per esempio
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> x <- 1:3*10
\end_layout

\begin_layout Standard
\noindent

\series bold
> x
\end_layout

\begin_layout Standard

\series bold
[1] 10 20 30
\end_layout

\begin_layout Standard
\noindent

\series bold
> x[1]
\begin_inset space \qquad{}
\end_inset


\begin_inset space \qquad{}
\end_inset

#accesso al primo elemento
\end_layout

\begin_layout Standard

\series bold
[1] 10
\end_layout

\begin_layout Standard
\noindent

\series bold
> x[2]
\begin_inset space \qquad{}
\end_inset


\begin_inset space \qquad{}
\end_inset

#accesso al secondo elemento
\end_layout

\begin_layout Standard

\series bold
[1] 20
\end_layout

\begin_layout Standard
\noindent

\series bold
> x[3]
\begin_inset space \qquad{}
\end_inset


\begin_inset space \qquad{}
\end_inset

#accesso al terzo elemento
\end_layout

\begin_layout Standard

\series bold
[1] 30
\end_layout

\begin_layout Standard
\noindent

\series bold
> x[4]
\begin_inset space \qquad{}
\end_inset


\begin_inset space \qquad{}
\end_inset

#accesso al quarto elemento
\end_layout

\begin_layout Standard

\series bold
[1] NA
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Il termine 
\series bold
NA
\series default
 significa 
\begin_inset Quotes eld
\end_inset

not available”.
 È possibile dare un vettore di interi quale argomento all'interno delle
 parentesi quadre:
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> x[rep(1,5)]
\end_layout

\begin_layout Standard
[1] 10 10 10 10 10
\end_layout

\begin_layout Standard
\noindent

\series bold
> x[c(1,3)]
\end_layout

\begin_layout Standard
[1] 10 30
\end_layout

\begin_layout Standard
\noindent
Indici negativi significano 
\begin_inset Quotes eld
\end_inset

non voglio”, cioè
\end_layout

\begin_layout Standard
\noindent

\series bold
> x[-1]
\begin_inset space \qquad{}
\end_inset


\begin_inset space \qquad{}
\end_inset

#non voglio il primo elemento
\end_layout

\begin_layout Standard

\series bold
[1] 20 30
\end_layout

\begin_layout Standard
\noindent

\series bold
> x[-c(1,3)]
\begin_inset space \qquad{}
\end_inset

#non voglio il primo & il terzo elemento
\end_layout

\begin_layout Standard
[1] 20
\end_layout

\begin_layout Standard
\noindent
Tuttavia non è possibile mischiare indici positivi e negativi: 
\series bold
x[c(-1,3)]
\series default
 non funziona.
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Subsubsection
Operatori logici
\end_layout

\begin_layout Standard
Le variabili logiche sono variabili binarie, cioè assumono solo due valori
 vero (1 o TRUE) e falso (0 o FALSE).
 In R si definisce una variabile logica assegnandole il valore TRUE o FALSE,
 esattamente come si usa fare con una qualsiasi altra variabile numerica
 o di tipo stringa.
 Spesso le variabili logiche sono il risultato di un operatore logico quale
 ad esempio 
\begin_inset Quotes eld
\end_inset

>=”, 
\begin_inset Quotes eld
\end_inset

<”:
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> 5 >=4
\end_layout

\begin_layout Standard

\series bold
[1] TRUE
\end_layout

\begin_layout Standard
\begin_inset VSpace medskip
\end_inset

 In R troviamo i seguenti operatori logici:
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="7" columns="2">
<features>
<column alignment="left" valignment="top" width="0">
<column alignment="left" valignment="top" width="0">
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Operatore 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Funzione 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
< 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
minore a 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
> 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
maggiore a 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
<= 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
minore o uguale a 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
>= 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
maggiore o uguale a 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
== 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
uguale a 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
!= 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
diverso da
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\begin_inset VSpace medskip
\end_inset

 
\end_layout

\begin_layout Standard
\noindent

\series bold
> 5!=1
\end_layout

\begin_layout Standard

\series bold
[1] TRUE
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Così come gli operatori matematici, anche gli operatori logici operano component
e per componente quando vengono applicati a vettori o matrici.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> x <- 1:3
\end_layout

\begin_layout Standard
\noindent

\series bold
> x < 3
\end_layout

\begin_layout Standard

\series bold
[1] TRUE TRUE FALSE
\end_layout

\begin_layout Standard
\noindent

\series bold
> y <- 3:1
\end_layout

\begin_layout Standard
\noindent

\series bold
> y
\end_layout

\begin_layout Standard

\series bold
[1] 3 2 1
\end_layout

\begin_layout Standard
\noindent

\series bold
> x<y
\end_layout

\begin_layout Standard

\series bold
[1] TRUE FALSE FALSE
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Una caratteristica molto utile degli operatori logici applicati a vettori
 consiste nel fatto che è possibile contare il numero di componenti che
 soddisfano una certa condizione.
 Per esempio, supponiamo di voler sapere quali componenti del vettore 1:10
 sono maggiori o uguali a 7.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> 1:10 >= 7
\end_layout

\begin_layout Standard

\series bold
[1] FALSE FALSE FALSE FALSE FALSE FALSE TRUE TRUE TRUE TRUE
\end_layout

\begin_layout Standard
\noindent

\series bold
> sum(1:10 >= 7)
\end_layout

\begin_layout Standard

\series bold
[1] 4
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
La funzione 
\emph on
sum()
\emph default
 ha tramutato FALSE
\begin_inset space \space{}
\end_inset

in 0 e TRUE
\begin_inset space \space{}
\end_inset

in 1 e sommato tutte le componenti.
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Subsubsection
Estrazione di indici
\end_layout

\begin_layout Standard
I valori logici sono molto utilizzati per estrarre da strutture piu' complesse
 solo quelle parti che soddisfano determinate condizioni.
 Per esempio, supponiamo di avere osservazioni sull'altezza e sul peso di
 9 individui,
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> nome <- c(”Claudio”, ”Maria”, ”Marco”, ”Matteo”, ”Francesca”, ”Giovanni”,
 ”Marta”, ”Giorgio”, ”Alberto”)
\end_layout

\begin_layout Standard
\noindent

\series bold
> altezza <- 140:148
\end_layout

\begin_layout Standard
\noindent

\series bold
> peso <- c(seq(50, 64, 2),59)
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Quali sono gli individui che hanno un peso superiore a 60 Kg? Per rispondere
 a questa domanda è sufficiente eseguire il comando
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
> 
\series bold
nome[peso>60]
\end_layout

\begin_layout Standard

\series bold
[1] 
\begin_inset Quotes erd
\end_inset

Marta
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes erd
\end_inset

Giorgio
\begin_inset Quotes erd
\end_inset


\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
E quanto sono alti?
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> altezza[peso>60]
\end_layout

\begin_layout Standard

\series bold
[1] 146 147
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
È possibile specificare più condizioni, legandole fra loro tramite gli operatori
 & (”logical and”), 
\begin_inset Formula $|$
\end_inset

 (”logical or”).
 Ad esempio
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> nome[peso>60 & peso != 64]
\end_layout

\begin_layout Standard

\series bold
[1] 
\begin_inset Quotes erd
\end_inset

Marta
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Subsection
Strutture di dati
\end_layout

\begin_layout Standard
Nel precedente paragrafo abbiamo visto come costruire una struttura 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

vettore
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

 partendo da semplici variabili scalari (tramite la funzione di concatenamento
 
\series bold
c()
\series default
).
 Come ben sapete dai vari corsi di statistica, matematica ed econometria,
 in molte circostanze è indispensabile generalizzare il concetto di vettore
 a strutture multidimensionali (chiamate generalmente arrays) di cui le
 matrici sono l'esempio più noto.
 Conosceremo ora le strutture multidimensionali contenute in R.
\end_layout

\begin_layout Subsubsection
Data Frames
\end_layout

\begin_layout Standard
I data frames sono delle tabelle in cui è consentito inserire colonne di
 formato (tipo) diverso fra loro.
 Il comando per generare un data frame è il seguente: 
\begin_inset Formula \[
data.frame\ (Elemento1,\ Elemento2,\ ...)\]

\end_inset

 Tutti gli argomenti che vengono elencati in data.frame 
\emph on
devono
\emph default
 avere il medesimo numero di righe.
 Tornando all'esempio precedente dei nove individui:
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> tabella <- data.frame(nome,altezza,peso)
\end_layout

\begin_layout Standard
\noindent

\series bold
> tabella
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="10" columns="4">
<features>
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
nome
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
altezza
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
peso
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Claudio
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
141
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
50
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
2
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Maria
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
142
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
52
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
3
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Marco
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
143
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
54
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
4
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Matteo
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
144
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
56
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
5
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Francesca
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
145
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
58
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
6
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Giovanni
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
146
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
60
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
7
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Marta
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
147
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
62
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
8
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Giorgio
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
148
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
64
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
9
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Alberto
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
149
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
59
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset VSpace medskip
\end_inset

 Un esempio importante per la creazione di un data.frame è costituito dall'import
azione di dati da una tabella in formato csv.
 Il comando da utililzzare è 
\series bold
read.table 
\series default
(si veda la documentazione per la descrizione dettagliata digitando 
\begin_inset Quotes eld
\end_inset

help(read.table)”:
\end_layout

\begin_layout Standard
\noindent

\series bold
> dati <- read.table(”//usi/dfs/istituti/Documents/ortellic/
\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
nopagebreak
\end_layout

\end_inset


\series bold
My Documents/R/daticorso.csv”,header=TRUE,sep=”;”,
\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
nopagebreak
\end_layout

\end_inset


\series bold
colClasses=c(”character”,rep(”numeric”,6)))
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Il primo argomento indica il nome del file da aprire.
 Si noti che mentre Windows utilizza il carattere 
\series bold

\begin_inset Quotes eld
\end_inset


\series default

\begin_inset Newline newline
\end_inset

textbf
\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{
\end_layout

\end_inset

”
\begin_inset ERT
status collapsed

\begin_layout Plain Layout

}
\end_layout

\end_inset

 per separare nomi di cartelle, R utilizza lo standard unix e cioè il carattere
 
\series bold

\begin_inset Quotes eld
\end_inset


\series default
/
\series bold
”
\series default
.
 Quando il file da importare si trova nell'attuale cartella di lavoro (cioè
 la cartella indicata nel campo 
\series bold

\begin_inset Quotes eld
\end_inset


\series default
start in
\series bold
”
\series default
 dell'icona con cui avviate il programma), è sufficiente indicare il nome
 del file.
 Avremmo dunque potuto anche scrivere
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> dati <- read.table(
\begin_inset Quotes erd
\end_inset

daticorso.csv
\begin_inset Quotes erd
\end_inset

, header=TRUE, sep=
\begin_inset Quotes erd
\end_inset

;
\begin_inset Quotes erd
\end_inset

, 
\end_layout

\begin_layout Standard

\series bold
colClasses=c(
\begin_inset Quotes erd
\end_inset

character
\begin_inset Quotes erd
\end_inset

,rep(
\begin_inset Quotes erd
\end_inset

numeric
\begin_inset Quotes erd
\end_inset

,6)))
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Il secondo argomento indica se la prima riga di dati contiene le intestazioni
 delle colonne.
 Il parametro 
\series bold
sep 
\series default
determina il carattere utilizzato per separare il contenuto delle colonne.
 L'ultimo argomento, 
\series bold
colCasses
\series default
, determina il tipo di dato contenuto in ciascuna colonna (logical, integer,
 real, complex e character sono i tipi di vettori (colonne) che si possono
 importare in un data frame).
\end_layout

\begin_layout Standard
\noindent
Prima di eseguire l'importazione è bene dare un'occhiata al file contenente
 i dati.
 Aprite dunque il file con un semplice elaboratore di testo (Notepad) e
 verificate che il carattere di separazione sia la virgola, il punto e virgola
 o qualche altro carattere particolare.
 Modificate il comando di conseguenza (
\series bold
sep=
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

*
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset


\series default
).
\end_layout

\begin_layout Standard
\begin_inset VSpace medskip
\end_inset

 Per accedere a dati contenuti in un data frame si usano le parentesi quadre.
 Al loro interno vanno indicati i numeri delle righe e delle colonne che
 si vogliono estrarre.
 Se si desiderano tutte le righe o tutte le colonne di un data frame è sufficien
te lasciare vuoto l'indice corrispondete.
 Per esempio
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> dati[1,]
\end_layout

\begin_layout Standard

\series bold
\begin_inset space \space{}
\end_inset


\series default

\begin_inset Tabular
<lyxtabular version="3" rows="2" columns="8">
<features>
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
date 
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
SP100 
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
MIB30 
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
DAX 
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
SMI 
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
EUR 
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
CHF 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1 
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1/1/1999 
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
604.03 
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
35152 
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
5002.39 
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
7160.7 
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
0.8516 
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1.413
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Per vedere la prima, la terza e l'ultima riga delle prime 3 colonne del
 data frame 
\begin_inset Quotes eld
\end_inset

dati”
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> dati[c(1,3,1141)
\series default
,
\series bold
1:3
\series default
]
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="4">
<features>
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
date
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
SP100
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
MIB30
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1/1/1999
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
604.03
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
35152
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
3
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1/5/1999
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
615.38
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
37807
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1141
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
5/16/2003
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
475.72
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
24740
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Così come con i vettori è possibile utilizzare indici negativi sia per le
 righe che per le colonne di un data frame.
 Ricordo che non è possibile avere indici di segno opposto per indicare
 rispettivamente escludere righe o colonne.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> dati[c(1,3,1141),-(2:5)]
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="4">
<features>
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
date
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
EUR
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
CHF
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1/1/1999
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
0.8516
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1.4130
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
3
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1/5/1999
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
0.8486
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1.3697
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1141
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
5/16/2003
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
0.8665
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1.3250
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset VSpace medskip
\end_inset

 Diamo alcuni comandi molto utili per lavorare con oggetti di tipo data
 frame.
 
\end_layout

\begin_layout Enumerate
Dimensioni di un data frame:
\end_layout

\begin_deeper
\begin_layout Standard
Il comando 
\series bold
dim 
\series default
restituisce un vettore contenente il numero di righe e di colonne del data
 frame.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard

\series bold
> dim(dati)
\end_layout

\begin_layout Standard
\begin_inset space \qquad{}
\end_inset


\series bold
[1] 1141 7
\end_layout

\end_deeper
\begin_layout Enumerate
Aggiungere una colonna ad un data frame
\end_layout

\begin_deeper
\begin_layout Standard
Per aggiungere una colonna utilizzare il comando 
\series bold
cbind()
\series default
:
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard

\series bold
> #genera 5 numeri aleatori normali di media 0 e deviazione standard 1
\end_layout

\begin_layout Standard
> 
\series bold
caso <- rnorm(5)
\end_layout

\begin_layout Standard

\series bold
dati.test <- cbind(dati[1:5,1:3], caso)
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
Da notare che R assegna quale nome della nuova colonna il nome della variabile
 utilizzata e cioè 
\series bold
caso
\series default
.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard

\series bold
> dati.test
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="6" columns="5">
<features>
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
date
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
SP100
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
MIB30
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
caso
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1/1/1999
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
604.03
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
35152
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
0.26866637
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
2
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1/4/1999
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
604.93
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
37417
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
-0.03481095
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
3
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1/5/1999
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
615.38
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
37807
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
-0.50321912
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
4
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1/6/1999
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
631.00
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
37807
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
-0.37532667
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
5
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1/7/1999
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
632.76
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
37797
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
0.07938619
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
Per modificare il nome delle colonne di un data frame utilizzare il comando
 
\series bold
names()
\series default
:
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_deeper
\begin_layout Standard

\series bold
> names(dati.test) <- c(”Data”,”S&P100”,”MIB”,”Simulazione”)
\end_layout

\begin_layout Standard
Il risultato del comando names è un vettore.
 Quindi se volessimo modificare solo alcuni dei nomi dovremmo utilizzare
 le parentesi quadre:
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard

\series bold
> names(dati.test) [c(2,4)] <- c(”S&P”,”Sim”)
\end_layout

\end_deeper
\begin_layout Enumerate
Per modificare il nome delle righe di un data frame utilizzare il comando
 
\series bold
row.names()
\series default
:
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_deeper
\begin_layout Standard

\series bold
> row.names(dati.test)
\begin_inset space \space{}
\end_inset

[1:3] <- c(”uno”,”due”,”tre”)
\end_layout

\begin_layout Standard

\series bold
> dati.test
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="6" columns="5">
<features>
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Data
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
S&P
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
MIB
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Sim
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
uno
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1/1/1999
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
604.03
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
35152
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
0.26866637
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
due
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1/4/1999
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
604.93
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
37417
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
-0.03481095
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
tre
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1/5/1999
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
615.38
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
37807
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
-0.50321912
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
4
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1/6/1999
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
631.00
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
37807
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
-0.37532667
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
5
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1/7/1999
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
632.76
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
37797
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
0.07938619
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\begin_inset VSpace bigskip
\end_inset


\end_layout

\end_deeper
\begin_layout Standard
\noindent
Per accedere ai dati di un data frame è pure possibile scrivere i nomi delle
 colonne/righe
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> dati.test[”uno”,”MIB”]
\end_layout

\begin_layout Standard

\series bold
[1] 35152
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
mentre per accedere ai dati di un'intera colonna, oltre al comando 
\series bold
dati.test[,”MIB”], 
\series default
è consentita la sintassi
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> dati.test$MIB
\end_layout

\begin_layout Standard

\series bold
[1] 35152 37417 37807 37807 37797
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Il comando attach() permette di utilizzare direttamente i nomi delle colonne
 di un data frame senza doverne anteporre il nome.
 Ciò significa che dopo l'esecuzione del comando
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> attach(dati.test)
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
anziché scrivere 
\series bold
dati.test$MIB
\series default
 sarà consentito scrivere solo
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> MIB
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Data frames diversi possono contenere colonne (variabili) con nomi identici.
 Nel caso che due o più data frames contenenti variabili col medesimo nome
 siano stati richiamati col comando 
\series bold
attach()
\series default
, R andrà a prendere i dati dall'ultimo data frame richiamato.
 Ad ogni modo esiste il comando 
\series bold
detach('nome') 
\series default
che elimina il data frame 'nome' dalla lista.
\end_layout

\begin_layout Subsubsection
Matrici ed arrays
\end_layout

\begin_layout Standard
Le matrici sono degli arrays a due dimensioni.
 Gli elementi di una matrice sono indicati tramite due indici, l'indice
 riga e l'indice colonna.
 In R un array può avere fino ad 8 dimensioni.
 Come i vettori anche le matrici (e più in generale gli arrays dunque) devono
 essere omogenee rispetto al formato dei dati.
 Per intenderci, non è possibile che una matrice contenga una colonna di
 stringhe ed una colonna di numeri interi.
 Per creare una matrice si usa il comando 
\emph on
matrix()
\emph default
.
 
\begin_inset Formula \[
matrix(data=NA,nrow=1,ncol=1,byrow=FALSE)\]

\end_inset

 Per default la matrice è riempita per colonne.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> matrix(1:6,nrow=3)
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="3">
<features>
<column alignment="left" valignment="top" width="0">
<column alignment="left" valignment="top" width="0">
<column alignment="left" valignment="top" width="0">
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[,1]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[,2]
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[1,]
\series default
 
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="none" valignment="top" usebox="none" special="r">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="none" valignment="top" usebox="none" special="r">
\begin_inset Text

\begin_layout Plain Layout

\series bold
4
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[2,]
\series default
 
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="none" valignment="top" usebox="none" special="r">
\begin_inset Text

\begin_layout Plain Layout

\series bold
2
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="none" valignment="top" usebox="none" special="r">
\begin_inset Text

\begin_layout Plain Layout

\series bold
5
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[3,]
\series default
 
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="none" valignment="top" usebox="none" special="r">
\begin_inset Text

\begin_layout Plain Layout

\series bold
3
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="none" valignment="top" usebox="none" special="r">
\begin_inset Text

\begin_layout Plain Layout

\series bold
6
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Se viene indicato il numero delle righe ma non quello delle colonne, R aggiunge
 tante colonne quante sono necessarie ad esaurire i dati che gli sono stati
 passati.
 È bene prestare molta attenzione quando si costruisce una matrice.
 Quando il numero di dati non corrisponde al numero di elementi della matrice,
 R ci avverte con un messaggio.
 Quando il numero di elementi della matrice è inferiore al numero di dati,
 R
\begin_inset space \space{}
\end_inset

utilizza solo una parte di essi.
 Nel caso contrario R riutilizza i dati più volte fino al completamento
 della matrice.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> matrix(1:2,nrow=3,ncol=4)
\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
nopagebreak
\end_layout

\end_inset


\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="5">
<features>
<column alignment="left" valignment="top" width="0">
<column alignment="left" valignment="top" width="0">
<column alignment="left" valignment="top" width="0">
<column alignment="left" valignment="top" width="0">
<column alignment="left" valignment="top" width="0">
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[,1]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[,2]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[,3]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[,4]
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[1,]
\series default
 
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="none" valignment="top" usebox="none" special="r">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="none" valignment="top" usebox="none" special="r">
\begin_inset Text

\begin_layout Plain Layout

\series bold
2
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="none" valignment="top" usebox="none" special="r">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="none" valignment="top" usebox="none" special="r">
\begin_inset Text

\begin_layout Plain Layout

\series bold
2
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[2,]
\series default
 
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="none" valignment="top" usebox="none" special="r">
\begin_inset Text

\begin_layout Plain Layout

\series bold
2
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="none" valignment="top" usebox="none" special="r">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="none" valignment="top" usebox="none" special="r">
\begin_inset Text

\begin_layout Plain Layout

\series bold
2
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="none" valignment="top" usebox="none" special="r">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[3,]
\series default
 
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="none" valignment="top" usebox="none" special="r">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="none" valignment="top" usebox="none" special="r">
\begin_inset Text

\begin_layout Plain Layout

\series bold
2
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="none" valignment="top" usebox="none" special="r">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1
\end_layout

\end_inset
</cell>
<cell multicolumn="1" alignment="none" valignment="top" usebox="none" special="r">
\begin_inset Text

\begin_layout Plain Layout

\series bold
2
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Il comando 
\series bold
as.matrix()
\series default
 tenta di convertire in matrice l'argomento che gli viene dato.
 Un'immediata applicazione è la conversione della parte numerica del data
 frame 'dati' in matrice
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Il comando as.data.frame(serie) converte la matrice 'serie' in un oggetto
 di classe data frame mantenendone le dimensioni ed il tipo.
\end_layout

\end_inset

:
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> serie <- as.matrix(dati[,2:7])
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
Per default as.matrix mantiene i nomi delle colonne e delle righe.
 Come per un data frame anche per una matrice è possibile assegnare o modificare
 i nomi delle righe/colonne.
 Il comando è tuttavia leggermente diverso.
 Ecco un esempio:
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> dim(serie)
\end_layout

\begin_layout Standard

\series bold
[1] 1141 6
\end_layout

\begin_layout Standard
\noindent

\series bold
> indice.riga <- paste(”riga”,1:1141,sep=””)
\end_layout

\begin_layout Standard
\noindent

\series bold
> dimnames(serie)[[1]] <- indice.riga
\end_layout

\begin_layout Standard
\noindent

\series bold
> serie[1:3,1:2]
\end_layout

\begin_layout Standard
\noindent
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="3">
<features>
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
SP100
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
MIB30
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
riga1
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
604.03
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
35152
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
riga2
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
604.93
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
37417
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
riga3
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
615.38
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
37807
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Come per i data frames è possibile utilizzare i nomi al posto dei numeri
 di riga/colonna
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> serie[”riga14”,]
\end_layout

\begin_layout Standard
\noindent
\begin_inset Tabular
<lyxtabular version="3" rows="2" columns="6">
<features>
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
SP100
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
MIB30
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
DAX
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
SMI
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
EUR
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
CHF
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
626.0100
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
35382.0000
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
5143.0600
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
7300.2000
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
0.8642
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1.3887
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Subsubsection
Calcolo matriciale
\end_layout

\begin_layout Standard
Il grosso vantaggio nell'aver trasformato il data frame 'dati' nella matrice
 'serie' consiste nel fatto di poter utilizzare il calcolo matriciale.
 Gli operatori 
\series bold
+
\series default
, 
\series bold
-
\series default
, 
\series bold
*
\series default
, 
\series bold
/
\series default
 e 
\series bold

\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
symbol{94%
\end_layout

\begin_layout Plain Layout

}
\end_layout

\end_inset


\series default
operano componente per componente quando utilizzati con matrici.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> A <- matrix(1:4, nrow=2,ncol=2)
\end_layout

\begin_layout Standard
\noindent

\series bold
> B <- matrix(4, nrow=2,ncol=2)
\end_layout

\begin_layout Standard
\noindent

\series bold
> A-B
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="3">
<features>
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[,1]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[,2]
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[1,]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
-3
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
-1
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[2,]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
-2
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
0
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Quando applichiamo una funzione matematica ad una matrice, ad esempio la
 funzione esponenziale 
\series bold
exp() 
\series default
o la sua inversa 
\series bold
log()
\series default
, è come se applicassimo la funzione
\begin_inset space \space{}
\end_inset

ad ogni componente della matrice:
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard

\series bold
> exp(matrix(c(1,0,0,1),nrow=2))
\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
nopagebreak
\end_layout

\end_inset


\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="3">
<features>
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[,1]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[,2]
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[1,]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
2.718282
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1.000000
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[2,]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1.000000
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
2.718282
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
La moltiplicazione matriciale vera e propria è definita tramite l'operatore
 
\series bold
%*%
\series default
, mentre per matrici quadrate non singolari l'inversione è data dalla funzione
 
\series bold
solve()
\series default
:
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> solve (A-B)
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="3">
<features>
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[,1]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[,2]
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[1,]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
0
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
-0.5
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[2,]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
-1
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1.5
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> solve(A-B) %*% (A-B)
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="3">
<features>
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[,1]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[,2]
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[1,]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
0
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[2,]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
0
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{remark}
\end_layout

\end_inset

 La funzione 
\series bold
solve() 
\series default
permette di risolvere sistemi lineari del tipo 
\begin_inset Formula $A\ x=b$
\end_inset

.
 Per motivi di carattere numerico si raccomanda di utilizzare la funzione
 
\begin_inset Formula $\mathbf{solve(A,b)}$
\end_inset

 anziché 
\begin_inset Formula $solve(A)~\%\ast\%~b$
\end_inset

 per il calcolo di espressioni quali 
\begin_inset Formula $A^{-1}b$
\end_inset

.
\begin_inset VSpace medskip
\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{remark}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\noindent
Tra le molte funzioni matriciali ecco alcune di particolare importanza:
 
\end_layout

\begin_layout Itemize

\series bold
t(A)
\series default
: ritorna la trasposta di A.
 
\end_layout

\begin_layout Itemize

\series bold
det(A)
\series default
: calcola il determinante di A.
 
\end_layout

\begin_layout Itemize

\series bold
eigen (A)
\series default
: ritorna una variabile di tipo 'list' contenente il vettore degli autovalori
 e la matrice degli autovettori di A.
 (Rimandiamo al punto 
\begin_inset CommandInset ref
LatexCommand ref
reference "liste"

\end_inset

 per la spiegazione delle variabili di classe 'list').
 
\end_layout

\begin_layout Itemize

\series bold
diag (A)
\series default
: se A è una matrice ritorna gli elementi della diagonale principale di
 A, se A è un vettore ritorna una matrice diagonale dove gli elementi della
 diagonale principale sono le componenti del vettore A.
 
\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{domanda}
\end_layout

\end_inset

 Come fareste a calcolare la traccia di una matrice? 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{domanda}
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Concatenamento di matrici
\end_layout

\begin_layout Standard
\noindent
Capita spesso di dover aggiungere righe e/o colonne ad una matrice.
 I comandi 
\series bold
rbind()
\series default
 e 
\series bold
cbind()
\series default
 servono a tal fine.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> A
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="3">
<features>
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[,1]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[,2]
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[1,]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
3
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[2,]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
2
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
4
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
>
\series default
 
\series bold
col3 <- c(5,6)
\end_layout

\begin_layout Standard
\noindent

\series bold
> cbind(A,col3)
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="4">
<features>
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[,1]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[,2]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
col3
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[1,]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
3
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
5
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[2,]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
2
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
4
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
6
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Subsubsection
La funzione apply()
\end_layout

\begin_layout Standard
La funzione 
\series bold
apply()
\series default
 permette di applicare una qualsiasi funzione (fra cui in particolare funzioni
 matematiche quali ad esempio 
\series bold
mean()
\series default
, 
\series bold
max()
\series default
 o 
\series bold
min())
\series default
 rispetto ad una delle 
\begin_inset Formula $k$
\end_inset

 dimensioni di un array 
\begin_inset Formula $k$
\end_inset

 dimensionale.
 Noi per semplicità abbiamo trattato solo matrici (
\begin_inset Formula $k=2)$
\end_inset

 ma l'uso di 
\series bold
apply()
\series default
 si estende ad un qualsiasi array multidimensionale.
 La sintassi è la seguente
\end_layout

\begin_layout Standard
\begin_inset Formula \[
apply(X,MARGIN,FUN)\]

\end_inset

 
\series bold
> A
\end_layout

\begin_layout Standard
\noindent
\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="3">
<features>
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[,1]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[,2]
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[1,]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
3
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[2,]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
2
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
4
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> apply(A,1,sum) 
\series default
# applica la funzione 
\series bold
sum
\series default
 alle righe di A
\end_layout

\begin_layout Standard

\series bold
[1] 4 6
\end_layout

\begin_layout Standard
\noindent

\series bold
> apply(A,2,mean)
\end_layout

\begin_layout Standard

\series bold
[1] 1.5 3.5
\end_layout

\begin_layout Subsubsection
Calcolo di returns e di log returns
\end_layout

\begin_layout Standard
Ora che abbiamo i dati nella matrice serie possiamo calcolare agevolmente
 i returns,
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> returns <- (serie[2:1141,]-serie[1:1140,])/serie[1:1140,]
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
e i log returns
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> r <- log(serie[2:1141,]/serie[1:1140,])
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
oppure anche il comando (si veda
\series bold

\begin_inset space \space{}
\end_inset

help(diff)
\series default
)
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> r <- apply(log(serie[1:1141,]),2,diff)
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Spiegate il significato del seguente comando:
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> apply(r==0,2,sum)
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="2" columns="6">
<features>
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
SP100
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
MIB30
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
DAX
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
SMI
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
EUR
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
CHF
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
41
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
35
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
33
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
40
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
22
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
36
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Subsubsection
Liste
\begin_inset CommandInset label
LatexCommand label
name "liste"

\end_inset


\end_layout

\begin_layout Standard
Una lista è un vettore le cui componenti possono essere un qualsiasi oggetto
 di R.
 Le liste sono particolarmente utili per raggruppare in maniera ordinata
 scalari, vettori, matrici, arrays di formato e dimensione diversa.
 Una lista può contenere altre liste.
 La sintassi per creare una 
\begin_inset space \space{}
\end_inset

variabile di tipo lista è la seguente 
\begin_inset Formula \[
list\ (elemento1,~elemento2,~\ldots)\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{esempio}
\end_layout

\end_inset

 Costruzione di una lista.
\end_layout

\begin_layout Standard
\noindent

\series bold
> mia.lista <- list(matrix(1:6,nrow=2),c(”Nome”,”Cognome”), dati)
\end_layout

\begin_layout Standard
\noindent

\series bold
> is.list(mia.lista)
\end_layout

\begin_layout Standard
\noindent

\series bold
[1] TRUE
\series default

\begin_inset VSpace medskip
\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{esempio}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\noindent
La variabile 'mia.lista' contiene ora tre oggetti: il primo è una matrice
 
\begin_inset Formula $(2\times3)$
\end_inset

 di numeri interi, il secondo è un vettore di stringhe ed il terzo è un
 data frame.
 Per accedere ad uno o più elementi della lista è
\begin_inset space \space{}
\end_inset

necessario utilizzare le 
\series bold
doppie
\series default
 parentesi quadre:
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> mia.lista [[1]]
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="4">
<features>
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<column alignment="right" valignment="top" width="0">
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[,1]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[,2]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[,3]
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[1,]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
1
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
3
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
5
\series default
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
[2,]
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
2
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
4
\series default
 
\end_layout

\end_inset
</cell>
<cell alignment="right" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
6
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Per accedere direttamente ad elementi della matrice 
\series bold
mia.lista [[1]] 
\series default
è sufficiente aggiungere le parentesi quadre con i rispettivi indici desiderati
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> mia.lista [[1]][2,]
\end_layout

\begin_layout Standard

\series bold
[1] 2 4 6
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Se viene utilizzato il comando 
\begin_inset Formula \[
list\ (nome1=elemento1,~nome2=elemento2,~\ldots)\]

\end_inset


\end_layout

\begin_layout Standard
\noindent
è possibile riferirsi direttamente ai singoli elementi della lista utilizzando
 il loro nome (come nel caso dei data frames):
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> mia.lista <- list(A=matrix(1:6,nrow=2),b=c(”Nome”,”Cognome”), dati=dati)
\end_layout

\begin_layout Standard
\noindent

\series bold
> mia.lista$b
\end_layout

\begin_layout Standard

\series bold
[1] ”Nome”
\begin_inset space \space{}
\end_inset

”Cognome”
\end_layout

\begin_layout Standard
\noindent

\series bold
> mia.lista$A[2,]
\end_layout

\begin_layout Standard

\series bold
[1] 2 4 6
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Per sapere la lunghezza della lista (il numero di elementi) utilizzate il
 comando 
\series bold
length()
\series default
:
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> length(mia.lista)
\end_layout

\begin_layout Standard

\series bold
[1] 3
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Per aggiungere un nuovo elemento alla lista:
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
mia.lista[[5]] <- c(”Il”,”mio”,”nuovo”,”elemento”)
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Come avrete forse notato, non è obbligatorio utilizzare indici adiacenti.
 Ora però mia.lista ha un 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

buco
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> mia.lista[[4]]
\end_layout

\begin_layout Standard

\series bold
NULL
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
L'elemento in posizione 5 della lista non ha un nome.
 Un metodo alternativo per ampliare una lista è quello di utilizzare direttament
e il nome desiderato, cioè
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> mia.lista$ultimo <- ”Ultimo elemento”
\end_layout

\begin_layout Standard
\noindent

\series bold
> mia.lista$ultimo
\end_layout

\begin_layout Standard

\series bold
[1] 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

Ultimo elemento
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset


\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
la lista viene ampliata di un elemento (posizione 6)
\begin_inset space \space{}
\end_inset

ed è possibile accedere a quest'ultimo col suo nome.
\end_layout

\begin_layout Standard
\noindent
Per eliminare un elemento è sufficiente assegnare il valore 
\series bold
NULL
\series default
.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
> 
\series bold
mia.lista[[4]] <- NULL
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Quando si elimina un elemento da una lista, tutti gli elementi con indice
 superiore a quello eliminato vengono scalati di uno.
 Ciò significa che ora la lista mia.lista nella posizione 4 contiene ...
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> mia.lista[[4]]
\end_layout

\begin_layout Standard

\series bold
[1] ”Il” ”mio” ”nuovo”
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash

\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset

”elemento”
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Non è possibile utilizzare indici multipli con le liste.
 Un comando del tipo 
\series bold
mia.lista[[2:3]]
\series default
 non è accettato.
\end_layout

\begin_layout Standard
\begin_inset VSpace medskip
\end_inset

 Concludiamo questo paragrafo sulle liste dicendo che le liste sono utilizzate
 per raccogliere l'output di comandi complessi, si veda ad esempio il comando
 utilizzato per stimare modelli lineari (
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

?lm
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

).
\end_layout

\begin_layout Subsection
Grafici
\end_layout

\begin_layout Standard
\noindent
Come vedremo fra poco R è particolarmente adatto all'analisi grafica di
 dati.
 Inizialmente occorre un investimento per apprendre i principali comandi.
 Il comando principale è 
\series bold
plot()
\series default
.
 Ecco un esempio.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> #creazione di un vettore contenente i nomi delle serie
\end_layout

\begin_layout Standard
\noindent

\series bold
> nomi <- dimnames(r) [[2]]
\end_layout

\begin_layout Standard
\noindent

\series bold
> i <- 1
\end_layout

\begin_layout Standard
\noindent

\series bold
> #plot della prima serie di returns
\end_layout

\begin_layout Standard
\noindent

\series bold
> plot (r[,i], 
\end_layout

\begin_layout Standard

\series bold
type=”l”, 
\end_layout

\begin_layout Standard

\series bold
main= paste(”Log returns di”,nomi[i]), 
\end_layout

\begin_layout Standard

\series bold
sub=paste(”Media:”, 
\end_layout

\begin_layout Standard

\series bold
format(mean(r[,i]),digits=2)), 
\end_layout

\begin_layout Standard

\series bold
xlab=”Osservazione”, 
\end_layout

\begin_layout Standard

\series bold
ylab=nomi[i])
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Per avere un'idea di quanto due serie storiche possano essere correlate
 fra loro è utile fare un plot di una serie sull'altra.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> i <- 1; j <- 2
\end_layout

\begin_layout Standard
\noindent

\series bold
> plot
\begin_inset space \space{}
\end_inset

(r[,i],r[,j], 
\end_layout

\begin_layout Standard

\series bold
main = paste (nomi[i], ”vs”, nomi[j]), 
\end_layout

\begin_layout Standard

\series bold
xlab=nomi[i], 
\end_layout

\begin_layout Standard

\series bold
ylab=nomi[j], 
\end_layout

\begin_layout Standard

\series bold
col=”blue”)
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
help(par)
\series default
 indica tutte le opzioni disponibili.
\end_layout

\begin_layout Subsubsection
Inserimento di elementi grafici
\end_layout

\begin_layout Itemize
Il comando 
\series bold
abline(a=0,b=1) 
\series default
inserisce un linea retta di pendenza 
\series bold
b
\series default
 ed intercetta 
\series bold
a
\series default
 nella finestra grafica attiva 
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_deeper
\begin_layout Standard

\series bold
> abline(a=0,b=1)
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Per inserire una linea orizzontale lungo i punti 0.01, 0.02 e 0.03 utilizzare
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_deeper
\begin_layout Standard

\series bold
> abline(h=c(0.01,0.02,0.03))
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
mentre per linee verticali
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard

\series bold
abline(v=c(0.01,0.02,0.03))
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Per inserire una freccia utilizzare arrows(x1,y1,x2,y2) dove (x1,y1) sono
 le coordinate della coda e (x2,y2) quelle della punta della freccia.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_deeper
\begin_layout Standard

\series bold
> arrows(-0.06,0,-0.04,0.05)
\end_layout

\end_deeper
\begin_layout Itemize
Per inserire del testo utilizzare il comando 
\series bold
text(x,y,text)
\end_layout

\begin_deeper
\begin_layout Standard

\series bold
> arrows(-0.04,0.05,”Guarda che bel grafico”)
\end_layout

\end_deeper
\begin_layout Subsubsection
Altri tipi di grafici
\end_layout

\begin_layout Itemize
Il comando 
\series bold
pairs()
\series default
:
\begin_inset space \space{}
\end_inset

matrici di grafici
\end_layout

\begin_deeper
\begin_layout Standard
Il comando 
\series bold
pairs() 
\series default
genera una matrice.contenente i crossplot di tutte le coppie (x,y) di variabili
 (colonne) di una matrice di dati.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard

\series bold
> pairs(r[,1:4])
\end_layout

\end_deeper
\begin_layout Itemize
Istogramma
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_deeper
\begin_layout Standard

\series bold
> i <- 1
\end_layout

\begin_layout Standard

\series bold
> hist (r[,i],
\end_layout

\begin_layout Standard
\begin_inset space \qquad{}
\end_inset


\series bold
probability=TRUE,
\end_layout

\begin_layout Standard
\begin_inset space \qquad{}
\end_inset


\series bold
main=paste(”Istogramma di”,nomi[i]),
\end_layout

\begin_layout Standard
\begin_inset space \qquad{}
\end_inset


\series bold
xlab=nomi[i],
\end_layout

\begin_layout Standard
\begin_inset space \qquad{}
\end_inset


\series bold
breaks=17)
\end_layout

\end_deeper
\begin_layout Itemize
Q-Q plot rispetto alla normale
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_deeper
\begin_layout Standard

\series bold
> qqnorm(r[,i],main=paste(
\begin_inset Quotes erd
\end_inset

Normal Q-Q Plot per
\begin_inset Quotes erd
\end_inset

,nomi[i]),
\end_layout

\begin_layout Standard
\begin_inset space \qquad{}
\end_inset


\series bold
xlab=
\begin_inset Quotes erd
\end_inset

Quantili teorici
\begin_inset Quotes erd
\end_inset

,ylab=
\begin_inset Quotes erd
\end_inset

Quantili empirici
\begin_inset Quotes erd
\end_inset

)
\end_layout

\begin_layout Standard

\series bold
> qqline(r[,i])
\end_layout

\end_deeper
\begin_layout Itemize
Q-Q plot
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_deeper
\begin_layout Standard

\series bold
> i <- 1; j <- 2
\end_layout

\begin_layout Standard

\series bold
> qqplot(r[,i],r[,j],main=paste(
\begin_inset Quotes erd
\end_inset

Q-Q Plot fra
\begin_inset Quotes erd
\end_inset

,nomi[i],
\begin_inset Quotes erd
\end_inset

e
\begin_inset Quotes erd
\end_inset

,nomi[j]),
\end_layout

\begin_layout Standard
\begin_inset space \qquad{}
\end_inset


\series bold
xlab=nomi[i],ylab=nomi[j])
\end_layout

\end_deeper
\begin_layout Itemize
Il comando 
\series bold
acf()
\series default
 stima la funzione di autocovarianza o autocorrelazione e per default ne
 esegue il grafico 
\begin_inset space \space{}
\end_inset

Esempio:
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_deeper
\begin_layout Standard

\series bold
> acf(r[,i],lag.max=10,type=”correlation”,main=nomi[i])
\end_layout

\end_deeper
\begin_layout Itemize
Il comando 
\series bold
ccf()
\series default
 calcola ed esegue il grafico della cross-correlation, cross-covariance
 function.Esempio:
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_deeper
\begin_layout Standard

\series bold
> i <- 2
\end_layout

\begin_layout Standard

\series bold
> j <- 3
\end_layout

\begin_layout Standard

\series bold
> ccf(r[,i],r[,j],lag.max=10, type=”correlation”, main=
\end_layout

\begin_layout Standard
\begin_inset space \qquad{}
\end_inset


\series bold
paste(”Correlazione dei returns di ”,nomi[i],”e”,nomi[j],
\end_layout

\begin_layout Standard
\begin_inset space \qquad{}
\end_inset


\series bold
sep=” ”))
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\end_deeper
\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{domanda}
\end_layout

\end_inset

 Come interpretate quest'ultimo grafico? 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{domanda}
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Alcuni utili comandi grafici
\end_layout

\begin_layout Itemize
Il comando 
\series bold
windows()
\series default
 apre una nuova finestra grafica e la rende attiva.
 Ciò significa che il prossimo grafico sarà visualizzato nella finestra
 appena aperta.
 Quando ci sono più finestre grafiche aperte il comando 
\series bold
dev.set('#device')
\series default
 permette di scegliere quale deve essere la finestra in cui ridirigere l'output.
 
\series bold
'#device'
\series default
 indica il numero della finestra o più precisamente del device.
 Per ottenere il vettore contenente tutti i numeri di device aperti al momento
 utilizzare il comando 
\series bold
dev.list()
\series default
.
 Il comando 
\series bold
dev.cur()
\series default
 restituisce il numero del device attivo al momento ('
\emph on
cur'
\emph default
 da '
\emph on
current'
\emph default
) mentre 
\series bold
dev.off('#device')
\series default
 chiude il device specificato (per default chiude il device corrente).
 
\end_layout

\begin_layout Itemize
Il comando 
\series bold
par(mfcol=c(
\series default

\begin_inset Formula $nr,nc$
\end_inset


\series bold
)) 
\series default
e 
\series bold
par(mfrow=c(
\series default

\begin_inset Formula $nr,nc$
\end_inset


\series bold
))
\series default
 apre una finestra il cui contenuto sarà una matrice di 
\begin_inset Formula $nr\times nc$
\end_inset

 grafici.
 Se è utilizzato il primo (secondo) comando, la matrice verrà riempita per
 colonne (righe).
 
\end_layout

\begin_layout Itemize
Il comando 
\series bold
postscript(
\begin_inset Quotes erd
\end_inset

miofile.ps
\begin_inset Quotes erd
\end_inset

)
\series default
 apre come device un file testo di nome 
\begin_inset Quotes erd
\end_inset

miofile.ps
\begin_inset Quotes erd
\end_inset

.
 Esempio:
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_deeper
\begin_layout Standard

\series bold
> postscript(
\begin_inset Quotes erd
\end_inset

foo.ps
\begin_inset Quotes erd
\end_inset

,paper=
\begin_inset Quotes erd
\end_inset

a4
\begin_inset Quotes erd
\end_inset

,width=5,height=4,bg=
\begin_inset Quotes erd
\end_inset

yellow
\begin_inset Quotes erd
\end_inset

)
\end_layout

\begin_layout Standard

\series bold
> plot(r[,6],main=paste(”Log-returns di ”,nomi[6],sep=””), 
\end_layout

\begin_layout Standard
\begin_inset space \qquad{}
\end_inset


\series bold
type=”l”,xlab=”Osservazioni”,ylab=nomi[6])
\end_layout

\begin_layout Standard

\series bold
> dev.off()
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
Le dimensioni della larghezza e dell'altezza del grafico sono date in pollici
 (1 pollice = 2.54 centrimetri).
 È importante ricordarsi di chiudere il device una volta terminato!
\end_layout

\end_deeper
\begin_layout Itemize
I comandi 
\series bold
pdf()
\series default
, 
\series bold
bpm()
\series default
, 
\series bold
jpeg()
\series default
 e 
\series bold
png()
\series default
 sono simili al comando 
\series bold
postscipt()
\series default
 e servono a generare grafici nei rispettivi formati.
 
\end_layout

\begin_layout Subsection
Comandi if, for, while, repeat
\end_layout

\begin_layout Subsubsection
Il comando if
\end_layout

\begin_layout Standard
La sintassi del comando è la seguente
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\text{if (condizione) comando else comando}\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{esempio}
\end_layout

\end_inset

 Comando if semplice.
 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{esempio}
\end_layout

\end_inset


\end_layout

\begin_layout Standard

\series bold
> if (rnorm(1) > 0) print (
\begin_inset Quotes erd
\end_inset

Maggiore di 0
\begin_inset Quotes erd
\end_inset

) else print (
\begin_inset Quotes erd
\end_inset

Minore o uguale a 0
\begin_inset Quotes erd
\end_inset

)
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Se si desidera eseguire più comandi, è necessario racchiudere il codice
 fra parentesi graffe ”{ ...}”.
\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{esempio}
\end_layout

\end_inset

 Comando if.
 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{esempio}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> if (rnorm(1)>0) {
\end_layout

\begin_layout Standard

\series bold
plot (rnorm(10),main=
\begin_inset Quotes erd
\end_inset

Normale
\begin_inset Quotes erd
\end_inset

)
\end_layout

\begin_layout Standard

\series bold
print (
\begin_inset Quotes erd
\end_inset

Terminato
\begin_inset Quotes erd
\end_inset

)
\end_layout

\begin_layout Standard

\series bold
} else {
\end_layout

\begin_layout Standard

\series bold
plot (rt(10,df=6),main=
\begin_inset Quotes erd
\end_inset

t-6
\begin_inset Quotes erd
\end_inset

)
\end_layout

\begin_layout Standard

\series bold
print (
\begin_inset Quotes erd
\end_inset

Terminato
\begin_inset Quotes erd
\end_inset

)
\end_layout

\begin_layout Standard

\series bold
}
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{remark}
\end_layout

\end_inset

 Abbiamo visto in precedenza che se x ed y sono due vettori il comando x
 == y verifica l'uguaglianza componente per componente ed il risultato consiste
 in un vettore di TRUE/FALSE.
 Per tale motivo l'utilizzo di un'espressione del genere nel contesto dell'istru
zione 
\series bold
if
\series default
 può porre dei problemi se l'operatore binario 
\series bold
==
\series default
 non è utilizzato su scalari.
 R risolve il problema nella misura in cui considera solo la prima componente
 del vettore x==y.
 Per testare l'uguaglianza fra due oggetti (matrici, liste, vettori) si
 utilizza il comando 
\series bold
identical()
\series default
.
 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{remark}
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Il ciclo for
\end_layout

\begin_layout Standard
Capita sovente di eseguire più volte lo stesso comando o di dover applicare
 ripetutamente la stessa funzione ma con argomenti di valore diverso.
 La prima 
\begin_inset space \space{}
\end_inset

possibilità in situazioni del genere è quella di utilizzare il comando 
\series bold
for()
\series default
, la cui sintassi è
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\text{for (var in seq) comando}\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{esempio}
\end_layout

\end_inset

 Comando for.
\end_layout

\begin_layout Standard

\series bold
> for (nome in nomi) print (nome)
\series default

\begin_inset VSpace medskip
\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{esempio}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\noindent
Dall'esempio precedente vi sarete resi conto che è possibile eseguire un
 ciclo 
\series bold
for
\series default
 utilizzando un vettore numerico o non numerico quale fonte dei dati 
\begin_inset space \space{}
\end_inset

con cui eseguire il ciclo.
 In maniera simile al comando 
\series bold
if, 
\series default
se si desidera eseguire più comandi è necessario utilizzare le parentesi
 graffe.
\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{esempio}
\end_layout

\end_inset

 Comando for.
 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{esempio}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\noindent
> 
\series bold
for (indice in 1:10) {
\end_layout

\begin_layout Standard

\series bold
\begin_inset space \space{}
\end_inset

x <- rnorm(1000)
\end_layout

\begin_layout Standard

\series bold
\begin_inset space \space{}
\end_inset

if (exists(
\begin_inset Quotes erd
\end_inset

media
\begin_inset Quotes erd
\end_inset

)) {
\end_layout

\begin_layout Standard

\series bold
\begin_inset space \space{}
\end_inset


\begin_inset space \space{}
\end_inset


\begin_inset space \space{}
\end_inset


\begin_inset space \space{}
\end_inset

media <- c(media,mean(x))
\end_layout

\begin_layout Standard

\series bold
\begin_inset space \space{}
\end_inset

} else {
\end_layout

\begin_layout Standard

\series bold
\begin_inset space \space{}
\end_inset


\begin_inset space \space{}
\end_inset


\begin_inset space \space{}
\end_inset


\begin_inset space \space{}
\end_inset

media <- mean(x)
\end_layout

\begin_layout Standard

\series bold
\begin_inset space \space{}
\end_inset

}
\end_layout

\begin_layout Standard

\series bold
if (exists(”varianza”)) {
\end_layout

\begin_layout Standard

\series bold
\begin_inset space \space{}
\end_inset

varianza <- c(varianza,var(x))
\end_layout

\begin_layout Standard

\series bold
\begin_inset space \space{}
\end_inset

} else {
\end_layout

\begin_layout Standard

\series bold
\begin_inset space \space{}
\end_inset

varianza <- var(x)
\end_layout

\begin_layout Standard

\series bold
\begin_inset space \space{}
\end_inset

}
\end_layout

\begin_layout Standard
\noindent

\series bold
}
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
È possibile terminare anzitempo un ciclo for utilizzando il comando 
\series bold
break
\series default
:
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> for (i in 1:10) {
\end_layout

\begin_layout Standard

\series bold
if (i > 5) break
\end_layout

\begin_layout Standard

\series bold
print (i)
\end_layout

\begin_layout Standard
\noindent

\series bold
}
\end_layout

\begin_layout Subsubsection
Il ciclo while
\end_layout

\begin_layout Standard
Con un ciclo di tipo 
\series bold
for
\series default
 il numero di ripetizioni è determinato anzitempo.
 Con il comando 
\series bold
while()
\series default
 è invece possibile stabilire dinamicamente quante volte ripetere il ciclo:
 il ciclo viene ripetuto fin tanto che la condizione precisata fra parentesi
 tonde è vera.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> i <- 1
\end_layout

\begin_layout Standard
\noindent

\series bold
> while (i <= 5) {
\end_layout

\begin_layout Standard

\series bold
print (i)
\end_layout

\begin_layout Standard

\series bold
i <- i + 1
\end_layout

\begin_layout Standard
\noindent

\series bold
}
\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{remark}
\end_layout

\end_inset

 Se la condizione precisata nel comando 
\series bold
while
\series default
 non è inizialmente vera, il ciclo non verrà mai eseguito.
 Come con il comando 
\series bold
for
\series default
 è possibile interrompere l'esecuzione di un ciclo 
\series bold
while
\series default
 utilizzando il comando 
\series bold
break
\series default
.
 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{remark}
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Il ciclo repeat
\end_layout

\begin_layout Standard
L'ultimo comando per generare dei cicli è il comando 
\series bold
repeat
\series default
.
 Repeat non necessita un condizione iniziale come il comando while e questo
 assicura che il ciclo venga sempre eseguito almeno una volta.
 Per terminare un ciclo 
\series bold
repeat 
\series default
è necessario utilizzare il comando 
\series bold
if
\series default
 associato al comando 
\series bold
break
\series default
.
\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{esempio}
\end_layout

\end_inset

 Comando break.
 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{esempio}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> i <- 1
\end_layout

\begin_layout Standard
\noindent

\series bold
> repeat {
\end_layout

\begin_layout Standard

\series bold
print (i)
\end_layout

\begin_layout Standard

\series bold
i <- i + 1
\end_layout

\begin_layout Standard

\series bold
if (i > 5) break
\end_layout

\begin_layout Standard
\noindent

\series bold
}
\end_layout

\begin_layout Subsubsection
Il comando next
\end_layout

\begin_layout Standard
\noindent
Il comando next può essere adoperato in un qualsiasi ciclo 
\series bold
for
\series default
, 
\series bold
whil
\series default
e o 
\series bold
repeat.

\series default
 Il suo scopo è quello di interrompere l'esecuzione del codice all'interno
 del ciclo e saltare immediatamente all'inizio del ciclo.
 Ecco un esempio:
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
x <- rnorm(10)
\end_layout

\begin_layout Standard
\noindent

\series bold
for (i in 1:10) {
\end_layout

\begin_layout Standard

\series bold
if (x[i] <0 ) next
\end_layout

\begin_layout Standard

\series bold
print (sqrt(x[i]))
\end_layout

\begin_layout Standard
\noindent

\series bold
}
\end_layout

\begin_layout Subsubsection
Vettorizzazione di cicli
\end_layout

\begin_layout Standard
Per ragioni di efficienza e velocità d'esecuzione è opportuno evitare, quando
 possibile, i cicli 
\series bold
for
\series default
, 
\series bold
while
\series default
 o 
\series bold
repeat
\series default
 in quanto rallentano l'esecuzione del programma.
 Spesso possiamo riscrivere un ciclo in forma vettoriale.
 Prendendo ad esempio l'ultimo ciclo appena trattato (quello del comando
 
\series bold
next
\series default
) esso può essere riscritto come segue:
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> x <- rnorm(10)
\end_layout

\begin_layout Standard
\noindent

\series bold
> sqrt(x[x>0])
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
È questa una caratteristica molto importante di R (ed altri linguaggi di
 alto livello).
 Tuttavia ciò può avere anche degli svantaggi, come ad esempio un più largo
 uso della memoria.
\end_layout

\begin_layout Subsection
Funzioni
\end_layout

\begin_layout Standard
Una funzione non è altro che un insieme ordinato di comandi che vengono
 raggruppati sotto un medesimo nome.
 Le funzioni possono ma non devono avere degli argomenti di input ed allo
 stesso modo possono ma non devono restituire un risultato.
 Vediamo un esempio:
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> cubo <- function (x=10) { return(x
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
symbol{94}
\end_layout

\end_inset

3) }
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Con questo comando abbiamo definito la funzione 
\series bold
cubo
\series default
.
 Essa è ora contenuta nella lista degli oggetti con le altre variabili (
\series bold
objects()
\series default
).
 Per cancellare la funzione 
\series bold
cubo()
\series default
 si utilizza il comando 
\series bold
rm(cubo)
\series default
.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Alla sinistra del comando d'assegnazione troviamo sempre il nome della funzione
 che vogliamo creare mentre alla sua destra avremo la parola chiave 
\series bold
function
\series default
 seguita in parentesi tonde dagli argomenti che vogliamo passare.
 È possibile assegnare ad ogni argomento un valore di default, nel nostro
 esempio 10, tramite l'operatore di uguaglianza.
 Ciò significa che se al momento della chiamata non viene specificato nessun
 valore per la variabile 
\series bold
x
\series default
, allora la funzione 
\series bold
cubo
\series default
 assume un valore di 
\series bold
x
\series default
 pari a 10.
 Infatti, provate a scrivere 
\begin_inset Quotes eld
\end_inset


\series bold
cubo()”
\series default
! Per finire viene specificato il codice fra parentesi graffe.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Valgono inoltre le seguenti osservazioni.
 
\end_layout

\begin_layout Enumerate
È ammesso utilizzare qualsiasi variabile per cui l'esecuzione del codice
 è ben definita.
 Nel nostro primo esempio 
\series bold
x
\series default
 potrebbe essere un qualsiasi vettore, data frame o matrice di soli numeri.
 
\end_layout

\begin_layout Enumerate
Se vogliamo che la funzione ritorni il risultato ma senza che appaia sullo
 schermo occorre utilizzare il comando 
\series bold
return(invisible(x))
\series default
.
 In questo caso il comando
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_deeper
\begin_layout Standard
\noindent

\series bold
> cubo(4)
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
calcola il cubo di 4 ma senza mostrare il risultato.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> y <- cubo(4)
\end_layout

\begin_layout Standard
\noindent

\series bold
> y
\end_layout

\begin_layout Standard
\noindent

\series bold
[1] 64
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
Le variabili dichiarate all'interno di una funzione cessano di esistere
 una volta che la funzione è terminata.
 Tuttavia se l'assegnazione è fatta utilizzando l'operatore '
\series bold

\begin_inset Quotes ard
\end_inset

-'
\series default
, anziché creare una variabile locale alla funzione, R genera una variabile
 globale, cioè una variabile definita a livello dello spazio di lavoro interatti
vo.
 
\end_layout

\begin_layout Enumerate
Ci possono essere situazioni in cui il numero di argomenti che vengono passati
 alla funzione sono variabili: si pensi alla funzione di concatenamento
 
\series bold
c()
\series default
.
 R permette quindi di creare funzioni alle quali è possibile passare un
 numero qualsiasi di argomenti.
 Il simbolo per indicare ciò è dato dai tre puntini '
\series bold
...
\series default
'.
 Si veda il manuale di R per maggiori informazioni.
 
\end_layout

\begin_layout Enumerate
È possibile testare l'esistenza di un argomento utilizzando il comando 
\series bold
missing()
\series default
.
 Esempio:
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_deeper
\begin_layout Standard
\noindent

\series bold
> cubo <- function (x) { if (missing(x)) 
\end_layout

\begin_layout Standard
\begin_inset space \qquad{}
\end_inset


\series bold
print(”Argomento non specificato”) else return(x
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
symbol{94}
\end_layout

\end_inset

3) }
\end_layout

\begin_layout Standard
\noindent

\series bold
> cubo()
\end_layout

\begin_layout Standard
\begin_inset space \qquad{}
\end_inset


\series bold
[1] ”Argomento non specificato”
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
Quando ci sono più argomenti è importante l'ordine con il quale essi vengono
 dati alla funzione.
 Esempio:
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_deeper
\begin_layout Standard
\noindent

\series bold
> potenza <- function (base,esponente) { return(base
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
symbol{94}
\end_layout

\end_inset

esponente)}
\end_layout

\begin_layout Standard
\noindent

\series bold
> potenza (1,2)
\end_layout

\begin_layout Standard
\noindent
\begin_inset space \qquad{}
\end_inset


\series bold
[1] 1
\end_layout

\begin_layout Standard
\noindent

\series bold
> potenza (2,1)
\end_layout

\begin_layout Standard
\noindent
\begin_inset space \qquad{}
\end_inset


\series bold
[1] 2
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Se si è incerti si può sempre assegnare esplicitamente i valori alle variabili
 al momento della chiamata.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> potenza(esponente=2,base=1)
\end_layout

\begin_layout Standard
\noindent
\begin_inset space \qquad{}
\end_inset


\series bold
[1] 1
\end_layout

\begin_layout Standard
\noindent
R permette la chiamata alla funzione anche con nomi incompleti.
 Ad esempio
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> potenza(esp=2,ba=1)
\end_layout

\begin_layout Standard
\noindent
\begin_inset space \qquad{}
\end_inset


\series bold
[1] 1
\end_layout

\end_deeper
\begin_layout Subsubsection
La distribuzione dei log-returns
\end_layout

\begin_layout Standard
Vogliamo analizzare più in dettaglio la distribuzione e le proprietà statistiche
 dei rendimenti logaritmici o log-returns.
 Ci interessiamo dapprima ai quantili.
 In R è possibile ottenere i quantili desiderati utilizzando la funzione
 
\series bold
quantile().
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> i <- 1
\end_layout

\begin_layout Standard
\noindent

\series bold
> quantile(r[,i], seq(0,1,0.1))
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
La funzione quantile può essere utilizzata per fare il plot della funzione
 di ripartizione empirica dei nostri dati:
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> plot(quantile(r[,i], seq(0, 1, 0.01)), seq(0, 1, 0.01), type=”l”, 
\end_layout

\begin_layout Standard
\noindent

\series bold
main=nomi[i], xlab=”Return”,ylab=”Probability”)
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Per stimare la funzione di densità esiste il comando 
\series bold
density():
\series default

\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent

\series bold
> plot(density(r[,i]), main=paste(”Densità stimata dei log-returns di ”,
 nomi[i]))
\end_layout

\begin_layout Section
Funzioni e programmazione da Excel
\end_layout

\begin_layout Standard
È possibile utilizzare R direttamente da Excel tramite Visual Basic.
 Per fare questo è necessario installare uno o più pacchetti reperibili
 al seguente indirizzo 
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset CommandInset href
LatexCommand href
name "http://sunsite.univie.ac.at/rcom"
target "http://sunsite.univie.ac.at/rcom"

\end_inset

.
 
\end_layout

\begin_layout Standard
\noindent
La descrizione del processo d'installazione va oltre lo scopo di questa
 introduzione.
 All'utente inesperto si consiglia l'installazione del paccetto 
\emph on
RAndFriendsLight
\emph default
 reperibile all'indirizzo 
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset CommandInset href
LatexCommand href
name "http://sunsite.univie.ac.at/rcom/download.html"
target "http://sunsite.univie.ac.at/rcom/download.html"

\end_inset


\end_layout

\begin_layout Standard
\noindent
(selezionate l'etichetta 
\series bold
Download
\series default
 del precedente link) il quale installa e configura automaticamente, oltre
 che il pacchetto base di R, anche tutte le altre componenti necessarie
 al funzionamento e la comunicazione di R con Microsoft Excel.
\end_layout

\begin_layout Chapter
Calculating the Variance-Covariance Matrix
\end_layout

\begin_layout Section
In Excel
\end_layout

\begin_layout Standard
Si vedano le dispense tratte dal Capitolo 8 di Benninga.
\end_layout

\begin_layout Section
In R
\end_layout

\begin_layout Standard
Supponiamo che i prezzi azionari siano in una matrice 
\begin_inset Formula $\left(n\times N\right)$
\end_inset

 
\begin_inset Formula $P$
\end_inset

 dove ad ogni colonna corrispondono le osservazioni dei prezzi di una certa
 azione.
 I prezzi sono ordinati cronologicamente, partendo dalla data più distante.
 I rendimenti logaritmici possono essere calcolati nel seguente modo:
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Enumerate
Calcola il logaritmo dei prezzi
\end_layout

\begin_deeper
\begin_layout Standard

\series bold
> lnP <- log(P)
\end_layout

\begin_layout Standard
> 
\series bold
nrOss <- nrow(lnP)
\end_layout

\end_deeper
\begin_layout Enumerate
Calcola i rendimenti storici
\end_layout

\begin_deeper
\begin_layout Standard

\series bold
> lnRet <- lnP[-1,]-lnP[-nrOss,]
\end_layout

\end_deeper
\begin_layout Enumerate
Calcola i rendimenti storici medi
\end_layout

\begin_deeper
\begin_layout Standard

\series bold
> lnRetMedio <- mean(lnRet)
\end_layout

\end_deeper
\begin_layout Enumerate
Calcola la matrice di covarianza
\end_layout

\begin_deeper
\begin_layout Standard

\series bold
> V <- cov(lnRet,use=
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

pair
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

)
\end_layout

\end_deeper
\begin_layout Enumerate
Calcola le volatilità storiche
\end_layout

\begin_deeper
\begin_layout Standard

\series bold
> volStoriche <- sqrt(diag(V))
\end_layout

\begin_layout Standard

\series bold
> names(volStoriche)
\begin_inset space \space{}
\end_inset

<- colnames(V)
\end_layout

\end_deeper
\begin_layout Enumerate
Calcola la matrice di correlazione
\end_layout

\begin_deeper
\begin_layout Standard

\series bold
> rho <- cor(lnRet,use=
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

pair
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

)
\end_layout

\begin_layout Standard
O in alternativa potremmo calcolare 
\series bold
rho
\series default
 nel modo seguente
\end_layout

\end_deeper
\begin_layout Enumerate

\series bold
rho <- diag(1/volStoriche) %*% V %*% diag(1/volStoriche)
\series default

\begin_inset VSpace medskip
\end_inset

 
\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{domanda}
\end_layout

\end_inset

 Spiegate cosa avviene nel punto 7.
 Suggerimento: confrontate il codice con la formula (
\begin_inset CommandInset ref
LatexCommand ref
reference "matrice cor Z"

\end_inset

).
 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{domanda}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\noindent
Come potete vedere il calcolo di tutte queste quantità è estremamente semplice
 e rapido.
\end_layout

\begin_layout Section
The Single-Index Model
\end_layout

\begin_layout Standard
Nel corso del semestre invernale avete incontrato un modello chiamato ”The
 single-factor model” (Haugen, pp.
 136).
 Questo modello lo ritroviamo ora in Benninga con il nome di ”The Single-Index
 Model” (Capitolo 10, pp.
 304).
 Evidenzieremo ora alcune proprietà del modello applicandolo a dati svizzeri.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Consideriamo dunque 
\begin_inset Formula $N=5$
\end_inset

 azioni incluse nello SMI
\begin_inset space \space{}
\end_inset

e i cui rendimenti lo\SpecialChar \-
ga\SpecialChar \-
rit\SpecialChar \-
mi\SpecialChar \-
ci
\begin_inset Foot
status open

\begin_layout Plain Layout
In questa sezione parleremo semplicemente di rendimenti intendendo però
 rendimenti logaritmici.
\end_layout

\end_inset

 sono delle variabili aleatorie notate 
\begin_inset Formula $r_{i},$
\end_inset

 
\begin_inset Formula $i=1,\ldots,5$
\end_inset

.
 Il rendimento dell'indice di mercato, lo SMI nel nostro caso, sarà indicato
 con 
\begin_inset Formula $r_{x}$
\end_inset

.
 E' ipotizzata una relazione lineare fra 
\begin_inset Formula $r_{i}$
\end_inset

 e 
\begin_inset Formula $r_{x}$
\end_inset

 del tipo 
\begin_inset Formula \begin{equation}
r_{it}=\alpha_{i}+\beta_{i}r_{xt}+\varepsilon_{it}\hspace{0.5cm}t=1,\ldots,n\label{eq11}\end{equation}

\end_inset

 Per fisso 
\begin_inset Formula $t$
\end_inset

 possiamo raccogliere i rendimenti delle 
\begin_inset Formula $N=5$
\end_inset

 azioni nel vettore aleatorio 
\begin_inset Formula $r_{t}=\left(r_{1t},r_{2t},\ldots,r_{Nt}\right)^{\prime}$
\end_inset

.
 Le 
\begin_inset Formula $N$
\end_inset

 equazioni possono essere scritte in forma compatta come 
\begin_inset Formula \begin{equation}
r_{t}=\alpha+\beta r_{xt}+\varepsilon_{t}\hspace{0.5cm}t=1,\ldots,n.\label{eq22}\end{equation}

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{remark}
\end_layout

\end_inset

 La (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq22"

\end_inset

) è dunque un sistema di 
\begin_inset Formula $N=5$
\end_inset

 equazioni: benvenuti nel mondo multivariato!
\begin_inset VSpace medskip
\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{remark}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\noindent
Ipotesi sulla variabile esplicativa (stocastica):
\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{ipotesi}
\end_layout

\end_inset

 
\begin_inset Formula $E(r_{xt})=\mu_{x}$
\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{ipotesi}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{ipotesi}
\end_layout

\end_inset

 
\begin_inset Formula $Var(r_{xt})=\sigma_{x}^{2}<\infty.$
\end_inset


\begin_inset VSpace medskip
\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{ipotesi}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\noindent
Ipotesi sugli errori:
\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{ipotesi}
\end_layout

\end_inset

 
\begin_inset CommandInset label
LatexCommand label
name "ipotesi 1 sugli errori"

\end_inset


\begin_inset Formula $\varepsilon_{t}\sim i.i.d.\ \left(0,\Sigma\right).$
\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{ipotesi}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{ipotesi}
\end_layout

\end_inset

 
\begin_inset Formula $Cov(\varepsilon_{it},\varepsilon_{jt})=0$
\end_inset

 per 
\begin_inset Formula $i\neq j.$
\end_inset


\begin_inset VSpace medskip
\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{ipotesi}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\noindent
Ipotesi sulla relazione tra 
\begin_inset Formula $r_{xt}$
\end_inset

 e gli errori:
\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{ipotesi}
\end_layout

\end_inset

 
\begin_inset Formula $Cov(r_{xt},\varepsilon_{t})=0.$
\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{ipotesi}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{ipotesi}
\end_layout

\end_inset

 
\begin_inset CommandInset label
LatexCommand label
name "ipotesi rendimenti non correlati"

\end_inset

Rendimenti a istanti temporali diversi non sono fra loro correlati.
\begin_inset VSpace medskip
\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{ipotesi}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{remark}
\end_layout

\end_inset

 È questo un modo compatto di esprimere le 
\begin_inset Formula $N$
\end_inset

 regressioni in un'unico grande modello di regressione.
 La sua struttura è molto simile a quella solita ma con l'importante differenza
 che la variabile spiegata è ora un vettore (dobbiamo spiegare 
\begin_inset Formula $N$
\end_inset

 rendimenti!).
 Automaticamente il vettore di parametri 
\begin_inset Formula $\alpha$
\end_inset

 contiene le 
\begin_inset Formula $N$
\end_inset

 costanti degli 
\begin_inset Formula $N$
\end_inset

 modelli (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq11"

\end_inset

) di regressione semplice ed 
\begin_inset Formula $\varepsilon_{t}$
\end_inset

 contiene gli 
\begin_inset Formula $N$
\end_inset

 termini d'errore.
 Le componenti di 
\begin_inset Formula $\varepsilon_{t}$
\end_inset

 non sono fra loro correlate in quanto 
\begin_inset Formula $cov(\varepsilon_{it},\varepsilon_{jt})=0$
\end_inset

 per 
\begin_inset Formula $i\neq j.$
\end_inset

 Tuttavia la loro varianza non è necessariamente uguale, infatti 
\begin_inset Formula $Var(\varepsilon_{it})=\sigma_{i}^{2}$
\end_inset

.
 Come nella regressione classica gli errori sono 
\begin_inset Formula $i.i.d.$
\end_inset

, quindi 
\emph on
non correlati nel tempo
\emph default
.
 Poiché la variabile esplicativa è aleatoria è necessario introdurre l'Ipotesi
 
\begin_inset CommandInset ref
LatexCommand ref
reference "ipotesi rendimenti non correlati"

\end_inset

.
 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{remark}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{esercizio}
\end_layout

\end_inset

 
\begin_inset CommandInset label
LatexCommand label
name "esercizio single-index model"

\end_inset

Single-Index Model 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{esercizio}
\end_layout

\end_inset

 
\end_layout

\begin_layout Enumerate
Si dia dimensione e contenuto di ogni simbolo della (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq22"

\end_inset

).
 
\end_layout

\begin_layout Enumerate
Si espliciti la struttura della matrice 
\begin_inset Formula $\Sigma=Var(\varepsilon_{t})$
\end_inset

 (Ipotesi 
\begin_inset CommandInset ref
LatexCommand ref
reference "ipotesi 1 sugli errori"

\end_inset

)
\begin_inset space \space{}
\end_inset

in funzione dei 
\begin_inset Formula $\sigma_{i}^{2}$
\end_inset

.
 Che particolarità presenta 
\begin_inset Formula $\Sigma$
\end_inset

? Date infine la dimensione di 
\begin_inset Formula $Cov(r_{xt},\varepsilon_{t}).$
\end_inset

 
\end_layout

\begin_layout Enumerate
Calcolate 
\begin_inset Formula $e=E(r_{t})$
\end_inset

.
 
\end_layout

\begin_layout Enumerate
Calcolate, utilizzando il modello 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq22"

\end_inset

 e le sue ipotesi, 
\begin_inset Formula $Var(r_{it})$
\end_inset

 e 
\begin_inset Formula $Cov(r_{it},r_{jt})$
\end_inset

 quando 
\begin_inset Formula $i\neq j$
\end_inset

.
 
\end_layout

\begin_layout Enumerate
\begin_inset CommandInset label
LatexCommand label
name "risultato1"

\end_inset

Si dia 
\begin_inset Formula $Var(r_{t})$
\end_inset

 (la matrice delle varianze e covarianze di 
\begin_inset Formula $r_{t}$
\end_inset

, notata 
\begin_inset Formula $V$
\end_inset

), in funzione di 
\begin_inset Formula $\beta,$
\end_inset

 
\begin_inset Formula $\sigma_{x}^{2}$
\end_inset

 e 
\begin_inset Formula $\Sigma$
\end_inset

.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_deeper
\begin_layout Standard
Il file '
\series bold
esercizio
\begin_inset CommandInset ref
LatexCommand ref
reference "esercizio single-index model"

\end_inset

.xls
\series default
' contiene 
\begin_inset Formula $158\times6$
\end_inset

 prezzi osservati a frequenza 
\emph on
settimanale
\emph default
.
 Le sei serie storiche considerate si riferiscono a 
\begin_inset Formula $N=5$
\end_inset

 azioni svizzere ed all'indice SMI.
\end_layout

\end_deeper
\begin_layout Enumerate
\begin_inset CommandInset label
LatexCommand label
name "risultato2"

\end_inset

Per tutte e sei le serie storiche di prezzi calcolate dapprima i rendimenti
 ed in seguito il rendimento medio.
 Utilizzando sempre i rendimenti calcolatene la matrice di covarianza, facendo
 in modo di lasciare quale ultima serie l'indice SMI.
 Della matrice di covarianza appena calcolata evidenziate in rosso la sottomatri
ce della covarianza stimata di 
\begin_inset Formula $r_{t}$
\end_inset

, denotata 
\begin_inset Formula $\widehat{V}_{dati}$
\end_inset

.
\end_layout

\begin_deeper
\begin_layout Standard
Le 5 equazioni stimabili avranno tutte forma 
\begin_inset Formula \[
r_{i,t}=\alpha_{i}+\beta_{i}r_{x,t}+\varepsilon_{i,t}\;,\; t=1,\ldots,157\]

\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
Utilizzando esclusivamente i risultati del punto precedente (dunque senza
 eseguire la regressione) calcolate per ciascuna equazione le stime di 
\begin_inset Formula $\alpha_{i}$
\end_inset

, 
\begin_inset Formula $\beta_{i}$
\end_inset

 ed il vettore dei residui stimati.
\end_layout

\begin_deeper
\begin_layout Standard
Suggerimento: Nella parte comune quando abbiamo trattato la regressione
 stocastica abbiamo visto che i coefficienti stimati di una regressione
 semplice (costante più una sola variabile esplicativa) sono funzioni delle
 varianze e covarianze stimate.
 Adattate questo risultato al caso in esame.
\end_layout

\end_deeper
\begin_layout Enumerate
Calcolate per ogni equazione la varianza stimata di 
\begin_inset Formula $\varepsilon_{it}$
\end_inset

, notata 
\begin_inset Formula $\widehat{\sigma}_{i}^{2}$
\end_inset

.
 
\end_layout

\begin_layout Enumerate
Proponete 
\begin_inset Formula $\widehat{\Sigma}$
\end_inset

, lo stimatore della matrice 
\begin_inset Formula $\Sigma$
\end_inset

 (prendete spunto dal punto 2).
 
\end_layout

\begin_layout Enumerate
Utilizzando 
\begin_inset Formula $\widehat{\beta},$
\end_inset

 
\begin_inset Formula $\widehat{\sigma}_{x}^{2}$
\end_inset

 e 
\begin_inset Formula $\widehat{\Sigma}$
\end_inset

 calcolate 
\begin_inset Formula $\widehat{V}$
\end_inset

 (cf.
 punto 
\begin_inset CommandInset ref
LatexCommand ref
reference "risultato1"

\end_inset

).
 Confrontate poi 
\begin_inset Formula $\widehat{V}$
\end_inset

 con 
\begin_inset Formula $\widehat{V}_{dati}$
\end_inset

.
 Notate delle differenze? Se sì, come le spiegate?
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset space \hfill{}
\end_inset


\begin_inset Formula $\square$
\end_inset


\end_layout

\end_deeper
\begin_layout Chapter
Calculating Efficient Portfolios When are No Short-Sale Restrictions
\end_layout

\begin_layout Section
Notazione e definizioni preliminari
\end_layout

\begin_layout Standard
In questo capitolo utilizzeremo la notazione introdotta precedentemente.
 Ci troviamo al tempo 
\begin_inset Formula $t$
\end_inset

 e dobbiamo costruire un portafoglio la cui struttura verrà mantenuta sino
 al periodo successivo, ovvero 
\begin_inset Formula $t+1$
\end_inset

.
 Poiché il modello è statico, evitiamo di apporre l'indice temporale alle
 variabili: 
\begin_inset Formula $r_{p}$
\end_inset

 indicherà quindi il rendimento 
\begin_inset Formula $r_{p\left(t+1\right)}$
\end_inset

 del portafoglio, 
\begin_inset Formula $r$
\end_inset

 sarà il vettore dei rendimenti azionari e così via.
 Assumiamo che 
\end_layout

\begin_layout Itemize
esistano 
\begin_inset Formula $N\geq2$
\end_inset

 asset rischiosi il cui vettore dei rendimenti attesi è notato 
\begin_inset Formula $e:=E(r)$
\end_inset

, 
\end_layout

\begin_layout Itemize
il rendimento 
\begin_inset Formula $r_{i}$
\end_inset

 di un qualsiasi asset non possa essere espresso quale combinazione lineare
 dei rendimenti dei restanti 
\begin_inset Formula $N-1$
\end_inset

 asset, il che implica una matrice 
\begin_inset Formula $V$
\end_inset

 delle varianze e covarianze dei rendimenti non singolare, 
\end_layout

\begin_layout Itemize
ci siano almeno due asset di rendimento atteso diverso, 
\end_layout

\begin_layout Itemize
sia ammesso vendere allo scoperto (short selling).
 
\end_layout

\begin_layout Section
La matematica della frontiera efficiente
\end_layout

\begin_layout Standard
Sappiamo che un portafoglio 
\begin_inset Formula $p$
\end_inset

 si trova sulla frontiera se ha varianza minima rispetto a tutti i portafogli
 con medesimo rendimento.
 Matematicamente avremo che un portafoglio 
\begin_inset Formula $p$
\end_inset

 è sulla frontiera se e solo se 
\begin_inset Formula $w_{p}$
\end_inset

, il vettore degli 
\begin_inset Formula $N$
\end_inset

 pesi (weights) di 
\begin_inset Formula $p$
\end_inset

, è soluzione del seguente problema di minimizzazione quadratica:
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula \[
\underset{\{w\}}{\min}\frac{1}{2}w^{\prime}Vw\]

\end_inset

 sotto i vincoli
\begin_inset Formula \begin{eqnarray*}
w^{\prime}e & = & E[r_{p}]\\
w^{\prime}S & = & 1\end{eqnarray*}

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{remark}
\end_layout

\end_inset

 Grazie all'ipotesi che gli 
\begin_inset Formula $N$
\end_inset

 asset non hanno tutti il medesimo rendimento atteso ed alla possibilità
 di vendere allo scoperto è possibile costruire portafogli aventi un qualsiasi
 rendimento atteso.
 Da ciò segue che ci sarà sempre almeno un portafoglio che soddisfa il primo
 vincolo e quindi, per qualsiasi rendimento atteso desiderato, il problema
 ha sempre soluzione.
 Ovviamente se ulteriori vincoli dovessero essere aggiunti ai due precedenti
 l'esistenza di una soluzione non sarebbe più garantita.
 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{remark}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
La soluzione
\end_layout

\begin_layout Standard
Formando il lagrangiano 
\begin_inset Formula $\mathcal{L}(w,\lambda,\gamma)$
\end_inset

, 
\begin_inset Formula $w_{p}$
\end_inset

 è soluzione di
\begin_inset Formula \[
\underset{\{w,\lambda,\gamma\}}{\min}\mathcal{L=}\frac{1}{2}w^{\prime}Vw+\lambda(E[r_{p}]-w^{\prime}e)+\gamma(1-w^{\prime}S)\]

\end_inset

 ovvero
\begin_inset Formula \begin{eqnarray}
\frac{\partial L}{\partial w} & = & Vw_{p}-\lambda e-\gamma S=\underset{(N\times1)}{0}\label{cpo1}\\
\frac{\partial L}{\partial\lambda} & = & E[r_{p}]-w_{p}^{\prime}e=0\label{cpo2}\\
\frac{\partial L}{\partial\gamma} & = & 1-w_{p}^{\prime}S=0\label{cpo3}\end{eqnarray}

\end_inset


\end_layout

\begin_layout Standard
Poiché 
\begin_inset Formula $V$
\end_inset

 è definita positiva, le condizioni di primo ordine (
\begin_inset CommandInset ref
LatexCommand ref
reference "cpo1"

\end_inset

), (
\begin_inset CommandInset ref
LatexCommand ref
reference "cpo2"

\end_inset

) e (
\begin_inset CommandInset ref
LatexCommand ref
reference "cpo3"

\end_inset

) sono necessarie e sufficienti per un mimimo globale.
 Risolvendo la (
\begin_inset CommandInset ref
LatexCommand ref
reference "cpo1"

\end_inset

) rispetto a 
\begin_inset Formula $w_{p}$
\end_inset

 si ottiene
\begin_inset Formula \begin{equation}
w_{p}=\lambda V^{-1}e+\gamma V^{-1}S\label{eq2}\end{equation}

\end_inset

 e premoltiplicando (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq2"

\end_inset

) per 
\begin_inset Formula $e^{\prime}$
\end_inset

 ed utilizzando la (
\begin_inset CommandInset ref
LatexCommand ref
reference "cpo2"

\end_inset

):
\begin_inset Formula \begin{equation}
E[r_{p}]=\lambda e^{\prime}V^{-1}e+\gamma e^{\prime}V^{-1}S\label{eq2a}\end{equation}

\end_inset

 Premoltiplicando sempre la (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq2"

\end_inset

) per 
\begin_inset Formula $S^{\prime}$
\end_inset

 ed utilizzando (
\begin_inset CommandInset ref
LatexCommand ref
reference "cpo1"

\end_inset

):
\begin_inset Formula \begin{equation}
1=\lambda S^{\prime}V^{-1}e+\gamma S^{\prime}V^{-1}S\label{eq2b}\end{equation}

\end_inset

 Grazie a (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq2a"

\end_inset

) e (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq2b"

\end_inset

) abbiamo 2 equazioni in 2 incognite, 
\begin_inset Formula $\lambda$
\end_inset

 e 
\begin_inset Formula $\gamma$
\end_inset

.
 Risolvendo
\begin_inset Formula \begin{eqnarray}
\lambda & = & \frac{CE[r_{p}]-A}{D}\label{eq3a}\\
\gamma & = & \frac{B-AE[r_{p}]}{D}\label{eq3b}\end{eqnarray}

\end_inset

 dove
\begin_inset Formula \begin{eqnarray*}
A & = & S^{\prime}V^{-1}e=e^{\prime}V^{-1}S\\
B & = & e^{\prime}V^{-1}e\\
C & = & S^{\prime}V^{-1}S\\
D & = & BC-A^{2}\end{eqnarray*}

\end_inset

 Poiché l'inversa di una matrice definita positiva è definita positiva,
 
\begin_inset Formula $B$
\end_inset

 e 
\begin_inset Formula $C$
\end_inset

 sono entrambi strettamente maggiori di 
\begin_inset Formula $0$
\end_inset

.
 Essendo
\begin_inset Formula \[
0\overset{!}{<}(Ae-BS)^{\prime}V^{-1}(Ae-BS)=\underset{>0}{B}(BC-A^{2})\]

\end_inset

 segue che 
\begin_inset Formula \[
(BC-A^{2})>0\]

\end_inset

 e quindi 
\begin_inset Formula $D>0$
\end_inset

.
 Sostituiamo ora 
\begin_inset Formula $\lambda$
\end_inset

 e 
\begin_inset Formula $\gamma$
\end_inset

 in (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq2"

\end_inset

) così da ottenere
\begin_inset Formula \begin{equation}
w_{p}=g+hE[r_{p}]\label{eq4}\end{equation}

\end_inset

 dove
\begin_inset Formula \begin{eqnarray*}
\underset{(N\times1)}{g} & = & \frac{1}{D}\left[BV^{-1}S-AV^{-1}e\right]\\
\underset{(N\times1)}{h} & = & \frac{1}{D}\left[CV^{-1}e-AV^{-1}S\right]\end{eqnarray*}

\end_inset


\end_layout

\begin_layout Subsection
Proprietà della frontiera
\end_layout

\begin_layout Standard
\noindent
Le equazioni (
\begin_inset CommandInset ref
LatexCommand ref
reference "cpo1"

\end_inset

), (
\begin_inset CommandInset ref
LatexCommand ref
reference "cpo2"

\end_inset

) e (
\begin_inset CommandInset ref
LatexCommand ref
reference "cpo3"

\end_inset

) definiscono delle condizioni necessarie e sufficienti affinché la soluzione
 
\begin_inset Formula $w_{p}$
\end_inset

 sia sulla frontiera (tuttavia non necessariamente sulla parte efficiente).
 Quindi se 
\begin_inset Formula $w_{p}$
\end_inset

 si trova sulla frontiera, esso avrà una rappresentazione in termini della
 (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq4"

\end_inset

), cioé in termini di 
\begin_inset Formula $g$
\end_inset

 e 
\begin_inset Formula $h$
\end_inset

 .
 Per contro, se 
\begin_inset Formula $w_{p}$
\end_inset

 è rappresentabile tramite la (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq4"

\end_inset

), 
\begin_inset Formula $w_{p}$
\end_inset

 soddisfa le (
\begin_inset CommandInset ref
LatexCommand ref
reference "cpo1"

\end_inset

), (
\begin_inset CommandInset ref
LatexCommand ref
reference "cpo2"

\end_inset

) e (
\begin_inset CommandInset ref
LatexCommand ref
reference "cpo3"

\end_inset

) e quindi esso è sulla frontiera.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
L'interpretazione dei portafogli associati al vettore di pesi 
\begin_inset Formula $g$
\end_inset

 e 
\begin_inset Formula $g+h$
\end_inset

 è la seguente: 
\end_layout

\begin_layout Itemize
\begin_inset Formula $g$
\end_inset

 corrisponde al vettore di pesi del portafoglio frontiera avente 
\begin_inset Formula $0$
\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

expected return
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

.
 Infatti
\begin_inset Formula \[
w_{p}=g+h0=g.\]

\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Formula $g+h$
\end_inset

 corrisponde al vettore di pesi del portafoglio frontiera con rendimento
 atteso 
\begin_inset Formula $1$
\end_inset

 
\begin_inset Formula \[
w_{p}=g+h1=g+h.\]

\end_inset

 
\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{theorem}
\end_layout

\end_inset

 Qualsiasi portafoglio situato sulla frontiera è generato tramite combinazione
 lineare dei due portafogli di pesi 
\begin_inset Formula $g$
\end_inset

 e 
\begin_inset Formula $g+h$
\end_inset

.
 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{theorem}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{proof}
\end_layout

\end_inset

 Sia 
\begin_inset Formula $r^{\ast}$
\end_inset

 un qualsiasi rendimento e 
\begin_inset Formula $w_{q^{\ast}}$
\end_inset

 il portafoglio frontiera di rendimento atteso 
\begin_inset Formula $E[r_{q^{\ast}}]=r^{\ast}$
\end_inset

.
 La formula (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq4"

\end_inset

) afferma che tale portafoglio avrà pesi uguali a
\begin_inset Formula \[
w_{q^{\ast}}=g+hE[r_{q^{\ast}}].\]

\end_inset

 Consideriamo la combinazione lineare dei portafogli 
\begin_inset Formula $g$
\end_inset

 e 
\begin_inset Formula $g+h$
\end_inset

 con pesi 
\begin_inset Formula $\{1-E[r_{q^{\ast}}],E[r_{q^{\ast}}]\}$
\end_inset

:
\begin_inset Formula \[
\left(1-E[r_{q^{\ast}}]\right)g+E[r_{q^{\ast}}]\left(g+h\right)=g+hE[r_{q^{\ast}}]=w_{q^{\ast}}.\]

\end_inset

 Tale combinazione lineare genera esattamente il portafoglio 
\begin_inset Formula $q^{\ast}$
\end_inset

! Poiché 
\begin_inset Formula $r^{\ast}$
\end_inset

 era un qualsiasi rendimento il teorema è dimostrato.
 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{proof}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{remark}
\end_layout

\end_inset

 Notiamo che la precedente argomentazione fa indirettamente uso del fatto
 che i due portafogli frontiera 
\begin_inset Formula $g$
\end_inset

 e 
\begin_inset Formula $g+h$
\end_inset

 hanno rendimento atteso diverso, 
\begin_inset Formula $0$
\end_inset

 e 
\begin_inset Formula $1$
\end_inset

.
 È possibile generalizzare ulteriormente il teorema precedente.
 È infatti possibile dimostrare che l'intera frontiera può essere generata
 a partire da due qualsiasi portafogli frontiera distinti
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
E quindi di valore atteso diverso fra loro!
\end_layout

\end_inset

, non necessariamente 
\begin_inset Formula $g$
\end_inset

 e 
\begin_inset Formula $g+h$
\end_inset

.
 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{remark}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{proof}
\end_layout

\end_inset

 Prendiamo due portafogli frontiera distinti, notati rispettivamente 
\begin_inset Formula $p_{1}$
\end_inset

 e 
\begin_inset Formula $p_{2}$
\end_inset

, di rendimento atteso 
\begin_inset Formula $E[r_{p_{1}}]$
\end_inset

, 
\begin_inset Formula $E[r_{p_{2}}]$
\end_inset

 e pesi 
\begin_inset Formula $w_{p_{1}}=g+hE[r_{p_{1}}]$
\end_inset

, 
\begin_inset Formula $w_{p_{2}}=g+hE[r_{p_{2}}]$
\end_inset

.
 Sia ora 
\begin_inset Formula $p$
\end_inset

 un qualsiasi portafoglio frontiera di rendimento atteso 
\begin_inset Formula $E[r_{p}]$
\end_inset

.
 Poiché 
\begin_inset Formula $E[r_{p_{1}}]\neq E[r_{p_{2}}]$
\end_inset

 l'equazione in 
\begin_inset Formula $\alpha$
\end_inset


\begin_inset Formula \begin{equation}
E[r_{p}]=\alpha E[r_{p_{1}}]+(1-\alpha)E[r_{p_{2}}]\label{eq5}\end{equation}

\end_inset

 ha quale unica soluzione
\begin_inset Formula \[
\alpha^{\ast}=\frac{E[r_{p}]-E[r_{p_{2}}]}{E[r_{p_{1}}]-E[r_{p_{2}}]}.\]

\end_inset

 Consideriamo ora la combinazione lineare dei portafogli 
\begin_inset Formula $p_{1}$
\end_inset

 e 
\begin_inset Formula $p_{2}$
\end_inset

 di pesi 
\begin_inset Formula $\{\alpha^{\ast},1-\alpha^{\ast}\}$
\end_inset

.
 Avremo
\begin_inset Formula \begin{eqnarray*}
\alpha^{\ast}w_{p_{1}}+(1-\alpha^{\ast})w_{p_{2}} & = & \alpha^{\ast}\left(g+hE[r_{p_{1}}]\right)+(1-\alpha^{\ast})\left(g+hE[r_{p_{2}}]\right)\\
 & = & g+h\left(\alpha^{\ast}E[r_{p_{1}}]+(1-\alpha^{\ast})E[r_{p_{2}}]\right)\\
 & = & g+hE[r_{p}]=w_{p}.\end{eqnarray*}

\end_inset

 Poiché il portafoglio 
\begin_inset Formula $p$
\end_inset

 era un qualsiasi portafoglio frontiera , abbiamo dimostrato che anche con
 
\begin_inset Formula $p_{1}$
\end_inset

 e 
\begin_inset Formula $p_{2}$
\end_inset

 è possibile costruire l'intera frontiera.
 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{proof}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
\begin_inset CommandInset label
LatexCommand label
name "ref_cov_port_front"

\end_inset

La covarianza fra portafogli frontiera
\end_layout

\begin_layout Standard
La covarianza fra due portafogli frontiera qualsiasi 
\begin_inset Formula $p$
\end_inset

 e 
\begin_inset Formula $q$
\end_inset

 è data da
\begin_inset Formula \begin{equation}
Cov(r_{p},r_{q})=w_{p}^{\prime}Vw_{q}=\frac{C}{D}\left(E[r_{p}]-\frac{A}{C}\right)\left(E[r_{q}]-\frac{A}{C}\right)+\frac{1}{C}\label{formula covarianza fra due port frontiera}\end{equation}

\end_inset

 La formula (
\begin_inset CommandInset ref
LatexCommand ref
reference "formula covarianza fra due port frontiera"

\end_inset

) ci permette di concludere che la covarianza fra due portafogli efficienti
 è sempre positiva.
\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{domanda}
\end_layout

\end_inset

 Spiegate perché la covarianza fra due portafogli efficienti è sempre positiva.
 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{domanda}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset VSpace medskip
\end_inset

 Quando 
\begin_inset Formula $p=q$
\end_inset

 la precedente formula si riduce alla varianza di 
\begin_inset Formula $r_{p}$
\end_inset

 che potrà essere scritta come
\begin_inset Formula \begin{eqnarray*}
\sigma_{p}^{2} & = & \frac{C}{D}\left(E[r_{p}]-\frac{A}{C}\right)^{2}+\frac{1}{C}\\
 & = & \frac{1}{D}\left(C(E[r_{p}])^{2}-2AE[r_{p}]+\frac{A^{2}+D}{C}\right)\\
 & = & \frac{1}{D}\left(C(E[r_{p}])^{2}-2AE[r_{p}]+B\right)\end{eqnarray*}

\end_inset


\end_layout

\begin_layout Standard
che è una parabola nello spazio 
\begin_inset Formula $\left(\sigma^{2},E[r]\right)$
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\text{Grafico}\]

\end_inset

 
\begin_inset VSpace 6cm
\end_inset


\end_layout

\begin_layout Standard
\noindent
oppure un'iperbole di equazione
\begin_inset Formula \begin{equation}
\frac{\sigma_{p}^{2}}{1/C}-\frac{\left(E[r_{p}]-A/C\right)^{2}}{D/C^{2}}=1\label{eq6}\end{equation}

\end_inset

 nello spazio 
\begin_inset Formula $\left(\sigma,E[r]\right)$
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Formula \[
\text{Grafico}\]

\end_inset

 
\begin_inset VSpace 6cm
\end_inset


\end_layout

\begin_layout Standard
\noindent
Calcoliamo ora il differenziale totale della funzione definita implicitamente
 dalla (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq6"

\end_inset

):
\begin_inset Formula \[
f(x,y)=1\]

\end_inset

 dove 
\begin_inset Formula $x=\sigma_{p},\ y=E[r_{p}]$
\end_inset


\begin_inset Formula \begin{eqnarray*}
\frac{x^{2}}{1/C}-\frac{\left(y-\frac{A}{C}\right)^{2}}{D/C^{2}} & = & 1\\
2Cx\ dx-\frac{C^{2}}{D}2(y-\frac{A}{C})\ dy & = & 0\end{eqnarray*}

\end_inset

 da cui
\begin_inset Formula \begin{equation}
\frac{dy}{dx}=\frac{Dx}{Cy-A}\Rightarrow\frac{dE[r_{p}]}{d\sigma_{p}}=\frac{D\sigma_{p}}{CE[r_{p}]-A}\label{stella2}\end{equation}

\end_inset

 Sapendo che la retta passa per il punto 
\begin_inset Formula $p$
\end_inset

 di coordinate 
\begin_inset Formula $(\sigma_{p},E[r_{p}])$
\end_inset

 possiamo ora calcolare il coefficiente 
\begin_inset Formula $a$
\end_inset

 della tangente 
\begin_inset Formula $y=a+bx$
\end_inset

 alla frontiera nel punto 
\begin_inset Formula $p$
\end_inset

:
\begin_inset Formula \begin{eqnarray}
a & = & E[r_{p}]-b\sigma_{p}\underset{(\ref{stella2})}{=}E[r_{p}]-\frac{D\sigma_{p}}{CE[r_{p}]-A}\sigma_{p}\notag\\
 & = & E[r_{p}]-\frac{D\sigma_{p}^{2}}{CE[r_{p}]-A}\label{temp1}\end{eqnarray}

\end_inset

 Risolvendo rispetto a 
\begin_inset Formula $\sigma_{p}^{2}$
\end_inset

 nella (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq6"

\end_inset

) e sostituendo nella (
\begin_inset CommandInset ref
LatexCommand ref
reference "temp1"

\end_inset

) otteniamo:
\begin_inset Formula \begin{eqnarray*}
a & = & E[r_{p}]-\frac{D\sigma_{p}^{2}}{CE[r_{p}]-A}\\
 & = & E[r_{p}]-\frac{\left(E[r_{p}]-\frac{A}{C}\right)^{2}D}{\frac{D}{C^{2}}C\left(CE[r_{p}]-A\right)}-\frac{D}{C}\frac{1}{\left(E[r_{p}]C-A\right)}\\
 & = & E[r_{p}]-\frac{\left(E[r_{p}]-\frac{A}{C}\right)^{2}D}{C^{2}\left(E[r_{p}]-\frac{A}{C}\right)\frac{D}{C^{2}}}-\frac{D}{C^{2}}\frac{1}{\left(E[r_{p}]-\frac{A}{C}\right)}\\
 & = & E[r_{p}]-\left(E[r_{p}]-\frac{A}{C}\right)-\frac{D}{C^{2}}\frac{1}{\left(E[r_{p}]-\frac{A}{C}\right)}\\
 & = & \frac{A}{C}-\frac{D}{C^{2}}\frac{1}{\left(E[r_{p}]-\frac{A}{C}\right)}\end{eqnarray*}

\end_inset

 La retta tangente alla frontiera nel punto 
\begin_inset Formula $\left(\sigma_{p},E[r_{p}]\right)$
\end_inset

 avrà dunque equazione 
\begin_inset Formula \begin{equation}
E[r]=\frac{A}{C}-\frac{D}{C^{2}}\frac{1}{\left(E[r_{p}]-\frac{A}{C}\right)}+\frac{D\sigma_{p}}{CE[r_{p}]-A}\ \sigma\ .\label{equazione retta tangente frontiera}\end{equation}

\end_inset


\end_layout

\begin_layout Subsection
Il portafoglio a varianza minima
\end_layout

\begin_layout Standard
Il portafoglio a varianza minima, notato 
\begin_inset Formula $mvp$
\end_inset

, di valore atteso 
\begin_inset Formula $\frac{A}{C}$
\end_inset

 e varianza 
\begin_inset Formula $\frac{1}{C}$
\end_inset

 ha la seguente proprietà:
\begin_inset Formula \begin{equation}
Cov(r_{q},r_{mvp})=Var(r_{mvp})\label{eq123}\end{equation}

\end_inset

 per ogni portafoglio 
\begin_inset Formula $q$
\end_inset

, non necessariamente sulla frontiera.
 Vogliamo dimostrare questo risultato.
\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{esercizio}
\end_layout

\end_inset

 Proprietà del minimum-variance-portfolio (
\begin_inset Formula $mvp)$
\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{esercizio}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\noindent
Sia dunque 
\begin_inset Formula $q$
\end_inset

 un qualsiasi portafoglio.
 Consideriamo un portafoglio 
\begin_inset Formula $p$
\end_inset

 definito tramite una combinazione lineare di 
\begin_inset Formula $q$
\end_inset

 e 
\begin_inset Formula $mvp$
\end_inset

 con pesi 
\begin_inset Formula $a$
\end_inset

 e 
\begin_inset Formula $(1-a)$
\end_inset

.
 
\end_layout

\begin_layout Enumerate
Si calcoli la varianza di 
\begin_inset Formula $p$
\end_inset

 in funzione del peso 
\begin_inset Formula $a$
\end_inset

, 
\begin_inset Formula $\sigma_{q}^{2}$
\end_inset

, 
\begin_inset Formula $\sigma_{mvp}^{2}$
\end_inset

 e 
\begin_inset Formula $Cov(r_{q},r_{mvp})$
\end_inset

.
 
\end_layout

\begin_layout Enumerate
Si imposti il problema di minimizzazione della varianza di 
\begin_inset Formula $p$
\end_inset

 in funzione del parametro 
\begin_inset Formula $a$
\end_inset

.
 Si dia la condizione di primo ordine, notata 
\begin_inset Formula $(c1)$
\end_inset

, e si verifichi che un'eventuale soluzione è un punto di minimo.
 
\end_layout

\begin_layout Enumerate
Ovviamente, essendo 
\begin_inset Formula $mvp$
\end_inset

 il portafoglio a varianza minima, esso è anche soluzione del precedente
 problema di minimizzazione e quindi avremo che 
\begin_inset Formula $p=mvp$
\end_inset

.
 Quanto vale dunque il parametro 
\begin_inset Formula $a?$
\end_inset

 
\end_layout

\begin_layout Enumerate
Inserite il valore di 
\begin_inset Formula $a$
\end_inset

 dedotto al punto precedente nell'equazione 
\begin_inset Formula $(c1)$
\end_inset

 e dimostrate la (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq123"

\end_inset

).
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset space \hfill{}
\end_inset


\begin_inset Formula $\square$
\end_inset


\end_layout

\end_deeper
\begin_layout Subsection
La frontiera efficiente
\end_layout

\begin_layout Standard
I portafogli frontiera di rendimento atteso superiore ad 
\begin_inset Formula $\frac{A}{C}$
\end_inset

 (rendimento atteso del 
\begin_inset Formula $mvp$
\end_inset

) sono chiamati portafogli efficienti.
 Abbiamo visto in precedenza che la combinazione lineare di due portafogli
 frontiera è ancora un portafoglio frontiera.
 Questa proprietà è generalizzabile alla combinazione lineare di un numero
 qualsiasi di portafogli frontiera.
\begin_inset VSpace medskip
\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
setcounter{prop}{0}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{proprieta}
\end_layout

\end_inset

 
\begin_inset CommandInset label
LatexCommand label
name "comb lin port front"

\end_inset

Qualsiasi combinazone lineare di portafogli frontiera è un portafoglio frontiera.
 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{proprieta}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{proprieta}
\end_layout

\end_inset

 
\begin_inset CommandInset label
LatexCommand label
name "com lin conv port front"

\end_inset

Combinazioni lineari convesse (cioè 
\begin_inset Formula $\alpha_{i}\geq0$
\end_inset

 e 
\begin_inset Formula $\sum\alpha_{i}=1$
\end_inset

) di portafogli efficienti sono portafogli efficienti.
 Da questa proprietà segue che l'insieme dei portafogli efficienti è un
 insieme convesso.
\begin_inset VSpace medskip
\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{proprieta}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{esercizio}
\end_layout

\end_inset

 
\begin_inset CommandInset label
LatexCommand label
name "esercizio1 proprieta frontiera"

\end_inset

Dimostrazione della Proprietà 
\begin_inset CommandInset ref
LatexCommand ref
reference "comb lin port front"

\end_inset


\end_layout

\begin_layout Standard
\noindent
Siano 
\begin_inset Formula $w_{i}$
\end_inset

, 
\begin_inset Formula $i=1,2,\ldots m$
\end_inset

, 
\begin_inset Formula $m$
\end_inset

 portafogli frontiera ed 
\begin_inset Formula $\alpha_{i}$
\end_inset

, 
\begin_inset Formula $i=1,2,\ldots m$
\end_inset

, 
\begin_inset Formula $m$
\end_inset

 numeri reali tali che 
\begin_inset Formula $\sum\alpha_{i}=1$
\end_inset

.
 Si dia in funzione dei rendimenti attesi dei portafogli 
\begin_inset Formula $w_{i}$
\end_inset

, notati 
\begin_inset Formula $E(\widetilde{r}_{i})$
\end_inset

, 
\begin_inset Formula $i=1,2,\ldots m$
\end_inset

, il rendimento atteso del portafoglio 
\begin_inset Formula $p$
\end_inset

 definito da 
\begin_inset Formula $w_{p}=\sum\alpha_{i}w_{i}$
\end_inset

 e si dimostri che 
\begin_inset Formula $p$
\end_inset

 è un portafoglio frontiera.
\end_layout

\begin_layout Standard
\noindent
Suggerimento: cercate di dimostrare che 
\begin_inset Formula $w_{p}$
\end_inset

 è esprimibile nella solita forma 
\begin_inset Formula $g+hE(\widetilde{r}_{p})$
\end_inset

.
\begin_inset VSpace medskip
\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{esercizio}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{esercizio}
\end_layout

\end_inset

 
\begin_inset CommandInset label
LatexCommand label
name "esercizio2 proprieta frontiera"

\end_inset

Dimostrazione della Proprietà 
\begin_inset CommandInset ref
LatexCommand ref
reference "com lin conv port front"

\end_inset


\end_layout

\begin_layout Standard
\noindent
Siano ora 
\begin_inset Formula $w_{i}$
\end_inset

, 
\begin_inset Formula $i=1,2,\ldots m$
\end_inset

, 
\begin_inset Formula $m$
\end_inset

 portafogli efficienti ed 
\begin_inset Formula $\alpha_{i}\geq0$
\end_inset

, 
\begin_inset Formula $i=1,2,\ldots m$
\end_inset

, 
\begin_inset Formula $m$
\end_inset

 numeri reali tali che la loro somma 
\begin_inset Formula $\sum\alpha_{i}=1$
\end_inset

.
 Dimostrate che se 
\begin_inset Formula $w_{p}=\sum\alpha_{i}w_{i}$
\end_inset

, allora 
\begin_inset Formula $p$
\end_inset

 è un portafoglio efficiente.
\end_layout

\begin_layout Standard
\noindent
Suggerimento: dovete dimostrare che 
\end_layout

\begin_layout Enumerate
\begin_inset Formula $p$
\end_inset

 è un portafoglio frontiera, 
\end_layout

\begin_layout Enumerate
\begin_inset Formula $E(\widetilde{r}_{p})>\frac{A}{C}$
\end_inset

.
\begin_inset VSpace medskip
\end_inset

 
\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{esercizio}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Portafogli frontiera a 0 covarianza
\end_layout

\begin_layout Standard
Una proprietà importante della frontiera è che per qualsiasi portafoglio
 frontiera 
\begin_inset Formula $p$
\end_inset

 diverso da 
\begin_inset Formula $mvp$
\end_inset

 esite un portafoglio frontiera, notato 
\begin_inset Formula $zc(p)$
\end_inset

, tale che 
\begin_inset Formula $Cov(r_{p},r_{zc(p)})=0$
\end_inset

.
 Utilizzando l'equazione caratterizzante la covarianza fra due portafogli
 frontiera è possibile determinare il rendimento atteso del portafoglio
 
\begin_inset Formula $zc(p)$
\end_inset

 semplicemente eguagliando la 
\begin_inset Formula $Cov(r_{p},r_{zc(p)})$
\end_inset

 a 
\begin_inset Formula $0$
\end_inset

.
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
Nel paragrafo 
\begin_inset CommandInset ref
LatexCommand ref
reference "ref_cov_port_front"

\end_inset

 abbiamo calcolato la tangente alla frontiera nel punto 
\begin_inset Formula $(\sigma_{p},E[r_{p}])$
\end_inset

:
\begin_inset Formula \[
E[r]=\underset{a}{\underbrace{E[r_{p}]-\frac{D\sigma_{p}^{2}}{CE[r_{p}]-A}}}+\underset{b}{\underbrace{\frac{D\sigma_{p}}{CE[r_{p}]-A}}}\sigma.\]

\end_inset

 È possibile dimostrare che il coefficiente 
\begin_inset Formula $a$
\end_inset

 è uguale al rendimento atteso del portafoglio 
\begin_inset Formula $zc(p)$
\end_inset

.
 Questo implica che il rendimento del portafoglio a covarianza 
\begin_inset Formula $0$
\end_inset

 di un portafoglio 
\begin_inset Formula $p$
\end_inset

 può essere trovato graficamente trovando il punto di intersezione fra l'asse
 delle ordinate e la retta tangente alla frontiera nel punto 
\begin_inset Formula $(\sigma_{p},E[r_{p}])$
\end_inset

.
\end_layout

\begin_layout Subsection
La security market line
\end_layout

\begin_layout Standard
Vogliamo ora caratterizzare la relazione fra il rendimento atteso di un
 qualsiasi portafoglio frontiera diverso da 
\begin_inset Formula $mvp$
\end_inset

 ed il rendimento di un qualsiasi altro portafoglio (non necessariamente
 sulla frontiera quindi).
 Sia dunque 
\begin_inset Formula $p\neq mvp$
\end_inset

 un portafoglio frontiera.
 Utilizzando la (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq2"

\end_inset

) otteniamo
\begin_inset Formula \begin{eqnarray*}
Cov(r_{p},r_{q}) & = & w_{p}^{\prime}Vw_{q}=\lambda e^{\prime}V^{-1}Vw_{q}+\gamma S^{\prime}V^{-1}Vw_{q}\\
 & = & \lambda E[r_{q}]+\gamma\end{eqnarray*}

\end_inset

 Sostituendo la (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq3a"

\end_inset

) e (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq3b"

\end_inset

) a 
\begin_inset Formula $\lambda$
\end_inset

 e 
\begin_inset Formula $\gamma$
\end_inset

:
\begin_inset Formula \[
E[r_{q}]=\frac{AE[r_{p}]-B}{CE[r_{p}]-A}+Cov(r_{p},r_{q})\frac{D}{CE[r_{p}]-A}\]

\end_inset

 e tramite l'equazione
\begin_inset Formula $\ (\ref{eq6})$
\end_inset


\begin_inset Formula \begin{eqnarray}
E[r_{q}] & = & \frac{A}{C}-\frac{D/C^{2}}{E[r_{p}]-A/C}+\underset{\beta_{q,p}}{\underbrace{\frac{Cov(r_{p},r_{q})}{\sigma_{p}^{2}}}}\underset{\text{tramite (\ref{eq6}) }\sigma_{p}^{2}}{\underbrace{\left[\frac{1}{C}+\frac{\left(E[r_{p}]-A/C\right)^{2}}{D/C}\right]}}\frac{D}{CE[r_{p}]-A}\notag\\
 & = & E[r_{zc(p)}]+\beta_{q,p}\left(E[r_{p}]-A/C+\frac{D/C^{2}}{E[r_{p}]-A/C}\right)\notag\\
 & = & E[r_{zc(p)}]+\beta_{q,p}\left(E[r_{p}]-E[r_{zc(p)}]\right)\\
 & = & \beta_{q,p}E[r_{p}]+(1-\beta_{q,p})E[r_{zc(p)}]\label{eq7}\end{eqnarray}

\end_inset

 Il rendimento atteso di un qualsiasi portafoglio 
\begin_inset Formula $q$
\end_inset

 può quindi scriversi come una combinazione lineare dei rendimenti attesi
 del portafoglio 
\begin_inset Formula $p$
\end_inset

 e del suo 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

zero covariance
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

 
\begin_inset Formula $zc(p)$
\end_inset

 portafoglio con pesi uguali a 
\begin_inset Formula $\beta_{q,p}$
\end_inset

 e rispettivamente 
\begin_inset Formula $(1-\beta_{q,p})$
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset VSpace medskip
\end_inset

 Notiamo che 
\begin_inset Formula $zc(zc(p))=p$
\end_inset

 (il portafoglio 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

zero covariance
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

 del portafoglio 
\begin_inset Formula $zc(p)$
\end_inset

 è 
\begin_inset Formula $p$
\end_inset

) per qualsiasi portafoglio frontiera 
\begin_inset Formula $p\neq mvp$
\end_inset

.
 Questo ci permette di ripetere
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Tuttavia deve valere 
\begin_inset Formula $\sigma_{zc(p)}^{2}>0$
\end_inset

.
\end_layout

\end_inset

 l'argomentazione invertendo i ruoli fra 
\begin_inset Formula $p$
\end_inset

 e 
\begin_inset Formula $zc(p)$
\end_inset

, cioè prendendo quale portafoglio frontiera iniziale 
\begin_inset Formula $zc(p)$
\end_inset

 ed ottenendo per analogia
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Per un qualsiasi portafoglio frontiera 
\begin_inset Formula $k$
\end_inset

 vale: 
\begin_inset Formula $E[\widetilde{r}_{q}]=\beta_{q,k}E[\widetilde{r}_{k}]+(1-\beta_{q,k})E[\widetilde{r}_{zc(k)}].$
\end_inset


\end_layout

\end_inset


\begin_inset Formula \begin{equation}
E[r_{q}]=\beta_{q,zc(p)}E[r_{zc(p)}]+(1-\beta_{q,zc(p)})E[r_{p}]\label{eq8}\end{equation}

\end_inset

 Poiché 
\begin_inset Formula $E[r_{zc(p)}]\neq E[r_{p}]$
\end_inset

, l'equazione
\begin_inset Formula \[
E[r_{q}]=\alpha E[r_{zc(p)}]+(1-\alpha)E[r_{p}]\]

\end_inset

 possiede un'unica soluzione che notiamo 
\begin_inset Formula $\alpha^{\ast}$
\end_inset

.
 Confrontanto i pesi di 
\begin_inset Formula $E[r_{zc(p)}]$
\end_inset

 nell'equazione (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq7"

\end_inset

) e (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq8"

\end_inset

) otteniamo la seguente identità:
\begin_inset Formula \[
(1-\beta_{q,p})=\alpha^{\ast}=\beta_{q,zc(p)}.\]

\end_inset

 Quindi, riprendendo l'equazione (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq7"

\end_inset

) essa può essere riscritta come
\begin_inset Formula \begin{equation}
E[r_{q}]=\beta_{q,p}E[r_{p}]+\beta_{q,zc(p)}E[r_{zc(p)}]\label{eq9}\end{equation}

\end_inset

 Le relazioni (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq7"

\end_inset

), (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq8"

\end_inset

) e (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq9"

\end_inset

) sono tutte equivalenti fra loro.
\end_layout

\begin_layout Subsection
Asset non rischioso
\end_layout

\begin_layout Standard
\noindent
Assumiamo ora che esista un asset non rischioso il cui rendimento è certo.
 Notiamo con 
\begin_inset Formula $p$
\end_inset

 un portafoglio frontiera degli 
\begin_inset Formula $N+1$
\end_inset

 asset e con 
\begin_inset Formula $\underset{N\times1}{w_{p}}$
\end_inset

 il vettore dei pesi di 
\begin_inset Formula $p$
\end_inset

 negli investimenti a rischio.
 
\begin_inset Formula $w_{p}$
\end_inset

 sarà dunque la soluzione al seguente problema di minimizzazione vincolato:
\begin_inset Formula \[
\min\frac{1}{2}w^{\prime}Vw\]

\end_inset

 sotto i vincoli
\begin_inset Formula \begin{equation}
w^{\prime}e+(1-w^{\prime}S)r_{f}=E[r_{p}]\label{vincoli somma pesi e rendimento rf}\end{equation}

\end_inset

 Come in precedenza formiamo il lagrangiano 
\begin_inset Formula $\mathcal{L}$
\end_inset

: 
\begin_inset Formula $w_{p}$
\end_inset

 sarà soluzione del seguente problema
\begin_inset Formula \[
\underset{\{w,\lambda\}}{\min}\frac{1}{2}w^{\prime}Vw+\lambda\left(E[r_{p}]-w^{\prime}e-(1-w^{\prime}S)r_{f}\right)\]

\end_inset

 Le condizioni di primo ordine saranno
\begin_inset Formula \begin{eqnarray}
Vw_{p} & = & \lambda(e-r_{f}S)\label{cpo1rf}\\
r_{f}+w_{p}^{\prime}(e-r_{f}S) & = & E[r_{p}]\label{cpo2rf}\\
\text{da cui \ \ \ \ \ \ \ \ \ \ \ }w_{p} & = & \lambda V^{-1}(e-r_{f}S)\label{cpo3rf}\end{eqnarray}

\end_inset

 Premoltiplicando (
\begin_inset CommandInset ref
LatexCommand ref
reference "cpo3rf"

\end_inset

) per 
\begin_inset Formula $(e-Sr_{f})^{\prime}$
\end_inset

 e risolvendo su 
\begin_inset Formula $\lambda$
\end_inset


\begin_inset Formula \[
\lambda=\left[\underset{H}{\underbrace{(e-r_{f}S)^{\prime}V^{-1}(e-r_{f}S)}}\right]^{-1}\left(E[r_{p}]-r_{f}\right)\]

\end_inset

 da cui segue che
\begin_inset Formula \begin{equation}
w_{p}=V^{-1}(e-r_{f}S)\frac{E[r_{p}]-r_{f}}{H}\label{eq4rf}\end{equation}

\end_inset

 La varianza di 
\begin_inset Formula $r_{p}$
\end_inset

:
\begin_inset Formula \begin{equation}
\sigma_{p}^{2}=w_{p}^{\prime}Vw_{p}=\frac{\left(E[r_{p}]-r_{f}\right)^{2}}{H}\label{eq5rf}\end{equation}

\end_inset

 o equivalentemente 
\begin_inset Formula \[
\sigma_{p}=\left\{ \begin{array}{c}
\ \ \frac{E[r_{p}]-r_{f}}{\sqrt{H}}\text{ se }E[r_{p}]\geq r_{f}\\
-\frac{E[r_{p}]-r_{f}}{\sqrt{H}}\text{ se }E[r_{p}]<r_{f}\end{array}\right.\]

\end_inset

 
\begin_inset Formula \[
\text{Grafico}\]

\end_inset

 
\begin_inset VSpace 6cm
\end_inset


\end_layout

\begin_layout Standard
\noindent
La frontiera di tutti gli asset è composta da due semirette originate in
 
\begin_inset Formula $\left(0,r_{f}\right)$
\end_inset

 con pendenza 
\begin_inset Formula $\sqrt{H}$
\end_inset

 e 
\begin_inset Formula $-\sqrt{H}$
\end_inset

.
 Tre i casi possibili: 
\end_layout

\begin_layout Enumerate
\begin_inset Formula $r_{f}<\frac{A}{C}$
\end_inset


\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula $T$
\end_inset

 è il punto di tangenza fra la semiretta 
\begin_inset Formula $r_{f}+\sqrt{H}\sigma$
\end_inset

 e la frontiera.
 
\end_layout

\begin_layout Itemize
Portafogli situati sul segmento 
\begin_inset Formula $\overline{r_{f}T}$
\end_inset

 consistono in una combinazione lineare convessa tra 
\begin_inset Formula $r_{f}$
\end_inset

 ed il portafoglio 
\begin_inset Formula $T$
\end_inset

.
 
\end_layout

\begin_layout Itemize
Portafogli situati sulla parte 
\begin_inset Formula $\overline{r_{f}T}^{c}$
\end_inset

 utilizzano una posizione negativa (short selling) di risk free.
 
\end_layout

\begin_layout Itemize
Posizioni sulla semiretta 
\begin_inset Formula $r_{f}-\sqrt{H}\sigma$
\end_inset

 sono costituite tramite posizioni negative (short) in 
\begin_inset Formula $T$
\end_inset

.
 
\end_layout

\end_deeper
\begin_layout Enumerate
\begin_inset Formula $r_{f}>\frac{A}{C}$
\end_inset


\end_layout

\begin_deeper
\begin_layout Standard
Situazione 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

simmetrica
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

 rispetto alla precedente.
\end_layout

\end_deeper
\begin_layout Enumerate
\begin_inset Formula $r_{f}=\frac{A}{C}$
\end_inset


\end_layout

\begin_deeper
\begin_layout Standard
In questo caso
\begin_inset Formula \begin{eqnarray*}
H & = & (e-Sr_{f})^{\prime}V^{-1}(e-Sr_{f})\\
 & = & e^{\prime}V^{-1}e-r_{f}e^{\prime}V^{-1}S-r_{f}S^{\prime}V^{-1}e+r_{f}^{2}S^{\prime}V^{-1}S\\
 & = & B-2r_{f}A+r_{f}^{2}C\\
 & = & \frac{BC-A^{2}}{C}=\frac{D}{C}>0\end{eqnarray*}

\end_inset

 dove 
\begin_inset Formula $A,B$
\end_inset

 e 
\begin_inset Formula $C$
\end_inset

 sono definiti come in precedenza.
 Otteniamo dunque che 
\begin_inset Formula $H=\frac{D}{C}$
\end_inset

 e 
\begin_inset Formula \[
E[r_{p}]=\frac{A}{C}\pm\sqrt{D/C}\sigma.\]

\end_inset

 Ma questi sono esattamente gli asintoti della parabola definita nel piano
 
\begin_inset Formula $\left(\sigma,E[r]\right)$
\end_inset

 già incontrati nel paragrafi precedenti.
 Abbiamo quindi la seguente situazione:
\begin_inset Formula \[
\text{Grafico}\]

\end_inset

 
\begin_inset VSpace 6cm
\end_inset


\end_layout

\begin_layout Standard
La frontiera di tutti gli asset non è generata da una combinazione tra il
 riskless asset ed un portafoglio di asset rischiosi.
 Infatti, sostituendo nella (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq4rf"

\end_inset

) 
\begin_inset Formula $r_{f}=\frac{A}{C}$
\end_inset

 e premoltiplicando 
\begin_inset Formula $w_{p}$
\end_inset

 per 
\begin_inset Formula $S^{\prime}$
\end_inset


\begin_inset Formula \begin{eqnarray*}
S^{\prime}w_{p} & = & S^{\prime}V^{-1}(e-\frac{A}{C}S)\frac{E[r_{p}]-r_{f}}{H}\\
 & = & (A-\frac{A}{C}C)\frac{E[r_{p}]-r_{f}}{H}\\
 & = & 0\end{eqnarray*}

\end_inset

 Quindi un qualsiasi portafoglio sulla frontiera di tutti gli asset è costruito
 investendo tutto nel risk free asset e tenendo un cosìddetto 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

arbitrage portfolio
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

: un portafoglio i cui pesi sommano a zero.
\end_layout

\end_deeper
\begin_layout Subsection
La Security market line rivista
\end_layout

\begin_layout Standard
Sia 
\begin_inset Formula $q$
\end_inset

 un qualsiasi portafoglio e 
\begin_inset Formula $w_{q}$
\end_inset

 i rispettivi pesi delle componenti a rischio.
 Sia 
\begin_inset Formula $p$
\end_inset

 un portafolio frontiera.
 Assumiamo che 
\begin_inset Formula $E[r_{p}]\neq r_{f}.$
\end_inset

 Allora
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
In quanto per la 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq4rf"

\end_inset

 
\begin_inset Formula $w_{p}=V^{-1}(e-r_{f}S)\frac{E[r_{p}]-r_{f}}{H}$
\end_inset

 e quindi 
\begin_inset Formula \[
Cov(r_{q},r_{p})=w_{q}^{\prime}VV^{-1}(e-r_{f}S)\frac{E[r_{p}]-r_{f}}{H}.\]

\end_inset

 Terminate utilizzando la 
\begin_inset CommandInset ref
LatexCommand ref
reference "vincoli somma pesi e rendimento rf"

\end_inset

.
\end_layout

\end_inset

 
\begin_inset Formula \[
Cov(r_{q},r_{p})=w_{q}^{\prime}Vw_{p}=\frac{\left(E[r_{q}]-r_{f}\right)\left(E[r_{p}]-r_{f}\right)}{H}\]

\end_inset

 Utilizzando ora la (
\begin_inset CommandInset ref
LatexCommand ref
reference "eq5rf"

\end_inset

), cioè 
\begin_inset Formula $\sigma_{p}^{2}=\frac{\left(E[r_{p}]-r_{f}\right)^{2}}{H}$
\end_inset

 otteniamo
\begin_inset Formula \begin{eqnarray*}
Cov(r_{q},r_{p}) & = & \frac{\left(E[r_{q}]-r_{f}\right)\left(E[r_{p}]-r_{f}\right)}{H}\ \ \ \mid:\sigma_{p}^{2}\\
\frac{Cov(r_{q},r_{p})}{\sigma_{p}^{2}} & = & \frac{\left(E[r_{q}]-r_{f}\right)}{\left(E[r_{p}]-r_{f}\right)}\end{eqnarray*}

\end_inset

 da cui è immediato ottenere
\begin_inset Formula \begin{equation}
E[r_{q}]=r_{f}+\beta_{qp}\left(E[r_{p}]-r_{f}\right)\end{equation}

\end_inset

 Questa relazione è indipendente dal segno di 
\begin_inset Formula $\frac{A}{C}-r_{f}$
\end_inset

.
 Inoltre vale la seguente relazione
\begin_inset Formula \[
r_{q}=r_{f}+\beta_{qp}\left(r_{p}-r_{f}\right)+\widetilde{\epsilon}_{qp}\]

\end_inset

 dove 
\begin_inset Formula $\widetilde{\epsilon}_{qp}:=r_{q}-r_{f}-\beta_{qp}\left(r_{p}-r_{f}\right)$
\end_inset

.
 È immediato verificare che per qualsiasi portafoglio frontiera 
\begin_inset Formula $p$
\end_inset

 diverso 
\begin_inset Formula $r_{f}$
\end_inset

 vale che 
\begin_inset Formula $Cov(\widetilde{\epsilon}_{qp},r_{p})=E(\widetilde{\epsilon}_{qp})=0$
\end_inset

.
\end_layout

\begin_layout Subsection
CAPM
\end_layout

\begin_layout Standard
Vogliamo derivare le conclusioni del Capital Asset Pricing Model che postula
 una relazione d'equilibrio di tipo lineare fra i rendimenti attesi di mercato.
 Definiamo il portafoglio di mercato, ovvero l'insieme degli asset trattati
 in un'economia.
 Sia 
\begin_inset Formula $W_{i}$
\end_inset

 il patrimonio dell'
\begin_inset Formula $i-$
\end_inset

esimo individuo, 
\begin_inset Formula $i=1,...,I$
\end_inset

 mentre 
\begin_inset Formula $w_{ij}$
\end_inset

 la percentuale del suo patrimonio investita nel 
\begin_inset Formula $j-$
\end_inset

esimo asset, 
\begin_inset Formula $j=1,...,N$
\end_inset

.
 La sostanza totale nell'economia è dunque 
\begin_inset Formula \[
W:=\sum_{i=1}^{I}W_{i}\]

\end_inset

 Definiamo ora 
\begin_inset Formula $w_{j}^{m}$
\end_inset

 come la percentuale del valore dell'asset 
\begin_inset Formula $j$
\end_inset

 sul totale della sostanza 
\begin_inset Formula $W$
\end_inset

.
 Esemplificando, supponiamo che gli unici assets siano quelli trattati nell'indi
ce Swiss Market Index
\begin_inset Foot
status open

\begin_layout Plain Layout
Si veda a tal proposito quanto discusso nell'Esercizio 
\begin_inset CommandInset ref
LatexCommand ref
reference "Esercizio 1"

\end_inset

 .
\end_layout

\end_inset

.
 
\begin_inset Formula $W$
\end_inset

 sarà quindi la capitalizzazione totale dell'indice mentre 
\begin_inset Formula $w_{ubs}^{m}$
\end_inset

 sarà il valore totale delle azioni 
\begin_inset Formula $ubs$
\end_inset

 divise per la capitalizzazione dell'indice.
 È chiaro che 
\begin_inset Formula $\sum_{j}w_{j}^{m}=1$
\end_inset

.
 I pesi 
\begin_inset Formula $w_{j}^{m}$
\end_inset

 sono chiamati i pesi del portafoglio di mercato.
 Affinché il mercato sia in equilibrio dovrà essere
\begin_inset Formula \begin{equation}
\underset{\text{domanda aggregata }j-esimo\text{ asset}}{\underbrace{\sum_{i=1}^{I}W_{i}w_{ij}}}=\underset{\text{capitaliz. }j-esimo\text{ asset}}{\underbrace{w_{j}^{m}W}}\end{equation}

\end_inset

 Dividendo entrambi i lati per 
\begin_inset Formula $W$
\end_inset

 otteniamo
\begin_inset Formula \begin{equation}
\sum_{i=1}^{I}\underset{c_{i}\text{ = \% sostanza i-esimo individuo}}{\underbrace{\frac{W_{i}}{W}}\ \ w_{ij}}=w_{j}^{m}\label{combinazione convessa portafoglio mercato}\end{equation}

\end_inset

 Notiamo che 
\begin_inset Formula $c_{i}=\frac{W_{i}}{W}\geq0$
\end_inset

 e 
\begin_inset Formula $\sum_{i=1}^{I}c_{i}=1$
\end_inset

.
 Inoltre, poiché questa relazione vale per tutti gli asset 
\begin_inset Formula $j$
\end_inset

, essa può essere riformulata in termini vettoriali.
 Definendo 
\begin_inset Formula $w_{i}$
\end_inset

 e 
\begin_inset Formula $w^{m}$
\end_inset

 rispettivamente come il vettore dei pesi del portafoglio dell'
\begin_inset Formula $i-$
\end_inset

esimo individuo ed il vettore dei pesi del portafoglio di mercato, la condizione
 d'equilibrio 
\begin_inset CommandInset ref
LatexCommand ref
reference "combinazione convessa portafoglio mercato"

\end_inset

 può essere riscritta nel modo seguente:
\begin_inset Formula \begin{equation}
\sum_{i=1}^{I}\underset{(1\times1)}{c_{i}}\underset{(N\times1)}{w_{i}}=\underset{(N\times1)}{w_{m}}\ .\label{equilibrio capm}\end{equation}

\end_inset

 Quest'ultima equazione esprime la condizione d'equilibrio fra domanda ed
 offerta di titoli ed afferma che, in equilibrio, il portafoglio di mercato
 (lato destro della 
\begin_inset CommandInset ref
LatexCommand ref
reference "equilibrio capm"

\end_inset

) è una combinazione lineare convessa dei portafogli dei singoli individui.
 Ora, se ogni individuo ha un portafoglio efficiente, per le proprietà viste
 negli esercizi 
\begin_inset CommandInset ref
LatexCommand ref
reference "esercizio1 proprieta frontiera"

\end_inset

 e 
\begin_inset CommandInset ref
LatexCommand ref
reference "esercizio2 proprieta frontiera"

\end_inset

 anche il portafoglio di mercato sarà sulla frontiera nonché efficiente.
 In particolare, esso sarà il portafoglio di tangenza 
\begin_inset Formula $T$
\end_inset

 visto nel paragrafo precedente.
\begin_inset Formula \[
\text{Grafico}\]

\end_inset

 
\begin_inset VSpace 6cm
\end_inset


\end_layout

\begin_layout Chapter
The Lognormal Distribution
\end_layout

\begin_layout Section
Introduzione: il cammino dei prezzi azionari
\end_layout

\begin_layout Standard
In questo capitolo ci proponiamo di modellare la dinamica nel tempo del
 prezzo di un'azione.
 È evidente che il prezzo futuro di un'azione (fra un giorno, un mese, un
 anno, o anche solo fra un minuto) è aleatorio, esso non è determinabile
 con assoluta certezza.
 Il modello quindi non potrà essere deterministico.
\end_layout

\begin_layout Standard
Quali sono le proprietà desiderabili per un modello aleatorio del prezzo
 di un'azione? Se utilizzassimo un modello di probabilità, quali caratteristiche
 dovrebbe avere la distribuzione del prezzo al tempo 
\begin_inset Formula $t$
\end_inset

? Inoltre, come evolve il prezzo nel tempo e quindi come cambia la sua distribuz
ione?
\end_layout

\begin_layout Standard
Analizzando i prezzi osservabili sui vari mercati finanziari possiamo identifica
re alcune caratteristiche che li contraddistinguono e che il modello probabilist
ico dovrebbe riuscire a descrivere.
 
\end_layout

\begin_layout Enumerate
I prezzi cambiano con continuità: tanto più piccolo è l'arco di tempo fra
 un'osservazione e l'altra e tanto minore sarà la variazione nel prezzo
 dell'azione.
 
\end_layout

\begin_layout Enumerate
Il prezzo non è mai negativo (può essere 0 in caso di fallimento della ditta
 ma in tal caso non è più osservato).
 
\end_layout

\begin_layout Enumerate
Il rendimento atteso di un investimento azionario tende a crescere tanto
 più il titolo è tenuto in portafoglio.
 
\end_layout

\begin_layout Enumerate
L'incertezza associata al rendimento di un investimento azionario tende
 a crescere all'aumentare della durata dell'investimento stesso.
 La varianza del prezzo aumenta nel tempo! 
\end_layout

\begin_layout Standard
Possiamo disegnare il grafico a frequenza giornaliera dei prezzi di ADECCO.
 Questo grafico è anche chiamato 
\begin_inset Quotes eld
\end_inset

the stock price path”.
 Esso rappresenta il cammino effettivamente realizzato fra gli infiniti
 cammini che, ex-ante, avrebbero potuto realizzarsi.
\end_layout

\begin_layout Standard
È bene osservare quanto segue:
\begin_inset space \space{}
\end_inset

in realtà quando costruiamo il grafico dei prezzi di una qualsiasi azione
 noi stiamo rappresentando le realizzazioni di 
\begin_inset Formula $n$
\end_inset

 variabili aleatorie, dove 
\begin_inset Formula $n$
\end_inset

 rappresenta il numero di giorni osservati.
 Infatti, ad ogni data 
\begin_inset Formula $t$
\end_inset

 noi osserviamo la realizzazione di 
\begin_inset Formula $P_{t}$
\end_inset

, la cui distribuzione non necessariamente sarà uguale alla distribuzione
 di 
\begin_inset Formula $P_{t-1}$
\end_inset

 o 
\begin_inset Formula $P_{t+1}$
\end_inset

.
 A dipendenza del modello probabilistico utilizzato per descrivere la dinamica
 temporale dei prezzi le distribuzioni di 
\begin_inset Formula $P_{t}$
\end_inset

 e 
\begin_inset Formula $P_{t+1}$
\end_inset

 potranno variare.
 Inoltre, talvolta è necessario calcolare la distribuzione congiunta di
 due o più prezzi a date differenti, come ad esempio 
\begin_inset Formula $P_{t}$
\end_inset

 e 
\begin_inset Formula $P_{t+20}$
\end_inset

.
\end_layout

\begin_layout Standard
Supponiamo di avere a disposizione un modello probabilistico ed essere in
 grado di simulare i cammini del processo dei prezzi 
\begin_inset Formula $\left\{ P_{t}\right\} _{t=1}^{n}$
\end_inset

.
 Potremmo allora, quale esercizio, simulare 
\begin_inset Formula $M=1000$
\end_inset

 cammini 
\begin_inset Formula $\left\{ P_{t}^{s}\right\} _{t=1}^{n}$
\end_inset

, 
\begin_inset Formula $s=1,...,M$
\end_inset

 indipendenti l'uno dall'altro ed in seguito, per una qualsiasi data 
\begin_inset Formula $\widetilde{t}$
\end_inset

, stimare valore atteso e varianza di 
\begin_inset Formula $P_{\widetilde{t}}$
\end_inset

 utilizzando le 
\begin_inset Formula $M$
\end_inset

 realizzazioni simulate disponibili per quella data.
 Dalla teoria asintotica sappiamo che al crescere di 
\begin_inset Formula $M$
\end_inset

 la media 
\begin_inset Formula $\frac{1}{M}\sum_{s=1}^{M}P_{\widetilde{t}}^{s}$
\end_inset

 convergerà ad 
\begin_inset Formula $E(P_{\widetilde{t}})$
\end_inset

 e la varianza stimata convergerà alla varianza 
\begin_inset Formula $Var(P_{\widetilde{t}})$
\end_inset

.
\end_layout

\begin_layout Standard
In realtà l'economia genera un solo ed unico cammino, cioè 
\begin_inset Formula $M=1$
\end_inset

.
 La vita non permette di tornare indietro nel tempo e ripetere l'esperimento.
 Per tale motivo non è possibile stimare il valore atteso del prezzo o la
 volatilità del rendimento di una qualsiasi data 
\begin_inset Formula $\widetilde{t}$
\end_inset

 facendo una media di osservazioni: alla data 
\begin_inset Formula $\widetilde{t}$
\end_inset

 abbiamo un'unica osservazione! Sarà necessario appoggiarsi alle proprietà
 del modello di probabilità che noi supponiamo generi le osservazioni.
 In un primo passo, utilizzando i dati a disposizione, si stimeranno i parametri
 del modello dai quali, in una seconda fase, si dedurranno le informazioni
 cercate.
\end_layout

\begin_layout Section
Flashback: Funzione di ripartizione, di densità, quantile
\end_layout

\begin_layout Standard
A una variabile aleatoria 
\begin_inset Formula $X$
\end_inset

 (continua o dicreta) è sempre associata un distribuzione (o legge) di probabili
tà 
\begin_inset Formula $P$
\end_inset

, ovvero una funzione che assegna la probabilità che 
\begin_inset Formula $X$
\end_inset

 assuma singoli valori (nel caso discreto) oppure che cada in singoli intervalli
 di valori (nel caso continuo).
\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{esempio}
\end_layout

\end_inset

 La legge di probabilità di Poisson si indica con 
\begin_inset Formula $P(\lambda)$
\end_inset

 e per qualsiasi evento 
\begin_inset Formula $A\subset\left\{ 0,1,2,\ldots\right\} $
\end_inset

 è data dall'espressione:
\begin_inset Formula \[
P_{X}(A)=\sum_{k\in A}\frac{\exp(-\lambda)\lambda^{k}}{k!}\ .\]

\end_inset

 
\begin_inset space \hfill{}
\end_inset


\begin_inset Formula $\square$
\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{esempio}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset VSpace medskip
\end_inset

 Tramite la legge di probabilità 
\begin_inset Formula $P$
\end_inset

 possiamo definire la cosiddetta funzione di ripartizione, notata 
\begin_inset Formula $F_{X}$
\end_inset

.
\end_layout

\begin_layout Standard
\noindent
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{definizione}
\end_layout

\end_inset

 La funzione di ripartizione della variabile aleatoria 
\begin_inset Formula $X$
\end_inset

 è la funzione 
\begin_inset Formula \[
F_{X}:\mathbb{R}\rightarrow\lbrack0,1]\]

\end_inset

 tale che per ogni 
\begin_inset Formula $x\in\mathbb{R}$
\end_inset


\begin_inset Formula \[
F_{X}(x)=P\left(X\in\left(-\infty,x\right]\right)\ .\]

\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{definizione}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{remark}
\end_layout

\end_inset

 Quando è chiaro a quale variabile aleatoria ci si riferisce si può semplicement
e scrivere 
\begin_inset Formula $F$
\end_inset

 anziché 
\begin_inset Formula $F_{X}$
\end_inset

.
 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{remark}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{definizione}
\end_layout

\end_inset

 Una funzione di ripartizione 
\begin_inset Formula $F$
\end_inset

 è detta assolutamente continua se esite una funzione non negativa 
\begin_inset Formula $f$
\end_inset

 tale che
\begin_inset Formula \[
F(x)=\int_{-\infty}^{x}f(y)dy\ .\]

\end_inset

 La funzione 
\begin_inset Formula $f$
\end_inset

 è chiamata funzione di densità di 
\begin_inset Formula $F$
\end_inset

.
 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{definizione}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{esempio}
\end_layout

\end_inset

 Sia 
\begin_inset Formula $X\sim N(\mu,\sigma^{2}).$
\end_inset

 La funzione di densità è uguale a
\begin_inset Formula \[
f(x)=\frac{1}{\sqrt{2\pi}\sigma}\exp\left(-\frac{1}{2\sigma^{2}}(x-\mu)^{2}\right)\ .\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset space \hfill{}
\end_inset


\begin_inset Formula $\square$
\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{esempio}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset VSpace medskip
\end_inset

 Variabili aleatorie aventi una funzione di ripartizione assolutamente continua
 presentano alcuni vantaggi pratici per quanto riguarda il calcolo delle
 probabilità.
 Infatti, dato un qualsiasi intervallo 
\begin_inset Formula $A=\left[a,b\right]$
\end_inset

 
\begin_inset Formula \[
P\left(X\in A\right)=\int_{a}^{b}f(y)dy\ .\]

\end_inset

 Notate che non sempre è possibile ottenere una soluzione in forma analitica
 dell'integrale precedente.
 In taluni casi, come ad esempio con la distribuzione normale, il valore
 dell'integrale deve essere approssimato tramite procedure numeriche.
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{definizione}
\end_layout

\end_inset

 Per semplicità consideriamo variabili aleatore le cui funzioni di ripartizione
 
\begin_inset Formula $F$
\end_inset

 sono assolutamente continue e 
\emph on
strettamente
\emph default
 crescenti
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Se 
\begin_inset Formula $F$
\end_inset

 possiede dei punti di discontinuità o non è strettamente crescente occorre
 modificare la definizione di quantile nel modo seguente:
\begin_inset Formula \[
q_{\alpha}=\inf\left\{ x\in\mathbb{R}:\alpha\leq F(x)\right\} \text{.}\]

\end_inset

 
\end_layout

\end_inset

.
 Per tali 
\begin_inset Formula $V.A.$
\end_inset

 la funzione quantile è definita per 
\begin_inset Formula $\alpha\in\left(0,1\right)$
\end_inset

 come 
\begin_inset Formula \[
q_{\alpha}=F^{-1}(\alpha)~.\]

\end_inset

 Data la variabile aleatoria 
\begin_inset Formula $X$
\end_inset

 varrà quindi che 
\begin_inset Formula $q_{\alpha}$
\end_inset

 soddisfa la seguente identità:
\begin_inset Formula \[
P(X\leq q_{\alpha})=\alpha\]

\end_inset

 
\begin_inset VSpace medskip
\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{definizione}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{esempio}
\end_layout

\end_inset

 La funzione di ripartizione di una variabile aleatoria 
\begin_inset Formula $X$
\end_inset

 distribuita secondo la legge esponenziale è uguale a 
\begin_inset Formula \[
F(x)=\left\{ \begin{array}{cc}
0 & x<0\\
1-\exp(-\lambda x) & x\geq0\end{array}\right.\]

\end_inset

 dove 
\begin_inset Formula $\lambda>0$
\end_inset

 è un parametro detto intensità.
 La funzione quantile è uguale a 
\begin_inset Formula \[
q_{\alpha}=F^{-1}(\alpha)=-\frac{\ln(1-\alpha)}{\lambda}\ .\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset space \hfill{}
\end_inset


\begin_inset Formula $\square$
\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{esempio}
\end_layout

\end_inset

 
\begin_inset VSpace medskip
\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{theorem}
\end_layout

\end_inset

 
\begin_inset CommandInset label
LatexCommand label
name "densita di funzioni di VA"

\end_inset

Densità di funzioni di 
\begin_inset Formula $V.A.$
\end_inset

.
 Sia 
\begin_inset Formula $X$
\end_inset

 una variabile aleatoria assolutamente continua con funzione di densità
 
\begin_inset Formula $f_{X}$
\end_inset

.
 Definiamo la nuova variabile aleatoria 
\begin_inset Formula \[
Y=g(X)\]

\end_inset

 dove 
\begin_inset Formula $g$
\end_inset

 è una funzione biiettiva, derivabile e con funzione inversa 
\begin_inset Formula $g^{-1}$
\end_inset

.
 Allora 
\begin_inset Formula $Y$
\end_inset

 è variabile aleatoria assolutamente continua con funzione di densità 
\begin_inset Formula \[
f_{Y}(y)=f_{X}(g^{-1}(y))\ \mid\left(g^{-1}\right)^{\prime}(y)\mid~.\]

\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{theorem}
\end_layout

\end_inset


\end_layout

\begin_layout Section
La distribuzione lognormale
\end_layout

\begin_layout Standard

\series bold
Definizione
\series default
: Una variabile casuale 
\begin_inset Formula $X$
\end_inset

 ha distribuzione lognormale, con parametri 
\begin_inset Formula $a$
\end_inset

 e 
\begin_inset Formula $b^{2}$
\end_inset

, se 
\begin_inset Formula $\ln(X)$
\end_inset

 ha distribuzione normale con media 
\begin_inset Formula $a$
\end_inset

 e varianza 
\begin_inset Formula $b^{2}$
\end_inset

.
 Equivalentemente 
\begin_inset Formula $X=\exp(Y)$
\end_inset

 dove 
\begin_inset Formula $Y\sim N(a,b^{2})$
\end_inset

.
 
\end_layout

\begin_layout Itemize
Funzione di densità:
\end_layout

\begin_deeper
\begin_layout Standard
La distribuzione lognormale ha densità uguale a 
\begin_inset Formula \[
f(x)=\exp\{-\frac{\left(ln(x)-a\right)^{2}}{2b^{2}}\}/\left(x\sqrt{2\pi}b\right)\text{ per }x>0\text{.}\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Funzione di ripartizione:
\end_layout

\begin_deeper
\begin_layout Standard
E' possibile dimostrare (vedi serie esercizi)
\begin_inset space \space{}
\end_inset

che la sua funzione di ripartizione è data da 
\begin_inset Formula \[
F(x)=G\{[-a+ln(x)]/b\}\text{ per }x>0\text{,}\]

\end_inset

 dove 
\begin_inset Formula $G$
\end_inset

 rappresenta la funzione di ripartizione della distribuzione normale standard,
 cioè
\begin_inset space \space{}
\end_inset


\begin_inset Formula $N(0,1)$
\end_inset

.
\end_layout

\end_deeper
\begin_layout Itemize
Funzione quantile:
\end_layout

\begin_deeper
\begin_layout Standard
La funzione quantile di una variabile aleatoria lognormale è data da 
\begin_inset Formula \[
F^{-1}(\alpha)=exp\left[a+bG^{-1}(\alpha)\right]\text{ per }0<\alpha<1.\]

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
Valore atteso e varianza in funzione dei parametri 
\begin_inset Formula $a$
\end_inset

 e 
\begin_inset Formula $b^{2}$
\end_inset


\end_layout

\begin_deeper
\begin_layout Itemize
Il valore atteso di una variabile aleatoria lognormale è uguale a 
\begin_inset Formula \[
E(X)=exp(a+b^{2}/2).\]

\end_inset


\end_layout

\begin_layout Itemize
La varianza è uguale a 
\begin_inset Formula \[
V(X)=exp[2(a+b^{2})]-exp(2a+b^{2}).\]

\end_inset

 
\end_layout

\end_deeper
\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{esercizio}
\end_layout

\end_inset

 Distribuzione lognormale.
 Utilizzando il Teorema 
\begin_inset CommandInset ref
LatexCommand ref
reference "densita di funzioni di VA"

\end_inset

: 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{esercizio}
\end_layout

\end_inset

 
\end_layout

\begin_layout Enumerate
Derivate la funzione di densità di 
\begin_inset Formula $Y=\exp(X)$
\end_inset

 dove 
\begin_inset Formula $X\sim N(\mu,\sigma^{2})$
\end_inset

.
 
\end_layout

\begin_layout Enumerate
Mostrate che la funzione di ripartizione di 
\begin_inset Formula $Y$
\end_inset

 può essere scritta come 
\begin_inset Formula \[
F(y)=G\{[-\mu+ln(y)]/\sigma\}\text{ per }y>0\text{,}\]

\end_inset

 dove 
\begin_inset Formula $G$
\end_inset

 rappresenta la funzione di ripartizione della distribuzione normale 
\emph on
standard
\emph default
.
\end_layout

\begin_deeper
\begin_layout Standard
Suggerimento: Sappiamo che 
\begin_inset Formula $F(y)=P(Y\leq y)=P(\exp(X)\leq y)$
\end_inset

 \SpecialChar \ldots{}

\end_layout

\end_deeper
\begin_layout Enumerate
Ricavate la funzione quantile di 
\begin_inset Formula $Y$
\end_inset

 
\begin_inset Formula \[
q_{\alpha}=F^{-1}(\alpha)=exp\left[\mu+\sigma G^{-1}(\alpha)\right]\text{ per }0<\alpha<1.\]

\end_inset


\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset space \hfill{}
\end_inset


\begin_inset Formula $\square$
\end_inset


\end_layout

\end_deeper
\begin_layout Section
Simulazione di variabili aleatorie
\end_layout

\begin_layout Standard
La funzione 
\emph on
rand()
\emph default
 di MS
\begin_inset space \space{}
\end_inset

Excel permette di generare un numero aleatorio estratto da una distribuzione
 uniforme 
\begin_inset Formula $\left[0,1\right]$
\end_inset

.
 Per la precisione, leggendo la pagina d'aiuto della funzione stessa si
 scopre che i numeri generati saranno compresi nell'intervallo 
\begin_inset Formula $\left[0,1\right)$
\end_inset

.
 Per generare 
\begin_inset Formula $N$
\end_inset

 variabili uniformi indipendenti sarà dunque sufficiente applicare la funzione
 
\emph on
rand()
\emph default
 ad 
\begin_inset Formula $N$
\end_inset

 celle.
\end_layout

\begin_layout Standard
Una seconda possibilità per generare numeri aleatori in Excel è quella di
 utilizzare il comando del menu 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset


\series bold
Tools 
\begin_inset Formula $\vert$
\end_inset

 Data
\series default
 
\series bold
Analysis...
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

 
\series default
e poi
\series bold

\begin_inset space \space{}
\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

Random Number Generation
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset


\series default
.
 Questo comando permette di simulare matrici di variabili aleatore campionando
 non solo dalla distribuzione uniforme 
\begin_inset Formula $\left[0,1\right)$
\end_inset

 ma da tutta una serie di distribuzioni discrete e non.
 Di particolare interesse è la casella 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset


\series bold
Random seed
\series default

\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

.
 Il valore in essa contenuto serve ad inizializzare il generatore di numeri
 aleatori (in realtà si tratta di una funzione deterministica ...).
 In pratica, due simulazioni aventi il medesimo Random seed saranno identiche.
 Se la casella Random seed viene lasciata vuota si otterranno simulazioni
 diverse.
\end_layout

\begin_layout Subsubsection
Una procedura generale
\end_layout

\begin_layout Standard
E' possibile generare numeri aleatori campionati dalla distribuzione desiderata
 utilizzando la funzione quantile corrispondente abbinata ad un generatore
 
\begin_inset Formula $U\left[0,1\right]$
\end_inset

.
 L'idea, molto semplice, è la seguente: 
\end_layout

\begin_layout Itemize
Dapprima simuliamo un'osservazione da 
\begin_inset Formula $U\left[0,1\right]$
\end_inset

: 
\begin_inset Formula $X\sim U\left[0,1\right]$
\end_inset

 
\end_layout

\begin_layout Itemize
In un secondo tempo calcoliamo 
\begin_inset Formula $Y=F^{-1}\left(X\right)$
\end_inset

, dove 
\begin_inset Formula $F^{-1}$
\end_inset

 è la funzione quantile della distribuzione desiderata.
 
\end_layout

\begin_layout Standard
\noindent
La variabile aleatoria 
\begin_inset Formula $Y=F^{-1}\left(X\right)$
\end_inset

 ha dunque quale funzione di distribuzione 
\begin_inset Formula $F$
\end_inset

.
 Per dimostrare questo basta notare che 
\begin_inset Formula \[
P(Y\leq c)\underset{(1)}{=}P(F^{-1}\left(X\right)\leq c)\underset{(2)}{=}P(X\leq F(c))\underset{(3)}{=}F(c)\]

\end_inset

 Il primo uguale si ottiene inserendo la definizione di 
\begin_inset Formula $Y$
\end_inset

, il secondo applicando 
\begin_inset Formula $F$
\end_inset

 ad entrambi i lati della disuguaglianza e l'ultimo è una semplice conseguenza
 del fatto che 
\begin_inset Formula $X$
\end_inset

 è una variabile aleatoria uniforme 
\begin_inset Formula $\left[0,1\right]$
\end_inset

.
\end_layout

\begin_layout Section
The Geometric random walk with drift
\end_layout

\begin_layout Standard
Indichiamo come d'abitudine il prezzo al tempo 
\begin_inset Formula $t$
\end_inset

 di un'azione con 
\begin_inset Formula $P_{t}$
\end_inset

 (poiché consideriamo una sola azione evitiamo l'uso dell'indice 
\begin_inset Formula $i$
\end_inset

).
 Sia invece 
\begin_inset Formula $\Delta t$
\end_inset

 un intervallo di tempo, ad esempio un giorno, espresso nell'unità di misura
 di 
\begin_inset Formula $t$
\end_inset

.
 Supponiamo che il prezzo 
\begin_inset Formula $P_{t}$
\end_inset

 segua un processo del tipo 
\begin_inset Formula \begin{equation}
P_{t+\Delta t}=P_{t}\exp(\mu\Delta t+\sigma\sqrt{\Delta t}\varepsilon_{t+\Delta t}),\text{ \ \ }\varepsilon_{t}\sim i.i.d.~N(0,1),~\sigma>0.\label{delta_t}\end{equation}

\end_inset

 I parametri 
\begin_inset Formula $\mu$
\end_inset

 e 
\begin_inset Formula $\sigma$
\end_inset

 sono chiamati rispettivamente termine di 
\emph on
drift
\emph default
 e termine di 
\emph on
diffusione
\emph default
 (o di volatilità).
 Come osservato in Benninga, se ponessimo il termine di diffusione uguale
 a 
\begin_inset Formula $0$
\end_inset

 il modello si ridurrebbe ad un'equazione deterministica: 
\begin_inset Formula \[
P_{t+\Delta t}=P_{t}\exp(\mu\Delta t),\]

\end_inset

 il prezzo dell'azione crescerebbe in modo esponenziale ad un tasso composto
 continuamente 
\begin_inset Formula $\mu$
\end_inset

.
 Il rendimento logaritmico fra 
\begin_inset Formula $t$
\end_inset

 e 
\begin_inset Formula $t+\Delta t$
\end_inset

 è appunto pari a 
\begin_inset Formula $\ln(P_{t+\Delta t}/P_{t})=\mu\Delta t$
\end_inset

.
 Quando 
\begin_inset Formula $\sigma>0$
\end_inset

 il rendimento è aleatorio: 
\begin_inset Formula $P_{t+\Delta t}/P_{t}$
\end_inset

 ha distribuzione lognormale e la sua varianza dipende da 
\begin_inset Formula $\Delta t$
\end_inset

 e da 
\begin_inset Formula $\sigma$
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{esercizio}
\end_layout

\end_inset

 Dimostrate che se i prezzi sono generati dall'equazione 
\begin_inset CommandInset ref
LatexCommand ref
reference "delta_t"

\end_inset

, condizionatamente a 
\begin_inset Formula $P_{t}$
\end_inset

 il prezzo 
\begin_inset Formula $P_{t+\Delta t}$
\end_inset

 è distribuito secondo la legge lognormale.
 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{esercizio}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
L'intervallo temporale 
\begin_inset Formula $\Delta t$
\end_inset

 può essere interpretato come la distanza di tempo fra un'osservazione e
 l'altra (intervallo di campionamento)
\begin_inset space \space{}
\end_inset

e (
\begin_inset CommandInset ref
LatexCommand ref
reference "delta_t"

\end_inset

) è l'equazione che descrive la dinamica dei prezzi osservati a tali istanti
 temporali.
 Gli indici temporali dei prezzi osservati saranno nell'insieme 
\begin_inset Formula $\left(\ldots,\ t-\Delta t,\ t,\ t+\Delta t,\ t+2\Delta t,\ldots\right)$
\end_inset

.
 E' questa una notazione un po' insolita in quanto generalmente 
\begin_inset Formula $\Delta t=1$
\end_inset

.
 In realtà si tratta solo di un modo diverso e più generale di indicizzare
 le osservazioni.
\end_layout

\begin_layout Subsection
Caratteristiche del modello
\end_layout

\begin_layout Standard
Il modello (
\begin_inset CommandInset ref
LatexCommand ref
reference "delta_t"

\end_inset

) presenta alcune interessanti proprietà che vogliamo analizzare.
 Innanzi tutto osserviamo che, applicando il logaritmo naturale ad entrambi
 i lati della (
\begin_inset CommandInset ref
LatexCommand ref
reference "delta_t"

\end_inset

), il modello può essere scritto come 
\begin_inset Formula \[
\ln(P_{t+\Delta t})=\ln(P_{t})+\mu\Delta t+\sigma\sqrt{\Delta t}\varepsilon_{t+\Delta t}\]

\end_inset

 e ridefinendo appropriatamente i termini otteniamo 
\begin_inset Formula \begin{equation}
X_{t+\Delta t}=X_{t}+\widetilde{\mu}+\widetilde{\varepsilon}_{t+\Delta t}\text{.}\label{notazione_semplificata}\end{equation}

\end_inset

 Si tratta di un caso particolare del famoso modello 
\begin_inset Formula $AR(1)$
\end_inset

 già incontrato nella parte comune di questo corso.
 In questo caso il coefficiente della variabile ritardata è uguale a 1.
 In letteratura questo modello prende il nome di 
\emph on
random walk con drift
\emph default
.
 Il termine random walk (cammino aleatorio) deriva dal fatto che la dinamica
 di questo modello è puramente casuale.
 La costante 
\begin_inset Formula $\widetilde{\mu}$
\end_inset

, detta appunto drift, genera in 
\begin_inset Formula $X$
\end_inset

 una tendenza a crescere (quando 
\begin_inset Formula $\widetilde{\mu}>0$
\end_inset

 ovviamente).
\end_layout

\begin_layout Standard
\noindent
Utilizzando la (
\begin_inset CommandInset ref
LatexCommand ref
reference "notazione_semplificata"

\end_inset

), sviluppiamo in modo ricorsivo 
\begin_inset Formula \begin{eqnarray*}
X_{t+\Delta t} & = & X_{t}+\widetilde{\mu}+\widetilde{\varepsilon}_{t+\Delta t}\text{,}\\
X_{t+2\Delta t} & = & X_{t+\Delta t}+\widetilde{\mu}+\widetilde{\varepsilon}_{t+2\Delta t}=X_{t}+2\widetilde{\mu}+\widetilde{\varepsilon}_{t+2\Delta t}+\widetilde{\varepsilon}_{t+\Delta t}\text{,}\\
X_{t+3\Delta t} & = & X_{t+2\Delta t}+\widetilde{\mu}+\widetilde{\varepsilon}_{t+3\Delta t}=X_{t}+3\widetilde{\mu}+\widetilde{\varepsilon}_{t+3\Delta t}+\widetilde{\varepsilon}_{t+2\Delta t}+\widetilde{\varepsilon}_{t+\Delta t}\text{,}\end{eqnarray*}

\end_inset

 e in questo modo dopo 
\begin_inset Formula $n$
\end_inset

 passi avremo che 
\begin_inset Formula \begin{equation}
X_{t+n\Delta t}=X_{t}+n\widetilde{\mu}+\sum_{i=1}^{n}\widetilde{\varepsilon}_{t+i\Delta t}\label{random_walk_sviluppato}\end{equation}

\end_inset

 
\begin_inset Formula $X_{t+n\Delta t}$
\end_inset

 è dunque composto da tre termini: 
\end_layout

\begin_layout Itemize
\begin_inset Formula $X_{t}$
\end_inset

: il valore del processo al tempo 
\begin_inset Formula $t$
\end_inset

 che sarà aleatorio se non osservato o deterministico (conosciuto) se osservato
 
\end_layout

\begin_layout Itemize
\begin_inset Formula $n\widetilde{\mu}$
\end_inset

: la costante deterministica 
\begin_inset Formula $n\widetilde{\mu}$
\end_inset

 
\end_layout

\begin_layout Itemize
\begin_inset Formula $\sum_{i=1}^{n}\widetilde{\varepsilon}_{t+i\Delta t}$
\end_inset

: un ultimo termine aleatorio composto dalla somma degli errori degli ultimi
 
\begin_inset Formula $n$
\end_inset

 periodi.
 
\end_layout

\begin_layout Standard
\noindent
Supponiamo che 
\begin_inset Formula $X_{t}$
\end_inset

 sia conosciuto e quindi deterministico.
 Sarà allora semplice calcolare il valore atteso di 
\begin_inset Formula $X_{t+n\Delta t}$
\end_inset

 e vedere che 
\end_layout

\begin_layout Itemize
esso non è costante nel tempo ma aumenta linearmente in 
\begin_inset Formula $n$
\end_inset

, 
\end_layout

\begin_layout Itemize
la varianza di 
\begin_inset Formula $X_{t+n\Delta t}$
\end_inset

 non è costante nel tempo.
 Essa è uguale a 
\begin_inset Formula $n\left(\sigma^{2}\Delta t\right)$
\end_inset

 e in maniera simile al valore atteso aumenta linearmente in 
\begin_inset Formula $n$
\end_inset

.
 
\end_layout

\begin_layout Standard
\noindent
Se invece 
\begin_inset Formula $X_{t}$
\end_inset

 fosse anch'esso aleatorio potremmo calcolare media e varianza di 
\begin_inset Formula \[
\underset{\ln(P_{t+n\Delta t}/P_{t})}{\underbrace{X_{t+n\Delta t}-X_{t}}}=n\widetilde{\mu}+\sum_{i=1}^{n}\widetilde{\varepsilon}_{t+i\Delta t}\]

\end_inset

 Il rendimento logaritmico quale funzione di 
\begin_inset Formula $n$
\end_inset

 possiede quindi le medesime proprietà di 
\begin_inset Formula $X_{t+n\Delta t}$
\end_inset

 quando 
\begin_inset Formula $X_{t}$
\end_inset

 è osservato.
 Infine, il termine ”geometric”
\begin_inset space \space{}
\end_inset

random walk, deriva dal fatto che sono i logaritmi del prezzo a seguire
 un random walk e non il prezzo stesso (come abbiamo visto ne deriva una
 crescita esponenziale).
\end_layout

\begin_layout Standard
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Standard
Tornando al modello iniziale è immediato vedere che il modello presuppone
 rendimenti logaritmici normali: 
\begin_inset Formula \[
r_{t,t+\Delta t}=\ln(P_{t+\Delta t}/P_{t})=\mu\Delta t+\sigma\sqrt{\Delta t}\varepsilon_{t+\Delta t},\]

\end_inset

 e quindi 
\begin_inset Formula \[
r_{t,t+\Delta t}\sim N(\mu\Delta t,\sigma^{2}\Delta t).\]

\end_inset

 Considerando invece il rendimento su un orizzonte di 
\begin_inset Formula $n$
\end_inset

 periodi, sulla base dei calcoli svolti in precedenza abbiamo che 
\begin_inset Formula \begin{equation}
r_{t,t+n\Delta t}=\ln(P_{t+n\Delta t}/P_{t})=n\mu\Delta t+\sigma\sqrt{\Delta t}\sum_{i=1}^{n}\varepsilon_{t+i\Delta t}\label{claudio}\end{equation}

\end_inset

 e quindi 
\begin_inset Formula \[
r_{t,t+n\Delta t}\sim N(n\mu\Delta t,n\sigma^{2}\Delta t)\text{.}\]

\end_inset

 
\begin_inset space \qquad{}
\end_inset


\begin_inset space \qquad{}
\end_inset

Quando 
\begin_inset Formula $n\Delta t=1$
\end_inset

 dalla (
\begin_inset CommandInset ref
LatexCommand ref
reference "claudio"

\end_inset

) segue semplicemente che 
\begin_inset Formula $r_{t,t+1}\sim N(\mu,\sigma^{2})$
\end_inset

.
 
\begin_inset Formula $\mu$
\end_inset

 e 
\begin_inset Formula $\sigma$
\end_inset

 sono quindi il valore atteso e la volatilità del rendimento logaritmico
 su un periodo pari all'unità di misura prescelta, l'anno ad esempio.
\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{esercizio}
\end_layout

\end_inset

 Rispetto alle proprietà d'aggregazione temporale dei rendimenti logaritmici
 viste nei precedenti capitoli, quali sono le nuove conclusioni a cui il
 modello 
\begin_inset Quotes eld
\end_inset

geometric random walk”
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash

\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset

permette di giungere? 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{esercizio}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
begin{esercizio}
\end_layout

\end_inset

 Benninga, pagina 288
\end_layout

\begin_layout Standard
\noindent
Supponiamo che 
\begin_inset Formula $t$
\end_inset

 indichi il tempo in anni.
 Noi desideriamo simulare a frequenza giornaliera.
 Poiché in un anno ci sono (circa) 
\begin_inset Formula $250$
\end_inset

 giorni lavorativi, dobbiamo scegliere 
\begin_inset Formula $\Delta t=1/250$
\end_inset

.
 Supponiamo che valore atteso e volatilità annui del rendimento logaritmico
 siano rispettivamente uguali al 
\begin_inset Formula $10\%$
\end_inset

 e 
\begin_inset Formula $20\%$
\end_inset

 e che il prezzo iniziale dell'azione sia di $25.
 Simulate un anno di osservazioni giornaliere.
\begin_inset Newpage newpage
\end_inset

 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
end{esercizio}
\end_layout

\end_inset

Inserire grafico
\end_layout

\begin_layout Chapter
Value at Risk - VaR
\end_layout

\begin_layout Section
Introduzione
\end_layout

\begin_layout Standard
Nell'ambito della gestione del rischio finanziario possiamo identificare
 i seguenti tipi di rischi 
\end_layout

\begin_layout Enumerate
Market risk
\end_layout

\begin_deeper
\begin_layout Standard
Rischio causato da movimenti inattesi ed avversi di prezzi, tassi d'interesse
 e tassi di cambio.
\end_layout

\end_deeper
\begin_layout Enumerate
Credit risk
\end_layout

\begin_deeper
\begin_layout Standard
Rischio generato da un possibile fallimento della controparte relativamente
 ad un contratto finanziario (per esempio obbligazioni Parmalat).
\end_layout

\end_deeper
\begin_layout Enumerate
Liquidity risk
\end_layout

\begin_deeper
\begin_layout Standard
Rischio dovuto alla poca liquidità dell'asset ed alla conseguente impossibilità
 d'acquisto/vendita sul mercato in caso di necessità.
\end_layout

\end_deeper
\begin_layout Enumerate
Operational risk
\end_layout

\begin_deeper
\begin_layout Standard
Rischio causato da errori nell'esecuzioni di ordini d'acquisto/vendita,
 frodi, ecc.
\end_layout

\end_deeper
\begin_layout Standard
Il Value at Risk (VaR) è attualmente la più utilizzata misura di rischio
 di mercato.
 Il VaR di un portafoglio di assets (non necessariamente di sole azioni)
 è una stima dell'
\begin_inset Formula $\left(1-\alpha\right)-$
\end_inset

quantile della distribuzione della perdita di valore del portafoglio (in
 termini assoluti o percentuali) su di un orizzonte temporale di 
\begin_inset Formula $T$
\end_inset

 periodi.
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename graficoVar.jpg
	width 8.9534cm
	height 5.4059cm

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
Nel calcolo del VaR abbiamo quindi due 
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

gradi di libertà
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

, ovvero possiamo decidere il livello di significatività 
\begin_inset Formula $\alpha$
\end_inset

 e l'orizzonte temporale 
\begin_inset Formula $T$
\end_inset

 per cui stimare la distribuzione del valore (rendimento) del portafoglio
 ed in seguito l'
\begin_inset Formula $\left(1-\alpha\right)-$
\end_inset

quantile.
 La scelta di 
\begin_inset Formula $\alpha$
\end_inset

 e di 
\begin_inset Formula $T$
\end_inset

 dipendono dall'uso che si desidera fare del VaR.
 Ad esempio, il comitato
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

The Committee does not possess any formal supranational supervisory authority,
 and its conclusions do not, and were never intended to, have legal force.
 Rather, it formulates broad supervisory standards and guidelines and recommends
 statements of best practice in the expectation that individual authorities
 will take steps to implement them through detailed arrangements ...
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
textquotedbl
\end_layout

\end_inset


\begin_inset ERT
status collapsed

\begin_layout Plain Layout

{}
\end_layout

\end_inset

.
\end_layout

\end_inset

 di Basilea II situato presso la Bank for international settlements (http://www.b
is.org/bcbs/aboutbcbs.htm) suggerisce 
\begin_inset Formula $T=5-10$
\end_inset

 giorni ed 
\begin_inset Formula $\alpha=99\%$
\end_inset

 al fine di definire i margini di capitale necessari alle banche quale garanzia
 sui rischi derivanti dalle loro attività di trading.
 Per un gestore patrimoniale o una cassa pensione invece, 
\begin_inset Formula $T$
\end_inset

 potrebbe essere pari ad un anno ed 
\begin_inset Formula $\alpha=95\%$
\end_inset

.
\end_layout

\begin_layout Standard
Ci sono almeno tre modi per stimare il VaR: 
\end_layout

\begin_layout Enumerate
Assumere un modello parametrico dei rendimenti, stimarne i parametri ed
 infine calcolare il VaR.
 
\end_layout

\begin_layout Enumerate
Utilizzare la simulazione di Monte Carlo.
 
\end_layout

\begin_layout Enumerate
Utilizzare tecniche non parametriche.
 
\end_layout

\begin_layout Standard
Abbiamo visto il modello lognormale dei rendimenti azionari, ed è questo
 il modello che vogliamo ora analizzare in relazione al VaR.
\end_layout

\begin_layout Section
VaR con rendimenti lognormali
\end_layout

\begin_layout Standard
Partendo dalla definizione di una variabile aleatoria lognormale 
\begin_inset Formula $X$
\end_inset

 è evidente che per caratterizzare la sua distribuzione è necessario specificare
 unicamente valore atteso 
\begin_inset Formula $\mu$
\end_inset

 e varianza 
\begin_inset Formula $\sigma^{2}$
\end_inset


\begin_inset space \space{}
\end_inset

di 
\begin_inset Formula $\ln(X)$
\end_inset

 (che appunto sappiamo essere normale).
 Di conseguenza, poiché 
\begin_inset Formula $\mu$
\end_inset

 e 
\begin_inset Formula $\sigma^{2}$
\end_inset

 determinano in maniera univoca e completa la distribuzione di 
\begin_inset Formula $X$
\end_inset

 essi ne determineranno anche il rischio, e di conseguenza il VaR.
\end_layout

\begin_layout Standard
Supponiamo quindi che l'azione 
\begin_inset Formula $S_{T}$
\end_inset

 abbia una distribuzione lognormale con parametri annuali 
\begin_inset Formula $(T=1)$
\end_inset

 pari a 
\begin_inset Formula $\left(\mu,\sigma^{2}\right).$
\end_inset

 Questo significa che, indicando con 
\begin_inset Formula $S_{0}$
\end_inset

 il valore iniziale
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Utilizzate la notazione dell'equazione (
\begin_inset CommandInset ref
LatexCommand ref
reference "claudio"

\end_inset

) per dedurre che 
\begin_inset Formula $T=n\Delta t$
\end_inset

.
\end_layout

\end_inset

, 
\begin_inset Formula $\ln\left(S_{T}\right)=\ln\left(S_{0}\right)+T\mu+\sigma\sqrt{T}U$
\end_inset

, con 
\begin_inset Formula $U\sim N(0,1)$
\end_inset

.
 
\begin_inset Formula $\ln\left(S_{T}\right)$
\end_inset

 ha quindi valore atteso 
\begin_inset Formula $\ln\left(S_{0}\right)+T\mu$
\end_inset

 e varianza 
\begin_inset Formula $\sigma^{2}T$
\end_inset

.
 Utilizzando la formula per il calcolo del valore atteso di una v.a.
 lognormale otteniamo che 
\begin_inset Formula \[
E(S_{T})=\exp\left(\ln\left(S_{0}\right)+T\mu+\frac{\sigma^{2}T}{2}\right)=S_{0}\exp\left((\mu+\frac{\sigma^{2}}{2})T\right).\]

\end_inset

 Notate che 
\begin_inset Formula $E(S_{T})\neq S_{0}\exp(\mu T)=\exp(E\left[\ln\left(S_{T}\right)\right])$
\end_inset

!
\end_layout

\begin_layout Standard
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Standard
Per quanto riguarda il calcolo del VaR di quest'azione con un orizzonte
 di 
\begin_inset Formula $T$
\end_inset

 anni ad un livello di confidenza del 
\begin_inset Formula $99\%$
\end_inset

: 
\begin_inset Formula \[
q_{1\%}=\exp\left(\ln\left(S_{0}\right)+T\mu+\sigma\sqrt{T}G^{-1}(1\%)\right)=S_{0}\exp(T\mu+\sigma\sqrt{T}G^{-1}(1\%)).\]

\end_inset

 Per un'azione 
\begin_inset Formula $S_{0}=80$
\end_inset

 con 
\begin_inset Formula $\mu=10\%$
\end_inset

, 
\begin_inset Formula $\sigma=30\%$
\end_inset

 ed un orizzonte temporale pari a 
\begin_inset Formula $T=1$
\end_inset

 avremo un 
\begin_inset Formula $q_{1\%}\ =44$
\end_inset

 e quindi un 
\begin_inset Formula $VaR(T;99\%)=-(44-80)=36$
\end_inset

.
 In percentuale 
\begin_inset Formula $VaR(T;99\%)=45\%$
\end_inset

.
 Notate che il segno è stato cambiato in quanto siamo interessati alla coda
 sinistra (negativa) della distribuzione.
 L'interpretazione è che 1 anno su 100 la 
\emph on
perdita
\emph default
 sarà superiore a 36 fr (superiore al 45%).
\end_layout

\begin_layout Standard
Avremmo pure potuto calcolare il quantile 
\begin_inset Formula $q_{1\%}$
\end_inset

 del rendimento e non del valore dell'azione.
 Infatti, sapendo che 
\begin_inset Formula \[
\ln\left(S_{T}/S_{0}\right)=T\mu+\sigma\sqrt{T}U,\]

\end_inset

 sempre con 
\begin_inset Formula $\mu=10\%$
\end_inset

, 
\begin_inset Formula $\sigma=30\%$
\end_inset

 e 
\begin_inset Formula $T=1$
\end_inset

: 
\begin_inset Formula \[
q_{1\%}=T\mu+\sigma\sqrt{T}G^{-1}(1\%)=10\%+30\%\cdot(-2.326)=-0.5979\;.\]

\end_inset

 Con una probabilità del 
\begin_inset Formula $1\%$
\end_inset

 il rendimento lognormale sarà inferiore o uguale a 
\begin_inset Formula $-0.5979$
\end_inset

.
 Ora, essendo 
\begin_inset Formula $S_{T}=S_{0}\exp(r_{T})$
\end_inset

 otteniamo 
\begin_inset Formula $S_{T}=80\exp(-0.5979)=44$
\end_inset

, che corrisponde ad un 
\begin_inset Formula $VaR$
\end_inset

 del 
\begin_inset Formula $45\%$
\end_inset

 calcolato come 
\begin_inset Formula $-100\frac{44-80}{80}$
\end_inset

.
\end_layout

\begin_layout Section
A Three-Asset Problem
\end_layout

\begin_layout Standard
Nel caso che il portafoglio consista in due o più azioni abbiamo visto nell'eser
cizio 2 della serie 4 che il rendimento logaritmico di un portafoglio, 
\begin_inset Formula $\ln(V_{T}/V_{0})$
\end_inset

, è diverso dalla somma pesata dei rendimenti logaritmici sulle singole
 posizioni.
 Tuttavia, sempre nella serie 4, avete dimostrato che 
\begin_inset Formula \begin{equation}
\left(V_{T}-V_{0}\right)/V_{0}=\sum\limits _{i=1}^{N}w_{i,0}\frac{P_{i,T}-P_{i,0}}{P_{i,0}}\label{basandoci}\end{equation}

\end_inset

 Facendo uso della (
\begin_inset CommandInset ref
LatexCommand ref
reference "basandoci"

\end_inset

) e del fatto che
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Per 
\begin_inset Formula $x$
\end_inset

 prossimi allo 
\begin_inset Formula $0$
\end_inset

 vale infatti che 
\begin_inset Formula $\ln(1+x)\simeq x$
\end_inset

.
\end_layout

\end_inset

 
\begin_inset Formula \[
\frac{P_{i,T}-P_{i,0}}{P_{i,0}}\simeq\ln\left(1+\frac{P_{i,T}-P_{i,0}}{P_{i,0}}\right)=\ln\left(P_{i,T}/P_{i.0}\right)\thicksim N\left(T\mu_{i},\sigma_{i}^{2}T\right)\]

\end_inset

 approssimiamo la distribuzione multivariata dei rendimenti percentuali
 
\begin_inset Formula $r_{0,T}$
\end_inset

 con la distribuzione normale multivariata dei rendimenti logaritmici 
\begin_inset Formula $\ln\left(P_{T}/P_{0}\right)$
\end_inset

.
\end_layout

\begin_layout Section
Historical simulation
\end_layout

\begin_layout Standard
Nei paragrafi precedenti abbiamo visto come calcolare il 
\begin_inset Formula $VaR$
\end_inset

 utilizzando il modello parametrico lognormale.
 Tuttavia quando è necessario calcolare il 
\begin_inset Formula $VaR$
\end_inset

 di portafogli composti da numerosi strumenti finanziari quali ad esempio
 bonds, derivati, swaps, futures ecc.
 è necessario rivedere l'approccio in quanto, ad esempio, la relazione fra
 i rendimenti su un call e rendimenti sul relativo sottostante non è più
 lineare.
 Semplificazioni ed ipotesi aggiuntive sono quindi necessarie.
\end_layout

\begin_layout Standard
Abbiamo precedentemente visto come simulare variabili aleatorie indipendenti
 aventi la distribuzione desiderata.
 Una prima possibilità sarebbe quindi quella di utilizzare il modello parametric
o per simulare la distribuzione futura dei prezzi alla data desiderata.
 In pratica si procederebbe a tappe: 
\end_layout

\begin_layout Enumerate
Utilizzando le osservazioni a disposizione, stimate i parametri del modello
 parametrico 
\end_layout

\begin_layout Enumerate
\begin_inset Formula $i=1$
\end_inset

; 
\end_layout

\begin_layout Enumerate
Utilizzando il modello parametrico e le stime ottenute simula un 
\emph on
rendimento
\emph default
 all'orizzonte desiderato.
 
\end_layout

\begin_layout Enumerate
Tramite il rendimento simulato calcola il prezzo corrispondente.
 
\end_layout

\begin_layout Enumerate
Calcola il valore totale del portafoglio.
 
\end_layout

\begin_layout Enumerate
Se 
\begin_inset Formula $i=1000$
\end_inset

 termina, altrimenti 
\begin_inset Formula $i=i+1$
\end_inset

 e torna la punto 3.
 
\end_layout

\begin_layout Standard
Utilizzando la distribuzione empirica delle 
\begin_inset Formula $1000$
\end_inset

 simulazioni calcola il quantile desiderato.
\end_layout

\begin_layout Standard
Questa metodologia chiamata 
\series bold
simulazione di Monte Carlo
\series default
 dipende dalla validità del modello parametrico utilizzato.
\end_layout

\begin_layout Standard
La simulazione storica (historical simulation) tende a staccarsi da un modello
 parametrico ed utilizza esclusivamente la distribuzione empirica dei rendimenti
 (logaritmici).
 E' consuetudine utilizzare rendimenti giornalieri per eseguire la seguente
 variante dell'algoritmo descritto in precedenza.
 Supponiamo di avere 
\begin_inset Formula $N+1$
\end_inset

 osservazioni giornaliere di prezzi, tassi d'interesse, tassi di cambio...
 .
 Allora: 
\end_layout

\begin_layout Enumerate
\begin_inset Formula $i=1$
\end_inset

; 
\end_layout

\begin_layout Enumerate
Estraete a caso una delle 
\begin_inset Formula $N$
\end_inset

 date per le quale potete calcolare i rendimenti giornalieri.
 
\end_layout

\begin_layout Enumerate
Prendete tutti i rendimenti corrispondenti alla data estratta e moltiplicateli
 per 
\begin_inset Formula $\sqrt{T}$
\end_inset

, dove 
\begin_inset Formula $T$
\end_inset

 corrisponde alla lunghezza in giorni dell'orizzonte temporale per il quale
 desiderate calcolare il 
\begin_inset Formula $VaR$
\end_inset

.
 
\end_layout

\begin_layout Enumerate
Con i rendimenti scalati calcolate i prezzi degli strumenti in portafoglio.
 
\end_layout

\begin_layout Enumerate
Calcola il valore totale del portafoglio.
 
\end_layout

\begin_layout Enumerate
Se 
\begin_inset Formula $i=1000$
\end_inset

 termina, altrimenti 
\begin_inset Formula $i=i+1$
\end_inset

 e torna la punto 2.
 
\end_layout

\begin_layout Standard
Utilizzando la distribuzione empirica delle 
\begin_inset Formula $1000$
\end_inset

 simulazioni calcolate il quantile desiderato.
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Standard

\series bold
Osservazione
\series default
: 
\end_layout

\begin_layout Enumerate
Ad ogni ripetizione 
\begin_inset Formula $i$
\end_inset

 è 
\emph on
fondamentale
\emph default
 che tutti i rendimenti siano della medesima data.
 Questo per mantenere la struttura di correlazione 
\begin_inset Formula $\emph{cross-section}$
\end_inset

 fra i rendimenti stessi.
 Quanto è spiegato nel capitolo 12.5 di Benninga è sbagliato! 
\end_layout

\begin_layout Enumerate
Questa metodologia è chiamata col nome di historical simulation.
 
\end_layout

\end_body
\end_document
